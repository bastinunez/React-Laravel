var Ds=Object.defineProperty;var Ls=(R,j,Pe)=>j in R?Ds(R,j,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):R[j]=Pe;var pn=(R,j,Pe)=>(Ls(R,typeof j!="symbol"?j+"":j,Pe),Pe),Oi=(R,j,Pe)=>{if(!j.has(R))throw TypeError("Cannot "+Pe)};var K=(R,j,Pe)=>(Oi(R,j,"read from private field"),Pe?Pe.call(R):j.get(R)),qe=(R,j,Pe)=>{if(j.has(R))throw TypeError("Cannot add the same private member more than once");j instanceof WeakSet?j.add(R):j.set(R,Pe)},pt=(R,j,Pe,B)=>(Oi(R,j,"write to private field"),B?B.call(R,Pe):j.set(R,Pe),Pe);var Di=(R,j,Pe,B)=>({set _(J){pt(R,j,J,Pe)},get _(){return K(R,j,B)}}),tt=(R,j,Pe)=>(Oi(R,j,"access private method"),Pe);import{B as commonjsRequire,D as require$$5,r as reactExports,q,m as m$1,j as jsxRuntimeExports,a as ae,d as de}from"./app-peuYjEpJ.js";import{A as Authenticated,b as button_default,I as Icon,P as mdiTrayArrowDown,Q as mdiMagnifyMinusOutline,R as mdiMagnifyPlusOutline,u as usePermission}from"./AuthenticatedLayout-p56YD4qG.js";import{T as TitleTemplate}from"./TitleTemplate-VNYP4QaZ.js";import{C as ContentTemplate}from"./ContentTemplate-Ei9JbHLa.js";import{u as useDisclosure,m as modal_default,a as modal_content_default,b as modal_header_default,c as modal_body_default,d as modal_footer_default}from"./index-tpWZSiLQ.js";import{t as table_default,p as pagination_default,a as table_header_default,b as table_column_default,c as table_body_default,d as table_row_default,e as table_cell_default}from"./chunk-YRZGWF2W-82o9ud7j.js";import"./import-a4H3-vU0.js";import"./chunk-AMSULWPV-tDjQ4Vjp.js";import"./import-V_VTaOEA.js";const base64toBlob=R=>{const j=R.substr(28),Pe=atob(j);let B=Pe.length,J=new Uint8Array(B);for(;B--;)J[B]=Pe.charCodeAt(B);return new Blob([J],{type:"application/pdf"})},Transform=(R,j,Pe)=>{const B=base64toBlob(R),J=URL.createObjectURL(B),y=`data:${j};base64,${R}`,ve=Pe+".pdf";return{url:J,link:y,filename:ve}};var lib$1={exports:{}},core_min={},pdf={exports:{}};(function(module,exports){(function(j,Pe){module.exports=Pe()})(globalThis,()=>(()=>{var __webpack_modules__=[,(R,j)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.VerbosityLevel=j.Util=j.UnknownErrorException=j.UnexpectedResponseException=j.UNSUPPORTED_FEATURES=j.TextRenderingMode=j.RenderingIntentFlag=j.PermissionFlag=j.PasswordResponses=j.PasswordException=j.PageActionEventType=j.OPS=j.MissingPDFException=j.LINE_FACTOR=j.LINE_DESCENT_FACTOR=j.InvalidPDFException=j.ImageKind=j.IDENTITY_MATRIX=j.FormatError=j.FeatureTest=j.FONT_IDENTITY_MATRIX=j.DocumentActionEventType=j.CMapCompressionType=j.BaseException=j.BASELINE_FACTOR=j.AnnotationType=j.AnnotationStateModelType=j.AnnotationReviewState=j.AnnotationReplyType=j.AnnotationMode=j.AnnotationMarkedState=j.AnnotationFlag=j.AnnotationFieldFlag=j.AnnotationEditorType=j.AnnotationEditorPrefix=j.AnnotationEditorParamsType=j.AnnotationBorderStyleType=j.AnnotationActionEventType=j.AbortException=void 0,j.assert=ce,j.bytesToString=Be,j.createPromiseCapability=Rt,j.createValidAbsoluteUrl=F,j.getModificationDate=Dt,j.getVerbosityLevel=Te,j.info=Re,j.isArrayBuffer=gt,j.isArrayEqual=kt,j.objectFromMap=he,j.objectSize=ie,j.setVerbosityLevel=Le,j.shadow=ee,j.string32=G,j.stringToBytes=O,j.stringToPDFString=lt,j.stringToUTF8String=st,j.unreachable=et,j.utf8StringToString=dt,j.warn=$e;const Pe=[1,0,0,1,0,0];j.IDENTITY_MATRIX=Pe;const B=[.001,0,0,.001,0,0];j.FONT_IDENTITY_MATRIX=B;const J=1.35;j.LINE_FACTOR=J;const y=.35;j.LINE_DESCENT_FACTOR=y;const ve=y/J;j.BASELINE_FACTOR=ve;const Ne={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};j.RenderingIntentFlag=Ne;const ye={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};j.AnnotationMode=ye;const Q="pdfjs_internal_editor_";j.AnnotationEditorPrefix=Q;const $={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};j.AnnotationEditorType=$;const be={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};j.AnnotationEditorParamsType=be;const te={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};j.PermissionFlag=te;const X={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};j.TextRenderingMode=X;const U={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};j.ImageKind=U;const V={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};j.AnnotationType=V;const T={MARKED:"Marked",REVIEW:"Review"};j.AnnotationStateModelType=T;const L={MARKED:"Marked",UNMARKED:"Unmarked"};j.AnnotationMarkedState=L;const H={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};j.AnnotationReviewState=H;const x={GROUP:"Group",REPLY:"R"};j.AnnotationReplyType=x;const P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};j.AnnotationFlag=P;const _={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};j.AnnotationFieldFlag=_;const A={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};j.AnnotationBorderStyleType=A;const N={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};j.AnnotationActionEventType=N;const ne={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};j.DocumentActionEventType=ne;const se={O:"PageOpen",C:"PageClose"};j.PageActionEventType=se;const we={ERRORS:0,WARNINGS:1,INFOS:5};j.VerbosityLevel=we;const Y={NONE:0,BINARY:1};j.CMapCompressionType=Y;const Me={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};j.OPS=Me;const Je={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};j.UNSUPPORTED_FEATURES=Je;const ze={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};j.PasswordResponses=ze;let Ge=we.WARNINGS;function Le(ue){Number.isInteger(ue)&&(Ge=ue)}function Te(){return Ge}function Re(ue){Ge>=we.INFOS&&console.log(`Info: ${ue}`)}function $e(ue){Ge>=we.WARNINGS&&console.log(`Warning: ${ue}`)}function et(ue){throw new Error(ue)}function ce(ue,ge){ue||et(ge)}function D(ue){if(!ue)return!1;switch(ue.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function F(ue,ge=null,Se=null){if(!ue)return null;try{if(Se&&typeof ue=="string"){if(Se.addDefaultProtocol&&ue.startsWith("www.")){const xt=ue.match(/\./g);xt&&xt.length>=2&&(ue=`http://${ue}`)}if(Se.tryConvertEncoding)try{ue=st(ue)}catch{}}const nt=ge?new URL(ue,ge):new URL(ue);if(D(nt))return nt}catch{}return null}function ee(ue,ge,Se,nt=!1){return Object.defineProperty(ue,ge,{value:Se,enumerable:!nt,configurable:!0,writable:!1}),Se}const le=function(){function ge(Se,nt){this.constructor===ge&&et("Cannot initialize BaseException."),this.message=Se,this.name=nt}return ge.prototype=new Error,ge.constructor=ge,ge}();j.BaseException=le;class fe extends le{constructor(ge,Se){super(ge,"PasswordException"),this.code=Se}}j.PasswordException=fe;class Ae extends le{constructor(ge,Se){super(ge,"UnknownErrorException"),this.details=Se}}j.UnknownErrorException=Ae;class Ce extends le{constructor(ge){super(ge,"InvalidPDFException")}}j.InvalidPDFException=Ce;class je extends le{constructor(ge){super(ge,"MissingPDFException")}}j.MissingPDFException=je;class Xe extends le{constructor(ge,Se){super(ge,"UnexpectedResponseException"),this.status=Se}}j.UnexpectedResponseException=Xe;class Ue extends le{constructor(ge){super(ge,"FormatError")}}j.FormatError=Ue;class We extends le{constructor(ge){super(ge,"AbortException")}}j.AbortException=We;function Be(ue){(typeof ue!="object"||ue===null||ue.length===void 0)&&et("Invalid argument for bytesToString");const ge=ue.length,Se=8192;if(ge<Se)return String.fromCharCode.apply(null,ue);const nt=[];for(let xt=0;xt<ge;xt+=Se){const zt=Math.min(xt+Se,ge),Ie=ue.subarray(xt,zt);nt.push(String.fromCharCode.apply(null,Ie))}return nt.join("")}function O(ue){typeof ue!="string"&&et("Invalid argument for stringToBytes");const ge=ue.length,Se=new Uint8Array(ge);for(let nt=0;nt<ge;++nt)Se[nt]=ue.charCodeAt(nt)&255;return Se}function G(ue){return String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255)}function ie(ue){return Object.keys(ue).length}function he(ue){const ge=Object.create(null);for(const[Se,nt]of ue)ge[Se]=nt;return ge}function re(){const ue=new Uint8Array(4);return ue[0]=1,new Uint32Array(ue.buffer,0,1)[0]===1}function xe(){try{return new Function(""),!0}catch{return!1}}class Ve{static get isLittleEndian(){return ee(this,"isLittleEndian",re())}static get isEvalSupported(){return ee(this,"isEvalSupported",xe())}static get isOffscreenCanvasSupported(){return ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?ee(this,"platform",{isWin:!1,isMac:!1}):ee(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}j.FeatureTest=Ve;const Qe=[...Array(256).keys()].map(ue=>ue.toString(16).padStart(2,"0"));class rt{static makeHexColor(ge,Se,nt){return`#${Qe[ge]}${Qe[Se]}${Qe[nt]}`}static scaleMinMax(ge,Se){let nt;ge[0]?(ge[0]<0&&(nt=Se[0],Se[0]=Se[1],Se[1]=nt),Se[0]*=ge[0],Se[1]*=ge[0],ge[3]<0&&(nt=Se[2],Se[2]=Se[3],Se[3]=nt),Se[2]*=ge[3],Se[3]*=ge[3]):(nt=Se[0],Se[0]=Se[2],Se[2]=nt,nt=Se[1],Se[1]=Se[3],Se[3]=nt,ge[1]<0&&(nt=Se[2],Se[2]=Se[3],Se[3]=nt),Se[2]*=ge[1],Se[3]*=ge[1],ge[2]<0&&(nt=Se[0],Se[0]=Se[1],Se[1]=nt),Se[0]*=ge[2],Se[1]*=ge[2]),Se[0]+=ge[4],Se[1]+=ge[4],Se[2]+=ge[5],Se[3]+=ge[5]}static transform(ge,Se){return[ge[0]*Se[0]+ge[2]*Se[1],ge[1]*Se[0]+ge[3]*Se[1],ge[0]*Se[2]+ge[2]*Se[3],ge[1]*Se[2]+ge[3]*Se[3],ge[0]*Se[4]+ge[2]*Se[5]+ge[4],ge[1]*Se[4]+ge[3]*Se[5]+ge[5]]}static applyTransform(ge,Se){const nt=ge[0]*Se[0]+ge[1]*Se[2]+Se[4],xt=ge[0]*Se[1]+ge[1]*Se[3]+Se[5];return[nt,xt]}static applyInverseTransform(ge,Se){const nt=Se[0]*Se[3]-Se[1]*Se[2],xt=(ge[0]*Se[3]-ge[1]*Se[2]+Se[2]*Se[5]-Se[4]*Se[3])/nt,zt=(-ge[0]*Se[1]+ge[1]*Se[0]+Se[4]*Se[1]-Se[5]*Se[0])/nt;return[xt,zt]}static getAxialAlignedBoundingBox(ge,Se){const nt=rt.applyTransform(ge,Se),xt=rt.applyTransform(ge.slice(2,4),Se),zt=rt.applyTransform([ge[0],ge[3]],Se),Ie=rt.applyTransform([ge[2],ge[1]],Se);return[Math.min(nt[0],xt[0],zt[0],Ie[0]),Math.min(nt[1],xt[1],zt[1],Ie[1]),Math.max(nt[0],xt[0],zt[0],Ie[0]),Math.max(nt[1],xt[1],zt[1],Ie[1])]}static inverseTransform(ge){const Se=ge[0]*ge[3]-ge[1]*ge[2];return[ge[3]/Se,-ge[1]/Se,-ge[2]/Se,ge[0]/Se,(ge[2]*ge[5]-ge[4]*ge[3])/Se,(ge[4]*ge[1]-ge[5]*ge[0])/Se]}static singularValueDecompose2dScale(ge){const Se=[ge[0],ge[2],ge[1],ge[3]],nt=ge[0]*Se[0]+ge[1]*Se[2],xt=ge[0]*Se[1]+ge[1]*Se[3],zt=ge[2]*Se[0]+ge[3]*Se[2],Ie=ge[2]*Se[1]+ge[3]*Se[3],it=(nt+Ie)/2,ut=Math.sqrt((nt+Ie)**2-4*(nt*Ie-zt*xt))/2,ft=it+ut||1,jt=it-ut||1;return[Math.sqrt(ft),Math.sqrt(jt)]}static normalizeRect(ge){const Se=ge.slice(0);return ge[0]>ge[2]&&(Se[0]=ge[2],Se[2]=ge[0]),ge[1]>ge[3]&&(Se[1]=ge[3],Se[3]=ge[1]),Se}static intersect(ge,Se){const nt=Math.max(Math.min(ge[0],ge[2]),Math.min(Se[0],Se[2])),xt=Math.min(Math.max(ge[0],ge[2]),Math.max(Se[0],Se[2]));if(nt>xt)return null;const zt=Math.max(Math.min(ge[1],ge[3]),Math.min(Se[1],Se[3])),Ie=Math.min(Math.max(ge[1],ge[3]),Math.max(Se[1],Se[3]));return zt>Ie?null:[nt,zt,xt,Ie]}static bezierBoundingBox(ge,Se,nt,xt,zt,Ie,it,ut){const ft=[],jt=[[],[]];let Zt,Ht,Wt,Bt,Xt,_n,dn,hn;for(let Tn=0;Tn<2;++Tn){if(Tn===0?(Ht=6*ge-12*nt+6*zt,Zt=-3*ge+9*nt-9*zt+3*it,Wt=3*nt-3*ge):(Ht=6*Se-12*xt+6*Ie,Zt=-3*Se+9*xt-9*Ie+3*ut,Wt=3*xt-3*Se),Math.abs(Zt)<1e-12){if(Math.abs(Ht)<1e-12)continue;Bt=-Wt/Ht,0<Bt&&Bt<1&&ft.push(Bt);continue}dn=Ht*Ht-4*Wt*Zt,hn=Math.sqrt(dn),!(dn<0)&&(Xt=(-Ht+hn)/(2*Zt),0<Xt&&Xt<1&&ft.push(Xt),_n=(-Ht-hn)/(2*Zt),0<_n&&_n<1&&ft.push(_n))}let fn=ft.length,an;const wn=fn;for(;fn--;)Bt=ft[fn],an=1-Bt,jt[0][fn]=an*an*an*ge+3*an*an*Bt*nt+3*an*Bt*Bt*zt+Bt*Bt*Bt*it,jt[1][fn]=an*an*an*Se+3*an*an*Bt*xt+3*an*Bt*Bt*Ie+Bt*Bt*Bt*ut;return jt[0][wn]=ge,jt[1][wn]=Se,jt[0][wn+1]=it,jt[1][wn+1]=ut,jt[0].length=jt[1].length=wn+2,[Math.min(...jt[0]),Math.min(...jt[1]),Math.max(...jt[0]),Math.max(...jt[1])]}}j.Util=rt;const He=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function lt(ue){if(ue[0]>="ï"){let Se;if(ue[0]==="þ"&&ue[1]==="ÿ"?Se="utf-16be":ue[0]==="ÿ"&&ue[1]==="þ"?Se="utf-16le":ue[0]==="ï"&&ue[1]==="»"&&ue[2]==="¿"&&(Se="utf-8"),Se)try{const nt=new TextDecoder(Se,{fatal:!0}),xt=O(ue);return nt.decode(xt)}catch(nt){$e(`stringToPDFString: "${nt}".`)}}const ge=[];for(let Se=0,nt=ue.length;Se<nt;Se++){const xt=He[ue.charCodeAt(Se)];ge.push(xt?String.fromCharCode(xt):ue.charAt(Se))}return ge.join("")}function st(ue){return decodeURIComponent(escape(ue))}function dt(ue){return unescape(encodeURIComponent(ue))}function gt(ue){return typeof ue=="object"&&ue!==null&&ue.byteLength!==void 0}function kt(ue,ge){if(ue.length!==ge.length)return!1;for(let Se=0,nt=ue.length;Se<nt;Se++)if(ue[Se]!==ge[Se])return!1;return!0}function Dt(ue=new Date){return[ue.getUTCFullYear().toString(),(ue.getUTCMonth()+1).toString().padStart(2,"0"),ue.getUTCDate().toString().padStart(2,"0"),ue.getUTCHours().toString().padStart(2,"0"),ue.getUTCMinutes().toString().padStart(2,"0"),ue.getUTCSeconds().toString().padStart(2,"0")].join("")}function Rt(){const ue=Object.create(null);let ge=!1;return Object.defineProperty(ue,"settled",{get(){return ge}}),ue.promise=new Promise(function(Se,nt){ue.resolve=function(xt){ge=!0,Se(xt)},ue.reject=function(xt){ge=!0,nt(xt)}}),ue}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var R,j,B,J,y,ve,Ne,ye,Q,$,Li,te,X,Ii,V,T;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:H,NodeCMapReaderFactory:x,NodeStandardFontDataFactory:P}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=H,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=x,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=P}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:H}=__w_pdfjs_require__(21);createPDFNetworkStream=x=>new H(x)}else{const{PDFNetworkStream:H}=__w_pdfjs_require__(24),{PDFFetchStream:x}=__w_pdfjs_require__(25);createPDFNetworkStream=P=>(0,_display_utils.isValidFetchUrl)(P.url)?new x(P):new H(P)}function getDocument(H){if(typeof H=="string"||H instanceof URL)H={url:H};else if((0,_util.isArrayBuffer)(H))H={data:H};else if(H instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),H={range:H};else if(typeof H!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!H.url&&!H.data&&!H.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const x=new PDFDocumentLoadingTask,P=H.url?getUrlProp(H.url):null,_=H.data?getDataProp(H.data):null,A=H.httpHeaders||null,N=H.withCredentials===!0,ne=H.password??null,se=H.range instanceof PDFDataRangeTransport?H.range:null,we=Number.isInteger(H.rangeChunkSize)&&H.rangeChunkSize>0?H.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Y=H.worker instanceof PDFWorker?H.worker:null;const Me=H.verbosity,Je=typeof H.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(H.docBaseUrl)?H.docBaseUrl:null,ze=typeof H.cMapUrl=="string"?H.cMapUrl:null,Ge=H.cMapPacked!==!1,Le=H.CMapReaderFactory||DefaultCMapReaderFactory,Te=typeof H.standardFontDataUrl=="string"?H.standardFontDataUrl:null,Re=H.StandardFontDataFactory||DefaultStandardFontDataFactory,$e=H.stopAtErrors!==!0,et=Number.isInteger(H.maxImageSize)&&H.maxImageSize>-1?H.maxImageSize:-1,ce=H.isEvalSupported!==!1,D=typeof H.isOffscreenCanvasSupported=="boolean"?H.isOffscreenCanvasSupported:!_is_node.isNodeJS,F=typeof H.disableFontFace=="boolean"?H.disableFontFace:_is_node.isNodeJS,ee=H.fontExtraProperties===!0,le=H.enableXfa===!0,fe=H.ownerDocument||globalThis.document,Ae=H.disableRange===!0,Ce=H.disableStream===!0,je=H.disableAutoFetch===!0,Xe=H.pdfBug===!0,Ue=se?se.length:H.length??NaN,We=typeof H.useSystemFonts=="boolean"?H.useSystemFonts:!_is_node.isNodeJS&&!F,Be=typeof H.useWorkerFetch=="boolean"?H.useWorkerFetch:Le===_display_utils.DOMCMapReaderFactory&&Re===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ze,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Te,document.baseURI),O=null;(0,_util.setVerbosityLevel)(Me);const G=Be?null:{cMapReaderFactory:new Le({baseUrl:ze,isCompressed:Ge}),standardFontDataFactory:new Re({baseUrl:Te})};if(!Y){const xe={verbosity:Me,port:_worker_options.GlobalWorkerOptions.workerPort};Y=xe.port?PDFWorker.fromPort(xe):new PDFWorker(xe),x._worker=Y}const ie=x.docId,he={docId:ie,apiVersion:"3.4.120",data:_,password:ne,disableAutoFetch:je,rangeChunkSize:we,length:Ue,docBaseUrl:Je,enableXfa:le,evaluatorOptions:{maxImageSize:et,disableFontFace:F,ignoreErrors:$e,isEvalSupported:ce,isOffscreenCanvasSupported:D,fontExtraProperties:ee,useSystemFonts:We,cMapUrl:Be?ze:null,standardFontDataUrl:Be?Te:null}},re={ignoreErrors:$e,isEvalSupported:ce,disableFontFace:F,fontExtraProperties:ee,enableXfa:le,ownerDocument:fe,disableAutoFetch:je,pdfBug:Xe,styleElement:O};return Y.promise.then(function(){if(x.destroyed)throw new Error("Loading aborted");const xe=_fetchDocument(Y,he),Ve=new Promise(function(Qe){let rt;se?rt=new _transport_stream.PDFDataTransportStream({length:Ue,initialData:se.initialData,progressiveDone:se.progressiveDone,contentDispositionFilename:se.contentDispositionFilename,disableRange:Ae,disableStream:Ce},se):_||(rt=createPDFNetworkStream({url:P,length:Ue,httpHeaders:A,withCredentials:N,rangeChunkSize:we,disableRange:Ae,disableStream:Ce})),Qe(rt)});return Promise.all([xe,Ve]).then(function([Qe,rt]){if(x.destroyed)throw new Error("Loading aborted");const He=new _message_handler.MessageHandler(ie,Qe,Y.port),lt=new WorkerTransport(He,x,rt,re,G);x._transport=lt,He.send("Ready",null)})}).catch(x._capability.reject),x}async function _fetchDocument(H,x){if(H.destroyed)throw new Error("Worker was destroyed");const P=await H.messageHandler.sendWithPromise("GetDocRequest",x,x.data?[x.data.buffer]:null);if(H.destroyed)throw new Error("Worker was destroyed");return P}function getUrlProp(H){if(H instanceof URL)return H.href;try{return new URL(H,window.location).href}catch{if(_is_node.isNodeJS&&typeof H=="string")return H}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(H){if(_is_node.isNodeJS&&typeof Buffer<"u"&&H instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(H);if(H instanceof Uint8Array&&H.byteLength===H.buffer.byteLength)return H;if(typeof H=="string")return(0,_util.stringToBytes)(H);if(typeof H=="object"&&!isNaN(H==null?void 0:H.length)||(0,_util.isArrayBuffer)(H))return new Uint8Array(H);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const Pe=class Pe{constructor(){qe(this,j,null);this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Di(Pe,R)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return K(this,j)}set onUnsupportedFeature(x){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),pt(this,j,x)}get promise(){return this._capability.promise}async destroy(){var x;this.destroyed=!0,await((x=this._transport)==null?void 0:x.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};R=new WeakMap,j=new WeakMap,qe(Pe,R,0);let PDFDocumentLoadingTask=Pe;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(x,P,_=!1,A=null){this.length=x,this.initialData=P,this.progressiveDone=_,this.contentDispositionFilename=A,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(x){this._rangeListeners.push(x)}addProgressListener(x){this._progressListeners.push(x)}addProgressiveReadListener(x){this._progressiveReadListeners.push(x)}addProgressiveDoneListener(x){this._progressiveDoneListeners.push(x)}onDataRange(x,P){for(const _ of this._rangeListeners)_(x,P)}onDataProgress(x,P){this._readyCapability.promise.then(()=>{for(const _ of this._progressListeners)_(x,P)})}onDataProgressiveRead(x){this._readyCapability.promise.then(()=>{for(const P of this._progressiveReadListeners)P(x)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const x of this._progressiveDoneListeners)x()})}transportReady(){this._readyCapability.resolve()}requestDataRange(x,P){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(x,P){this._pdfInfo=x,this._transport=P}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(x){return this._transport.getPage(x)}getPageIndex(x){return this._transport.getPageIndex(x)}getDestinations(){return this._transport.getDestinations()}getDestination(x){return this._transport.getDestination(x)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(x=!1){return this._transport.startCleanup(x||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(x,P,_,A,N=!1){this._pageIndex=x,this._pageInfo=P,this._ownerDocument=A,this._transport=_,this._stats=N?new _display_utils.StatTimer:null,this._pdfBug=N,this.commonObjs=_.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:x,rotation:P=this.rotate,offsetX:_=0,offsetY:A=0,dontFlip:N=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:x,rotation:P,offsetX:_,offsetY:A,dontFlip:N})}getAnnotations({intent:x="display"}={}){const P=this._transport.getRenderingIntent(x);return this._transport.getAnnotations(this._pageIndex,P.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var x;return((x=this._transport._htmlForXfa)==null?void 0:x.children[this._pageIndex])||null}render({canvasContext:x,viewport:P,intent:_="display",annotationMode:A=_util.AnnotationMode.ENABLE,transform:N=null,canvasFactory:ne=null,background:se=null,optionalContentConfigPromise:we=null,annotationCanvasMap:Y=null,pageColors:Me=null,printAnnotationStorage:Je=null}){var ce,D;(ce=this._stats)==null||ce.time("Overall");const ze=this._transport.getRenderingIntent(_,A,Je);this.pendingCleanup=!1,we||(we=this._transport.getOptionalContentConfig());let Ge=this._intentStates.get(ze.cacheKey);Ge||(Ge=Object.create(null),this._intentStates.set(ze.cacheKey,Ge)),Ge.streamReaderCancelTimeout&&(clearTimeout(Ge.streamReaderCancelTimeout),Ge.streamReaderCancelTimeout=null);const Le=ne||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Te=!!(ze.renderingIntent&_util.RenderingIntentFlag.PRINT);Ge.displayReadyCapability||(Ge.displayReadyCapability=(0,_util.createPromiseCapability)(),Ge.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(ze));const Re=F=>{var ee,le;Ge.renderTasks.delete($e),(this.cleanupAfterRender||Te)&&(this.pendingCleanup=!0),this._tryCleanup(),F?($e.capability.reject(F),this._abortOperatorList({intentState:Ge,reason:F instanceof Error?F:new Error(F)})):$e.capability.resolve(),(ee=this._stats)==null||ee.timeEnd("Rendering"),(le=this._stats)==null||le.timeEnd("Overall")},$e=new InternalRenderTask({callback:Re,params:{canvasContext:x,viewport:P,transform:N,background:se},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Y,operatorList:Ge.operatorList,pageIndex:this._pageIndex,canvasFactory:Le,useRequestAnimationFrame:!Te,pdfBug:this._pdfBug,pageColors:Me});(Ge.renderTasks||(Ge.renderTasks=new Set)).add($e);const et=$e.task;return Promise.all([Ge.displayReadyCapability.promise,we]).then(([F,ee])=>{var le;if(this.pendingCleanup){Re();return}(le=this._stats)==null||le.time("Rendering"),$e.initializeGraphics({transparency:F,optionalContentConfig:ee}),$e.operatorListChanged()}).catch(Re),et}getOperatorList({intent:x="display",annotationMode:P=_util.AnnotationMode.ENABLE,printAnnotationStorage:_=null}={}){var we;function A(){ne.operatorList.lastChunk&&(ne.opListReadCapability.resolve(ne.operatorList),ne.renderTasks.delete(se))}const N=this._transport.getRenderingIntent(x,P,_,!0);let ne=this._intentStates.get(N.cacheKey);ne||(ne=Object.create(null),this._intentStates.set(N.cacheKey,ne));let se;return ne.opListReadCapability||(se=Object.create(null),se.operatorListChanged=A,ne.opListReadCapability=(0,_util.createPromiseCapability)(),(ne.renderTasks||(ne.renderTasks=new Set)).add(se),ne.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(we=this._stats)==null||we.time("Page Request"),this._pumpOperatorList(N)),ne.opListReadCapability.promise}streamTextContent({disableCombineTextItems:x=!1,includeMarkedContent:P=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:x!==!0,includeMarkedContent:P===!0},{highWaterMark:100,size(A){return A.items.length}})}getTextContent(x={}){if(this._transport._htmlForXfa)return this.getXfa().then(_=>_xfa_text.XfaText.textContent(_));const P=this.streamTextContent(x);return new Promise(function(_,A){function N(){ne.read().then(function({value:we,done:Y}){if(Y){_(se);return}Object.assign(se.styles,we.styles),se.items.push(...we.items),N()},A)}const ne=P.getReader(),se={items:[],styles:Object.create(null)};N()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const x=[];for(const P of this._intentStates.values())if(this._abortOperatorList({intentState:P,reason:new Error("Page was destroyed."),force:!0}),!P.opListReadCapability)for(const _ of P.renderTasks)x.push(_.completed),_.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(x)}cleanup(x=!1){return this.pendingCleanup=!0,this._tryCleanup(x)}_tryCleanup(x=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:P,operatorList:_}of this._intentStates.values())if(P.size>0||!_.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(x,P){var A,N;const _=this._intentStates.get(P);_&&((A=this._stats)==null||A.timeEnd("Page Request"),(N=_.displayReadyCapability)==null||N.resolve(x))}_renderPageChunk(x,P){for(let _=0,A=x.length;_<A;_++)P.operatorList.fnArray.push(x.fnArray[_]),P.operatorList.argsArray.push(x.argsArray[_]);P.operatorList.lastChunk=x.lastChunk,P.operatorList.separateAnnots=x.separateAnnots;for(const _ of P.renderTasks)_.operatorListChanged();x.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:x,cacheKey:P,annotationStorageMap:_}){const N=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:x,cacheKey:P,annotationStorage:_}).getReader(),ne=this._intentStates.get(P);ne.streamReader=N;const se=()=>{N.read().then(({value:we,done:Y})=>{if(Y){ne.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(we,ne),se())},we=>{if(ne.streamReader=null,!this._transport.destroyed){if(ne.operatorList){ne.operatorList.lastChunk=!0;for(const Y of ne.renderTasks)Y.operatorListChanged();this._tryCleanup()}if(ne.displayReadyCapability)ne.displayReadyCapability.reject(we);else if(ne.opListReadCapability)ne.opListReadCapability.reject(we);else throw we}})};se()}_abortOperatorList({intentState:x,reason:P,force:_=!1}){if(x.streamReader){if(x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null),!_){if(x.renderTasks.size>0)return;if(P instanceof _display_utils.RenderingCancelledException){let A=RENDERING_CANCELLED_TIMEOUT;P.extraDelay>0&&P.extraDelay<1e3&&(A+=P.extraDelay),x.streamReaderCancelTimeout=setTimeout(()=>{x.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:x,reason:P,force:!0})},A);return}}if(x.streamReader.cancel(new _util.AbortException(P.message)).catch(()=>{}),x.streamReader=null,!this._transport.destroyed){for(const[A,N]of this._intentStates)if(N===x){this._intentStates.delete(A);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){qe(this,B,new Set);qe(this,J,Promise.resolve())}postMessage(x,P){const _={data:structuredClone(x,P)};K(this,J).then(()=>{for(const A of K(this,B))A.call(this,_)})}addEventListener(x,P){K(this,B).add(P)}removeEventListener(x,P){K(this,B).delete(P)}terminate(){K(this,B).clear()}}B=new WeakMap,J=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const H=(y=document==null?void 0:document.currentScript)==null?void 0:y.src;H&&(PDFWorkerUtil.fallbackWorkerSrc=H.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(H,x){let P;try{if(P=new URL(H),!P.origin||P.origin==="null")return!1}catch{return!1}const _=new URL(x,P);return P.origin===_.origin},PDFWorkerUtil.createCDNWrapper=function(H){const x=`importScripts("${H}");`;return URL.createObjectURL(new Blob([x]))}}const _PDFWorker=class _PDFWorker{constructor({name:H=null,port:x=null,verbosity:P=(0,_util.getVerbosityLevel)()}={}){if(x&&K(_PDFWorker,ve).has(x))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=H,this.destroyed=!1,this.verbosity=P,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,x){K(_PDFWorker,ve).set(x,this),this._initializeFromPort(x);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(H){this._port=H,this._messageHandler=new _message_handler.MessageHandler("main","worker",H),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:H}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,H)||(H=PDFWorkerUtil.createCDNWrapper(new URL(H,window.location).href));const x=new Worker(H),P=new _message_handler.MessageHandler("main","worker",x),_=()=>{x.removeEventListener("error",A),P.destroy(),x.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},A=()=>{this._webWorker||_()};x.addEventListener("error",A),P.on("test",ne=>{if(x.removeEventListener("error",A),this.destroyed){_();return}ne?(this._messageHandler=P,this._port=x,this._webWorker=x,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),P.destroy(),x.terminate())}),P.on("ready",ne=>{if(x.removeEventListener("error",A),this.destroyed){_();return}try{N()}catch{this._setupFakeWorker()}});const N=()=>{const ne=new Uint8Array;P.send("test",ne,[ne.buffer])};N();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(H=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const x=new LoopbackPort;this._port=x;const P=`fake${PDFWorkerUtil.fakeWorkerId++}`,_=new _message_handler.MessageHandler(P+"_worker",P,x);H.setup(_,x);const A=new _message_handler.MessageHandler(P,P+"_worker",x);this._messageHandler=A,this._readyCapability.resolve(),A.send("configure",{verbosity:this.verbosity})}).catch(H=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${H.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),K(_PDFWorker,ve).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(H){if(!(H!=null&&H.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return K(this,ve).has(H.port)?K(this,ve).get(H.port):new _PDFWorker(H)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var H;try{return((H=globalThis.pdfjsWorker)==null?void 0:H.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};ve=new WeakMap,qe(_PDFWorker,ve,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(x,P,_,A,N){qe(this,$);qe(this,Ne,new Map);qe(this,ye,new Map);qe(this,Q,new Map);this.messageHandler=x,this.loadingTask=P,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:A.ownerDocument,styleElement:A.styleElement}),this._params=A,this.cMapReaderFactory=N==null?void 0:N.cMapReaderFactory,this.standardFontDataFactory=N==null?void 0:N.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=_,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(x,P=_util.AnnotationMode.ENABLE,_=null,A=!1){let N=_util.RenderingIntentFlag.DISPLAY,ne=null;switch(x){case"any":N=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":N=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${x}`)}switch(P){case _util.AnnotationMode.DISABLE:N+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:N+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:N+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,ne=(N&_util.RenderingIntentFlag.PRINT&&_ instanceof _annotation_storage.PrintAnnotationStorage?_:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${P}`)}return A&&(N+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:N,cacheKey:`${N}_${_annotation_storage.AnnotationStorage.getHash(ne)}`,annotationStorageMap:ne}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const x=[];for(const _ of K(this,ye).values())x.push(_._destroy());K(this,ye).clear(),K(this,Q).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const P=this.messageHandler.sendWithPromise("Terminate",null);return x.push(P),Promise.all(x).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),K(this,Ne).clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:x,loadingTask:P}=this;x.on("GetReader",(_,A)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=N=>{this._lastProgress={loaded:N.loaded,total:N.total}},A.onPull=()=>{this._fullReader.read().then(function({value:N,done:ne}){if(ne){A.close();return}(0,_util.assert)(N instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),A.enqueue(new Uint8Array(N),1,[N])}).catch(N=>{A.error(N)})},A.onCancel=N=>{this._fullReader.cancel(N),A.ready.catch(ne=>{if(!this.destroyed)throw ne})}}),x.on("ReaderHeadersReady",_=>{const A=(0,_util.createPromiseCapability)(),N=this._fullReader;return N.headersReady.then(()=>{var ne;(!N.isStreamingSupported||!N.isRangeSupported)&&(this._lastProgress&&((ne=P.onProgress)==null||ne.call(P,this._lastProgress)),N.onProgress=se=>{var we;(we=P.onProgress)==null||we.call(P,{loaded:se.loaded,total:se.total})}),A.resolve({isStreamingSupported:N.isStreamingSupported,isRangeSupported:N.isRangeSupported,contentLength:N.contentLength})},A.reject),A.promise}),x.on("GetRangeReader",(_,A)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const N=this._networkStream.getRangeReader(_.begin,_.end);if(!N){A.close();return}A.onPull=()=>{N.read().then(function({value:ne,done:se}){if(se){A.close();return}(0,_util.assert)(ne instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),A.enqueue(new Uint8Array(ne),1,[ne])}).catch(ne=>{A.error(ne)})},A.onCancel=ne=>{N.cancel(ne),A.ready.catch(se=>{if(!this.destroyed)throw se})}}),x.on("GetDoc",({pdfInfo:_})=>{this._numPages=_.numPages,this._htmlForXfa=_.htmlForXfa,delete _.htmlForXfa,P._capability.resolve(new PDFDocumentProxy(_,this))}),x.on("DocException",function(_){let A;switch(_.name){case"PasswordException":A=new _util.PasswordException(_.message,_.code);break;case"InvalidPDFException":A=new _util.InvalidPDFException(_.message);break;case"MissingPDFException":A=new _util.MissingPDFException(_.message);break;case"UnexpectedResponseException":A=new _util.UnexpectedResponseException(_.message,_.status);break;case"UnknownErrorException":A=new _util.UnknownErrorException(_.message,_.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}P._capability.reject(A)}),x.on("PasswordRequest",_=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),P.onPassword){const A=N=>{N instanceof Error?this._passwordCapability.reject(N):this._passwordCapability.resolve({password:N})};try{P.onPassword(A,_.code)}catch(N){this._passwordCapability.reject(N)}}else this._passwordCapability.reject(new _util.PasswordException(_.message,_.code));return this._passwordCapability.promise}),x.on("DataLoaded",_=>{var A;(A=P.onProgress)==null||A.call(P,{loaded:_.length,total:_.length}),this.downloadInfoCapability.resolve(_)}),x.on("StartRenderPage",_=>{if(this.destroyed)return;K(this,ye).get(_.pageIndex)._startRenderPage(_.transparency,_.cacheKey)}),x.on("commonobj",([_,A,N])=>{var ne;if(!this.destroyed&&!this.commonObjs.has(_))switch(A){case"Font":const se=this._params;if("error"in N){const Me=N.error;(0,_util.warn)(`Error during font loading: ${Me}`),this.commonObjs.resolve(_,Me);break}let we=null;se.pdfBug&&((ne=globalThis.FontInspector)!=null&&ne.enabled)&&(we={registerFont(Me,Je){globalThis.FontInspector.fontAdded(Me,Je)}});const Y=new _font_loader.FontFaceObject(N,{isEvalSupported:se.isEvalSupported,disableFontFace:se.disableFontFace,ignoreErrors:se.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:we});this.fontLoader.bind(Y).catch(Me=>x.sendWithPromise("FontFallback",{id:_})).finally(()=>{!se.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(_,Y)});break;case"FontPath":case"Image":this.commonObjs.resolve(_,N);break;default:throw new Error(`Got unknown common object type ${A}`)}}),x.on("obj",([_,A,N,ne])=>{var we;if(this.destroyed)return;const se=K(this,ye).get(A);if(!se.objs.has(_))switch(N){case"Image":se.objs.resolve(_,ne);const Y=8e6;if(ne){let Me;if(ne.bitmap){const{width:Je,height:ze}=ne;Me=Je*ze*4}else Me=((we=ne.data)==null?void 0:we.length)||0;Me>Y&&(se.cleanupAfterRender=!0)}break;case"Pattern":se.objs.resolve(_,ne);break;default:throw new Error(`Got unknown object type ${N}`)}}),x.on("DocProgress",_=>{var A;this.destroyed||(A=P.onProgress)==null||A.call(P,{loaded:_.loaded,total:_.total})}),x.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),x.on("FetchBuiltInCMap",_=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(_):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),x.on("FetchStandardFontData",_=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(_):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:x}){var P,_;this.destroyed||(_=(P=this.loadingTask).onUnsupportedFeature)==null||_.call(P,x)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var x;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((x=this._fullReader)==null?void 0:x.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(x){if(!Number.isInteger(x)||x<=0||x>this._numPages)return Promise.reject(new Error("Invalid page request."));const P=x-1,_=K(this,Q).get(P);if(_)return _;const A=this.messageHandler.sendWithPromise("GetPage",{pageIndex:P}).then(N=>{if(this.destroyed)throw new Error("Transport destroyed");const ne=new PDFPageProxy(P,N,this,this._params.ownerDocument,this._params.pdfBug);return K(this,ye).set(P,ne),ne});return K(this,Q).set(P,A),A}getPageIndex(x){return typeof x!="object"||x===null||!Number.isInteger(x.num)||x.num<0||!Number.isInteger(x.gen)||x.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:x.num,gen:x.gen})}getAnnotations(x,P){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:x,intent:P})}getFieldObjects(){return tt(this,$,Li).call(this,"GetFieldObjects")}hasJSActions(){return tt(this,$,Li).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(x){return typeof x!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:x})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(x){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:x})}getStructTree(x){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:x})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(x=>new _optional_content_config.OptionalContentConfig(x))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const x="GetMetadata",P=K(this,Ne).get(x);if(P)return P;const _=this.messageHandler.sendWithPromise(x,null).then(A=>{var N,ne;return{info:A[0],metadata:A[1]?new _metadata.Metadata(A[1]):null,contentDispositionFilename:((N=this._fullReader)==null?void 0:N.filename)??null,contentLength:((ne=this._fullReader)==null?void 0:ne.contentLength)??null}});return K(this,Ne).set(x,_),_}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(x=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const P of K(this,ye).values())if(!P.cleanup())throw new Error(`startCleanup: Page ${P.pageNumber} is currently rendering.`);this.commonObjs.clear(),x||this.fontLoader.clear(),K(this,Ne).clear()}}get loadingParams(){const{disableAutoFetch:x,enableXfa:P}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:x,enableXfa:P})}}Ne=new WeakMap,ye=new WeakMap,Q=new WeakMap,$=new WeakSet,Li=function(x,P=null){const _=K(this,Ne).get(x);if(_)return _;const A=this.messageHandler.sendWithPromise(x,P);return K(this,Ne).set(x,A),A};class PDFObjects{constructor(){qe(this,X);qe(this,te,Object.create(null))}get(x,P=null){if(P){const A=tt(this,X,Ii).call(this,x);return A.capability.promise.then(()=>P(A.data)),null}const _=K(this,te)[x];if(!(_!=null&&_.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${x}.`);return _.data}has(x){const P=K(this,te)[x];return(P==null?void 0:P.capability.settled)||!1}resolve(x,P=null){const _=tt(this,X,Ii).call(this,x);_.data=P,_.capability.resolve()}clear(){var x;for(const P in K(this,te)){const{data:_}=K(this,te)[P];(x=_==null?void 0:_.bitmap)==null||x.close()}pt(this,te,Object.create(null))}}te=new WeakMap,X=new WeakSet,Ii=function(x){const P=K(this,te)[x];return P||(K(this,te)[x]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(x){qe(this,V,null);pt(this,V,x),this.onContinue=null}get promise(){return K(this,V).capability.promise}cancel(x=0){K(this,V).cancel(null,x)}get separateAnnots(){const{separateAnnots:x}=K(this,V).operatorList;if(!x)return!1;const{annotationCanvasMap:P}=K(this,V);return x.form||x.canvas&&(P==null?void 0:P.size)>0}}V=new WeakMap,exports.RenderTask=RenderTask;const L=class L{constructor({callback:x,params:P,objs:_,commonObjs:A,annotationCanvasMap:N,operatorList:ne,pageIndex:se,canvasFactory:we,useRequestAnimationFrame:Y=!1,pdfBug:Me=!1,pageColors:Je=null}){this.callback=x,this.params=P,this.objs=_,this.commonObjs=A,this.annotationCanvasMap=N,this.operatorListIdx=null,this.operatorList=ne,this._pageIndex=se,this.canvasFactory=we,this._pdfBug=Me,this.pageColors=Je,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Y===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=P.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:x=!1,optionalContentConfig:P}){var se,we;if(this.cancelled)return;if(this._canvas){if(K(L,T).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");K(L,T).add(this._canvas)}this._pdfBug&&((se=globalThis.StepperManager)!=null&&se.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:_,viewport:A,transform:N,background:ne}=this.params;this.gfx=new _canvas.CanvasGraphics(_,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:P},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:N,viewport:A,transparency:x,background:ne}),this.operatorListIdx=0,this.graphicsReady=!0,(we=this.graphicsReadyCallback)==null||we.call(this)}cancel(x=null,P=0){var _;this.running=!1,this.cancelled=!0,(_=this.gfx)==null||_.endDrawing(),this._canvas&&K(L,T).delete(this._canvas),this.callback(x||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",P))}operatorListChanged(){var x;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(x=this.stepper)==null||x.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&K(L,T).delete(this._canvas),this.callback())))}};T=new WeakMap,qe(L,T,new WeakSet);let InternalRenderTask=L;const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build},(R,j,Pe)=>{var ye,Q,$,br,te;Object.defineProperty(j,"__esModule",{value:!0}),j.PrintAnnotationStorage=j.AnnotationStorage=void 0;var B=Pe(1),J=Pe(4),y=Pe(8);class ve{constructor(){qe(this,$);qe(this,ye,!1);qe(this,Q,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(U,V){const T=K(this,Q).get(U);return T===void 0?V:Object.assign(V,T)}getRawValue(U){return K(this,Q).get(U)}remove(U){if(K(this,Q).delete(U),K(this,Q).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const V of K(this,Q).values())if(V instanceof J.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(U,V){const T=K(this,Q).get(U);let L=!1;if(T!==void 0)for(const[H,x]of Object.entries(V))T[H]!==x&&(L=!0,T[H]=x);else L=!0,K(this,Q).set(U,V);L&&tt(this,$,br).call(this),V instanceof J.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(V.constructor._type)}has(U){return K(this,Q).has(U)}getAll(){return K(this,Q).size>0?(0,B.objectFromMap)(K(this,Q)):null}setAll(U){for(const[V,T]of Object.entries(U))this.setValue(V,T)}get size(){return K(this,Q).size}resetModified(){K(this,ye)&&(pt(this,ye,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ne(this)}get serializable(){if(K(this,Q).size===0)return null;const U=new Map;for(const[V,T]of K(this,Q)){const L=T instanceof J.AnnotationEditor?T.serialize():T;L&&U.set(V,L)}return U}static getHash(U){if(!U)return"";const V=new y.MurmurHash3_64;for(const[T,L]of U)V.update(`${T}:${JSON.stringify(L)}`);return V.hexdigest()}}ye=new WeakMap,Q=new WeakMap,$=new WeakSet,br=function(){K(this,ye)||(pt(this,ye,!0),typeof this.onSetModified=="function"&&this.onSetModified())},j.AnnotationStorage=ve;class Ne extends ve{constructor(V){super();qe(this,te,null);pt(this,te,structuredClone(V.serializable))}get print(){(0,B.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return K(this,te)}}te=new WeakMap,j.PrintAnnotationStorage=Ne},(R,j,Pe)=>{var ve,Ne,ye,Q,$,be;Object.defineProperty(j,"__esModule",{value:!0}),j.AnnotationEditor=void 0;var B=Pe(5),J=Pe(1);const te=class te{constructor(U){qe(this,ve,this.focusin.bind(this));qe(this,Ne,this.focusout.bind(this));qe(this,ye,!1);qe(this,Q,!1);qe(this,$,!1);pn(this,"_uiManager",null);qe(this,be,te._zIndex++);this.constructor===te&&(0,J.unreachable)("Cannot initialize AnnotationEditor."),this.parent=U.parent,this.id=U.id,this.width=this.height=null,this.pageIndex=U.parent.pageIndex,this.name=U.name,this.div=null,this._uiManager=U.uiManager;const{rotation:V,rawDims:{pageWidth:T,pageHeight:L,pageX:H,pageY:x}}=this.parent.viewport;this.rotation=V,this.pageDimensions=[T,L],this.pageTranslation=[H,x];const[P,_]=this.parentDimensions;this.x=U.x/P,this.y=U.y/_,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,J.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(U){this._uiManager.addCommands(U)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=K(this,be)}setParent(U){U!==null&&(this.pageIndex=U.pageIndex,this.pageDimensions=U.pageDimensions),this.parent=U}focusin(U){K(this,ye)?pt(this,ye,!1):this.parent.setSelected(this)}focusout(U){var T;if(!this.isAttachedToDOM)return;const V=U.relatedTarget;V!=null&&V.closest(`#${this.id}`)||(U.preventDefault(),(T=this.parent)!=null&&T.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(U){const V=this.parent.div.getBoundingClientRect();this.startX=U.clientX-V.x,this.startY=U.clientY-V.y,U.dataTransfer.setData("text/plain",this.id),U.dataTransfer.effectAllowed="move"}setAt(U,V,T,L){const[H,x]=this.parentDimensions;[T,L]=this.screenToPageTranslation(T,L),this.x=(U+T)/H,this.y=(V+L)/x,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(U,V){const[T,L]=this.parentDimensions;[U,V]=this.screenToPageTranslation(U,V),this.x+=U/T,this.y+=V/L,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(U,V){switch(this.parentRotation){case 90:return[V,-U];case 180:return[-U,-V];case 270:return[-V,U];default:return[U,V]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:U}=this._uiManager.viewParameters,[V,T]=this.pageDimensions;return[V*U,T*U]}setDims(U,V){const[T,L]=this.parentDimensions;this.div.style.width=`${100*U/T}%`,this.div.style.height=`${100*V/L}%`}fixDims(){const{style:U}=this.div,{height:V,width:T}=U,L=T.endsWith("%"),H=V.endsWith("%");if(L&&H)return;const[x,P]=this.parentDimensions;L||(U.width=`${100*parseFloat(T)/x}%`),H||(U.height=`${100*parseFloat(V)/P}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",K(this,ve)),this.div.addEventListener("focusout",K(this,Ne));const[U,V]=this.getInitialTranslation();return this.translate(U,V),(0,B.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(U){const{isMac:V}=J.FeatureTest.platform;if(U.button!==0||U.ctrlKey&&V){U.preventDefault();return}U.ctrlKey&&!V||U.shiftKey||U.metaKey&&V?this.parent.toggleSelected(this):this.parent.setSelected(this),pt(this,ye,!0)}getRect(U,V){const T=this.parentScale,[L,H]=this.pageDimensions,[x,P]=this.pageTranslation,_=U/T,A=V/T,N=this.x*L,ne=this.y*H,se=this.width*L,we=this.height*H;switch(this.rotation){case 0:return[N+_+x,H-ne-A-we+P,N+_+se+x,H-ne-A+P];case 90:return[N+A+x,H-ne+_+P,N+A+we+x,H-ne+_+se+P];case 180:return[N-_-se+x,H-ne+A+P,N-_+x,H-ne+A+we+P];case 270:return[N-A-we+x,H-ne-_-se+P,N-A+x,H-ne-_+P];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(U,V){const[T,L,H,x]=U,P=H-T,_=x-L;switch(this.rotation){case 0:return[T,V-x,P,_];case 90:return[T,V-L,_,P];case 180:return[H,V-L,P,_];case 270:return[H,V-x,_,P];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pt(this,$,!0)}disableEditMode(){pt(this,$,!1)}isInEditMode(){return K(this,$)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var U;(U=this.div)==null||U.addEventListener("focusin",K(this,ve))}serialize(){(0,J.unreachable)("An editor must be serializable")}static deserialize(U,V,T){const L=new this.prototype.constructor({parent:V,id:V.getNextId(),uiManager:T});L.rotation=U.rotation;const[H,x]=L.pageDimensions,[P,_,A,N]=L.getRectInCurrentCoords(U.rect,x);return L.x=P/H,L.y=_/x,L.width=A/H,L.height=N/x,L}remove(){this.div.removeEventListener("focusin",K(this,ve)),this.div.removeEventListener("focusout",K(this,Ne)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var U;(U=this.div)==null||U.classList.add("selectedEditor")}unselect(){var U;(U=this.div)==null||U.classList.remove("selectedEditor")}updateParams(U,V){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return K(this,Q)}set isEditing(U){pt(this,Q,U),U?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};ve=new WeakMap,Ne=new WeakMap,ye=new WeakMap,Q=new WeakMap,$=new WeakMap,be=new WeakMap,pn(te,"_colorManager",new B.ColorManager),pn(te,"_zIndex",1);let y=te;j.AnnotationEditor=y},(R,j,Pe)=>{var te,X,U,V,T,L,_r,P,_,A,N,ne,se,we,Y,Me,Je,ze,Ge,Le,Te,Re,$e,et,ce,D,F,ee,le,fe,Ae,yr,je,Ni,Ue,Ar,Be,Sr,G,Dn,he,ai,xe,Er,Qe,Cr,He,ji,st,oi,gt,Bi;Object.defineProperty(j,"__esModule",{value:!0}),j.KeyboardManager=j.CommandManager=j.ColorManager=j.AnnotationEditorUIManager=void 0,j.bindEvents=y,j.opacityToHex=ve;var B=Pe(1),J=Pe(6);function y(Rt,ue,ge){for(const Se of ge)ue.addEventListener(Se,Rt[Se].bind(Rt))}function ve(Rt){return Math.round(Math.min(255,Math.max(1,255*Rt))).toString(16).padStart(2,"0")}class Ne{constructor(){qe(this,te,0)}getId(){return`${B.AnnotationEditorPrefix}${Di(this,te)._++}`}}te=new WeakMap;class ye{constructor(ue=128){qe(this,X,[]);qe(this,U,!1);qe(this,V,void 0);qe(this,T,-1);pt(this,V,ue)}add({cmd:ue,undo:ge,mustExec:Se,type:nt=NaN,overwriteIfSameType:xt=!1,keepUndo:zt=!1}){if(Se&&ue(),K(this,U))return;const Ie={cmd:ue,undo:ge,type:nt};if(K(this,T)===-1){K(this,X).length>0&&(K(this,X).length=0),pt(this,T,0),K(this,X).push(Ie);return}if(xt&&K(this,X)[K(this,T)].type===nt){zt&&(Ie.undo=K(this,X)[K(this,T)].undo),K(this,X)[K(this,T)]=Ie;return}const it=K(this,T)+1;it===K(this,V)?K(this,X).splice(0,1):(pt(this,T,it),it<K(this,X).length&&K(this,X).splice(it)),K(this,X).push(Ie)}undo(){K(this,T)!==-1&&(pt(this,U,!0),K(this,X)[K(this,T)].undo(),pt(this,U,!1),pt(this,T,K(this,T)-1))}redo(){K(this,T)<K(this,X).length-1&&(pt(this,T,K(this,T)+1),pt(this,U,!0),K(this,X)[K(this,T)].cmd(),pt(this,U,!1))}hasSomethingToUndo(){return K(this,T)!==-1}hasSomethingToRedo(){return K(this,T)<K(this,X).length-1}destroy(){pt(this,X,null)}}X=new WeakMap,U=new WeakMap,V=new WeakMap,T=new WeakMap,j.CommandManager=ye;class Q{constructor(ue){qe(this,L);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ge}=B.FeatureTest.platform;for(const[Se,nt]of ue)for(const xt of Se){const zt=xt.startsWith("mac+");ge&&zt?(this.callbacks.set(xt.slice(4),nt),this.allKeys.add(xt.split("+").at(-1))):!ge&&!zt&&(this.callbacks.set(xt,nt),this.allKeys.add(xt.split("+").at(-1)))}}exec(ue,ge){if(!this.allKeys.has(ge.key))return;const Se=this.callbacks.get(tt(this,L,_r).call(this,ge));Se&&(Se.bind(ue)(),ge.stopPropagation(),ge.preventDefault())}}L=new WeakSet,_r=function(ue){ue.altKey&&this.buffer.push("alt"),ue.ctrlKey&&this.buffer.push("ctrl"),ue.metaKey&&this.buffer.push("meta"),ue.shiftKey&&this.buffer.push("shift"),this.buffer.push(ue.key);const ge=this.buffer.join("+");return this.buffer.length=0,ge},j.KeyboardManager=Q;const x=class x{get _colors(){const ue=new Map([["CanvasText",null],["Canvas",null]]);return(0,J.getColorValues)(ue),(0,B.shadow)(this,"_colors",ue)}convert(ue){const ge=(0,J.getRGB)(ue);if(!window.matchMedia("(forced-colors: active)").matches)return ge;for(const[Se,nt]of this._colors)if(nt.every((xt,zt)=>xt===ge[zt]))return x._colorsMapping.get(Se);return ge}getHexCode(ue){const ge=this._colors.get(ue);return ge?B.Util.makeHexColor(...ge):ue}};pn(x,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let $=x;j.ColorManager=$;const Dt=class Dt{constructor(ue,ge,Se){qe(this,Ae);qe(this,je);qe(this,Ue);qe(this,Be);qe(this,G);qe(this,he);qe(this,xe);qe(this,Qe);qe(this,He);qe(this,st);qe(this,gt);qe(this,P,null);qe(this,_,new Map);qe(this,A,new Map);qe(this,N,null);qe(this,ne,new ye);qe(this,se,0);qe(this,we,null);qe(this,Y,new Set);qe(this,Me,null);qe(this,Je,new Ne);qe(this,ze,!1);qe(this,Ge,B.AnnotationEditorType.NONE);qe(this,Le,new Set);qe(this,Te,this.copy.bind(this));qe(this,Re,this.cut.bind(this));qe(this,$e,this.paste.bind(this));qe(this,et,this.keydown.bind(this));qe(this,ce,this.onEditingAction.bind(this));qe(this,D,this.onPageChanging.bind(this));qe(this,F,this.onScaleChanging.bind(this));qe(this,ee,this.onRotationChanging.bind(this));qe(this,le,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});qe(this,fe,null);pt(this,fe,ue),pt(this,Me,ge),K(this,Me)._on("editingaction",K(this,ce)),K(this,Me)._on("pagechanging",K(this,D)),K(this,Me)._on("scalechanging",K(this,F)),K(this,Me)._on("rotationchanging",K(this,ee)),pt(this,N,Se),this.viewParameters={realScale:J.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){tt(this,je,Ni).call(this),K(this,Me)._off("editingaction",K(this,ce)),K(this,Me)._off("pagechanging",K(this,D)),K(this,Me)._off("scalechanging",K(this,F)),K(this,Me)._off("rotationchanging",K(this,ee));for(const ue of K(this,A).values())ue.destroy();K(this,A).clear(),K(this,_).clear(),K(this,Y).clear(),pt(this,P,null),K(this,Le).clear(),K(this,ne).destroy()}onPageChanging({pageNumber:ue}){pt(this,se,ue-1)}focusMainContainer(){K(this,fe).focus()}addShouldRescale(ue){K(this,Y).add(ue)}removeShouldRescale(ue){K(this,Y).delete(ue)}onScaleChanging({scale:ue}){this.commitOrRemove(),this.viewParameters.realScale=ue*J.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ge of K(this,Y))ge.onScaleChanging()}onRotationChanging({pagesRotation:ue}){this.commitOrRemove(),this.viewParameters.rotation=ue}addToAnnotationStorage(ue){!ue.isEmpty()&&K(this,N)&&!K(this,N).has(ue.id)&&K(this,N).setValue(ue.id,ue)}copy(ue){if(ue.preventDefault(),K(this,P)&&K(this,P).commitOrRemove(),!this.hasSelection)return;const ge=[];for(const Se of K(this,Le))Se.isEmpty()||ge.push(Se.serialize());ge.length!==0&&ue.clipboardData.setData("application/pdfjs",JSON.stringify(ge))}cut(ue){this.copy(ue),this.delete()}paste(ue){ue.preventDefault();let ge=ue.clipboardData.getData("application/pdfjs");if(!ge)return;try{ge=JSON.parse(ge)}catch(nt){(0,B.warn)(`paste: "${nt.message}".`);return}if(!Array.isArray(ge))return;this.unselectAll();const Se=K(this,A).get(K(this,se));try{const nt=[];for(const Ie of ge){const it=Se.deserialize(Ie);if(!it)return;nt.push(it)}const xt=()=>{for(const Ie of nt)tt(this,He,ji).call(this,Ie);tt(this,gt,Bi).call(this,nt)},zt=()=>{for(const Ie of nt)Ie.remove()};this.addCommands({cmd:xt,undo:zt,mustExec:!0})}catch(nt){(0,B.warn)(`paste: "${nt.message}".`)}}keydown(ue){var ge;(ge=this.getActive())!=null&&ge.shouldGetKeyboardEvents()||Dt._keyboardManager.exec(this,ue)}onEditingAction(ue){["undo","redo","delete","selectAll"].includes(ue.name)&&this[ue.name]()}setEditingState(ue){ue?(tt(this,Ae,yr).call(this),tt(this,Ue,Ar).call(this),tt(this,G,Dn).call(this,{isEditing:K(this,Ge)!==B.AnnotationEditorType.NONE,isEmpty:tt(this,st,oi).call(this),hasSomethingToUndo:K(this,ne).hasSomethingToUndo(),hasSomethingToRedo:K(this,ne).hasSomethingToRedo(),hasSelectedEditor:!1})):(tt(this,je,Ni).call(this),tt(this,Be,Sr).call(this),tt(this,G,Dn).call(this,{isEditing:!1}))}registerEditorTypes(ue){if(!K(this,we)){pt(this,we,ue);for(const ge of K(this,we))tt(this,he,ai).call(this,ge.defaultPropertiesToUpdate)}}getId(){return K(this,Je).getId()}get currentLayer(){return K(this,A).get(K(this,se))}get currentPageIndex(){return K(this,se)}addLayer(ue){K(this,A).set(ue.pageIndex,ue),K(this,ze)?ue.enable():ue.disable()}removeLayer(ue){K(this,A).delete(ue.pageIndex)}updateMode(ue){if(pt(this,Ge,ue),ue===B.AnnotationEditorType.NONE)this.setEditingState(!1),tt(this,Qe,Cr).call(this);else{this.setEditingState(!0),tt(this,xe,Er).call(this);for(const ge of K(this,A).values())ge.updateMode(ue)}}updateToolbar(ue){ue!==K(this,Ge)&&K(this,Me).dispatch("switchannotationeditormode",{source:this,mode:ue})}updateParams(ue,ge){if(K(this,we)){for(const Se of K(this,Le))Se.updateParams(ue,ge);for(const Se of K(this,we))Se.updateDefaultParams(ue,ge)}}getEditors(ue){const ge=[];for(const Se of K(this,_).values())Se.pageIndex===ue&&ge.push(Se);return ge}getEditor(ue){return K(this,_).get(ue)}addEditor(ue){K(this,_).set(ue.id,ue)}removeEditor(ue){var ge;K(this,_).delete(ue.id),this.unselect(ue),(ge=K(this,N))==null||ge.remove(ue.id)}setActiveEditor(ue){K(this,P)!==ue&&(pt(this,P,ue),ue&&tt(this,he,ai).call(this,ue.propertiesToUpdate))}toggleSelected(ue){if(K(this,Le).has(ue)){K(this,Le).delete(ue),ue.unselect(),tt(this,G,Dn).call(this,{hasSelectedEditor:this.hasSelection});return}K(this,Le).add(ue),ue.select(),tt(this,he,ai).call(this,ue.propertiesToUpdate),tt(this,G,Dn).call(this,{hasSelectedEditor:!0})}setSelected(ue){for(const ge of K(this,Le))ge!==ue&&ge.unselect();K(this,Le).clear(),K(this,Le).add(ue),ue.select(),tt(this,he,ai).call(this,ue.propertiesToUpdate),tt(this,G,Dn).call(this,{hasSelectedEditor:!0})}isSelected(ue){return K(this,Le).has(ue)}unselect(ue){ue.unselect(),K(this,Le).delete(ue),tt(this,G,Dn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return K(this,Le).size!==0}undo(){K(this,ne).undo(),tt(this,G,Dn).call(this,{hasSomethingToUndo:K(this,ne).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:tt(this,st,oi).call(this)})}redo(){K(this,ne).redo(),tt(this,G,Dn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:K(this,ne).hasSomethingToRedo(),isEmpty:tt(this,st,oi).call(this)})}addCommands(ue){K(this,ne).add(ue),tt(this,G,Dn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:tt(this,st,oi).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ue=[...K(this,Le)],ge=()=>{for(const nt of ue)nt.remove()},Se=()=>{for(const nt of ue)tt(this,He,ji).call(this,nt)};this.addCommands({cmd:ge,undo:Se,mustExec:!0})}commitOrRemove(){var ue;(ue=K(this,P))==null||ue.commitOrRemove()}selectAll(){for(const ue of K(this,Le))ue.commit();tt(this,gt,Bi).call(this,K(this,_).values())}unselectAll(){if(K(this,P)){K(this,P).commitOrRemove();return}if(K(this,Le).size!==0){for(const ue of K(this,Le))ue.unselect();K(this,Le).clear(),tt(this,G,Dn).call(this,{hasSelectedEditor:!1})}}isActive(ue){return K(this,P)===ue}getActive(){return K(this,P)}getMode(){return K(this,Ge)}};P=new WeakMap,_=new WeakMap,A=new WeakMap,N=new WeakMap,ne=new WeakMap,se=new WeakMap,we=new WeakMap,Y=new WeakMap,Me=new WeakMap,Je=new WeakMap,ze=new WeakMap,Ge=new WeakMap,Le=new WeakMap,Te=new WeakMap,Re=new WeakMap,$e=new WeakMap,et=new WeakMap,ce=new WeakMap,D=new WeakMap,F=new WeakMap,ee=new WeakMap,le=new WeakMap,fe=new WeakMap,Ae=new WeakSet,yr=function(){K(this,fe).addEventListener("keydown",K(this,et))},je=new WeakSet,Ni=function(){K(this,fe).removeEventListener("keydown",K(this,et))},Ue=new WeakSet,Ar=function(){document.addEventListener("copy",K(this,Te)),document.addEventListener("cut",K(this,Re)),document.addEventListener("paste",K(this,$e))},Be=new WeakSet,Sr=function(){document.removeEventListener("copy",K(this,Te)),document.removeEventListener("cut",K(this,Re)),document.removeEventListener("paste",K(this,$e))},G=new WeakSet,Dn=function(ue){Object.entries(ue).some(([Se,nt])=>K(this,le)[Se]!==nt)&&K(this,Me).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(K(this,le),ue)})},he=new WeakSet,ai=function(ue){K(this,Me).dispatch("annotationeditorparamschanged",{source:this,details:ue})},xe=new WeakSet,Er=function(){if(!K(this,ze)){pt(this,ze,!0);for(const ue of K(this,A).values())ue.enable()}},Qe=new WeakSet,Cr=function(){if(this.unselectAll(),K(this,ze)){pt(this,ze,!1);for(const ue of K(this,A).values())ue.disable()}},He=new WeakSet,ji=function(ue){const ge=K(this,A).get(ue.pageIndex);ge?ge.addOrRebuild(ue):this.addEditor(ue)},st=new WeakSet,oi=function(){if(K(this,_).size===0)return!0;if(K(this,_).size===1)for(const ue of K(this,_).values())return ue.isEmpty();return!1},gt=new WeakSet,Bi=function(ue){K(this,Le).clear();for(const ge of ue)ge.isEmpty()||(K(this,Le).add(ge),ge.select());tt(this,G,Dn).call(this,{hasSelectedEditor:!0})},pn(Dt,"_keyboardManager",new Q([[["ctrl+a","mac+meta+a"],Dt.prototype.selectAll],[["ctrl+z","mac+meta+z"],Dt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Dt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Dt.prototype.delete],[["Escape","mac+Escape"],Dt.prototype.unselectAll]]));let be=Dt;j.AnnotationEditorUIManager=be},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.StatTimer=j.RenderingCancelledException=j.PixelsPerInch=j.PageViewport=j.PDFDateString=j.DOMStandardFontDataFactory=j.DOMSVGFactory=j.DOMCanvasFactory=j.DOMCMapReaderFactory=j.AnnotationPrefix=void 0,j.deprecated=A,j.getColorValues=Y,j.getCurrentTransform=Me,j.getCurrentTransformInverse=Je,j.getFilenameFromUrl=L,j.getPdfFilenameFromUrl=H,j.getRGB=we,j.getXfaPageViewport=se,j.isDataScheme=V,j.isPdfFile=T,j.isValidFetchUrl=P,j.loadScript=_,j.setLayerDimensions=ze;var B=Pe(7),J=Pe(1);const y="http://www.w3.org/2000/svg",ve="pdfjs_internal_id_";j.AnnotationPrefix=ve;const Ge=class Ge{};pn(Ge,"CSS",96),pn(Ge,"PDF",72),pn(Ge,"PDF_TO_CSS_UNITS",Ge.CSS/Ge.PDF);let Ne=Ge;j.PixelsPerInch=Ne;class ye extends B.BaseCanvasFactory{constructor({ownerDocument:Te=globalThis.document}={}){super(),this._document=Te}_createCanvas(Te,Re){const $e=this._document.createElement("canvas");return $e.width=Te,$e.height=Re,$e}}j.DOMCanvasFactory=ye;async function Q(Le,Te=!1){if(P(Le,document.baseURI)){const Re=await fetch(Le);if(!Re.ok)throw new Error(Re.statusText);return Te?new Uint8Array(await Re.arrayBuffer()):(0,J.stringToBytes)(await Re.text())}return new Promise((Re,$e)=>{const et=new XMLHttpRequest;et.open("GET",Le,!0),Te&&(et.responseType="arraybuffer"),et.onreadystatechange=()=>{if(et.readyState===XMLHttpRequest.DONE){if(et.status===200||et.status===0){let ce;if(Te&&et.response?ce=new Uint8Array(et.response):!Te&&et.responseText&&(ce=(0,J.stringToBytes)(et.responseText)),ce){Re(ce);return}}$e(new Error(et.statusText))}},et.send(null)})}class $ extends B.BaseCMapReaderFactory{_fetchData(Te,Re){return Q(Te,this.isCompressed).then($e=>({cMapData:$e,compressionType:Re}))}}j.DOMCMapReaderFactory=$;class be extends B.BaseStandardFontDataFactory{_fetchData(Te){return Q(Te,!0)}}j.DOMStandardFontDataFactory=be;class te extends B.BaseSVGFactory{_createSVG(Te){return document.createElementNS(y,Te)}}j.DOMSVGFactory=te;class X{constructor({viewBox:Te,scale:Re,rotation:$e,offsetX:et=0,offsetY:ce=0,dontFlip:D=!1}){this.viewBox=Te,this.scale=Re,this.rotation=$e,this.offsetX=et,this.offsetY=ce;const F=(Te[2]+Te[0])/2,ee=(Te[3]+Te[1])/2;let le,fe,Ae,Ce;switch($e%=360,$e<0&&($e+=360),$e){case 180:le=-1,fe=0,Ae=0,Ce=1;break;case 90:le=0,fe=1,Ae=1,Ce=0;break;case 270:le=0,fe=-1,Ae=-1,Ce=0;break;case 0:le=1,fe=0,Ae=0,Ce=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}D&&(Ae=-Ae,Ce=-Ce);let je,Xe,Ue,We;le===0?(je=Math.abs(ee-Te[1])*Re+et,Xe=Math.abs(F-Te[0])*Re+ce,Ue=(Te[3]-Te[1])*Re,We=(Te[2]-Te[0])*Re):(je=Math.abs(F-Te[0])*Re+et,Xe=Math.abs(ee-Te[1])*Re+ce,Ue=(Te[2]-Te[0])*Re,We=(Te[3]-Te[1])*Re),this.transform=[le*Re,fe*Re,Ae*Re,Ce*Re,je-le*Re*F-Ae*Re*ee,Xe-fe*Re*F-Ce*Re*ee],this.width=Ue,this.height=We}get rawDims(){const{viewBox:Te}=this;return(0,J.shadow)(this,"rawDims",{pageWidth:Te[2]-Te[0],pageHeight:Te[3]-Te[1],pageX:Te[0],pageY:Te[1]})}clone({scale:Te=this.scale,rotation:Re=this.rotation,offsetX:$e=this.offsetX,offsetY:et=this.offsetY,dontFlip:ce=!1}={}){return new X({viewBox:this.viewBox.slice(),scale:Te,rotation:Re,offsetX:$e,offsetY:et,dontFlip:ce})}convertToViewportPoint(Te,Re){return J.Util.applyTransform([Te,Re],this.transform)}convertToViewportRectangle(Te){const Re=J.Util.applyTransform([Te[0],Te[1]],this.transform),$e=J.Util.applyTransform([Te[2],Te[3]],this.transform);return[Re[0],Re[1],$e[0],$e[1]]}convertToPdfPoint(Te,Re){return J.Util.applyInverseTransform([Te,Re],this.transform)}}j.PageViewport=X;class U extends J.BaseException{constructor(Te,Re,$e=0){super(Te,"RenderingCancelledException"),this.type=Re,this.extraDelay=$e}}j.RenderingCancelledException=U;function V(Le){const Te=Le.length;let Re=0;for(;Re<Te&&Le[Re].trim()==="";)Re++;return Le.substring(Re,Re+5).toLowerCase()==="data:"}function T(Le){return typeof Le=="string"&&/\.pdf$/i.test(Le)}function L(Le,Te=!1){return Te||([Le]=Le.split(/[#?]/,1)),Le.substring(Le.lastIndexOf("/")+1)}function H(Le,Te="document.pdf"){if(typeof Le!="string")return Te;if(V(Le))return(0,J.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Te;const Re=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,$e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,et=Re.exec(Le);let ce=$e.exec(et[1])||$e.exec(et[2])||$e.exec(et[3]);if(ce&&(ce=ce[0],ce.includes("%")))try{ce=$e.exec(decodeURIComponent(ce))[0]}catch{}return ce||Te}class x{constructor(){pn(this,"started",Object.create(null));pn(this,"times",[])}time(Te){Te in this.started&&(0,J.warn)(`Timer is already running for ${Te}`),this.started[Te]=Date.now()}timeEnd(Te){Te in this.started||(0,J.warn)(`Timer has not been started for ${Te}`),this.times.push({name:Te,start:this.started[Te],end:Date.now()}),delete this.started[Te]}toString(){const Te=[];let Re=0;for(const{name:$e}of this.times)Re=Math.max($e.length,Re);for(const{name:$e,start:et,end:ce}of this.times)Te.push(`${$e.padEnd(Re)} ${ce-et}ms
`);return Te.join("")}}j.StatTimer=x;function P(Le,Te){try{const{protocol:Re}=Te?new URL(Le,Te):new URL(Le);return Re==="http:"||Re==="https:"}catch{return!1}}function _(Le,Te=!1){return new Promise((Re,$e)=>{const et=document.createElement("script");et.src=Le,et.onload=function(ce){Te&&et.remove(),Re(ce)},et.onerror=function(){$e(new Error(`Cannot load script at: ${et.src}`))},(document.head||document.documentElement).append(et)})}function A(Le){console.log("Deprecated API usage: "+Le)}let N;class ne{static toDateObject(Te){if(!Te||typeof Te!="string")return null;N||(N=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Re=N.exec(Te);if(!Re)return null;const $e=parseInt(Re[1],10);let et=parseInt(Re[2],10);et=et>=1&&et<=12?et-1:0;let ce=parseInt(Re[3],10);ce=ce>=1&&ce<=31?ce:1;let D=parseInt(Re[4],10);D=D>=0&&D<=23?D:0;let F=parseInt(Re[5],10);F=F>=0&&F<=59?F:0;let ee=parseInt(Re[6],10);ee=ee>=0&&ee<=59?ee:0;const le=Re[7]||"Z";let fe=parseInt(Re[8],10);fe=fe>=0&&fe<=23?fe:0;let Ae=parseInt(Re[9],10)||0;return Ae=Ae>=0&&Ae<=59?Ae:0,le==="-"?(D+=fe,F+=Ae):le==="+"&&(D-=fe,F-=Ae),new Date(Date.UTC($e,et,ce,D,F,ee))}}j.PDFDateString=ne;function se(Le,{scale:Te=1,rotation:Re=0}){const{width:$e,height:et}=Le.attributes.style,ce=[0,0,parseInt($e),parseInt(et)];return new X({viewBox:ce,scale:Te,rotation:Re})}function we(Le){if(Le.startsWith("#")){const Te=parseInt(Le.slice(1),16);return[(Te&16711680)>>16,(Te&65280)>>8,Te&255]}return Le.startsWith("rgb(")?Le.slice(4,-1).split(",").map(Te=>parseInt(Te)):Le.startsWith("rgba(")?Le.slice(5,-1).split(",").map(Te=>parseInt(Te)).slice(0,3):((0,J.warn)(`Not a valid color format: "${Le}"`),[0,0,0])}function Y(Le){const Te=document.createElement("span");Te.style.visibility="hidden",document.body.append(Te);for(const Re of Le.keys()){Te.style.color=Re;const $e=window.getComputedStyle(Te).color;Le.set(Re,we($e))}Te.remove()}function Me(Le){const{a:Te,b:Re,c:$e,d:et,e:ce,f:D}=Le.getTransform();return[Te,Re,$e,et,ce,D]}function Je(Le){const{a:Te,b:Re,c:$e,d:et,e:ce,f:D}=Le.getTransform().invertSelf();return[Te,Re,$e,et,ce,D]}function ze(Le,Te,Re=!1,$e=!0){if(Te instanceof X){const{pageWidth:et,pageHeight:ce}=Te.rawDims,{style:D}=Le,F=`calc(var(--scale-factor) * ${et}px)`,ee=`calc(var(--scale-factor) * ${ce}px)`;!Re||Te.rotation%180===0?(D.width=F,D.height=ee):(D.width=ee,D.height=F)}$e&&Le.setAttribute("data-main-rotation",Te.rotation)}},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.BaseStandardFontDataFactory=j.BaseSVGFactory=j.BaseCanvasFactory=j.BaseCMapReaderFactory=void 0;var B=Pe(1);class J{constructor(){this.constructor===J&&(0,B.unreachable)("Cannot initialize BaseCanvasFactory.")}create(Q,$){if(Q<=0||$<=0)throw new Error("Invalid canvas size");const be=this._createCanvas(Q,$);return{canvas:be,context:be.getContext("2d")}}reset(Q,$,be){if(!Q.canvas)throw new Error("Canvas is not specified");if($<=0||be<=0)throw new Error("Invalid canvas size");Q.canvas.width=$,Q.canvas.height=be}destroy(Q){if(!Q.canvas)throw new Error("Canvas is not specified");Q.canvas.width=0,Q.canvas.height=0,Q.canvas=null,Q.context=null}_createCanvas(Q,$){(0,B.unreachable)("Abstract method `_createCanvas` called.")}}j.BaseCanvasFactory=J;class y{constructor({baseUrl:Q=null,isCompressed:$=!0}){this.constructor===y&&(0,B.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=Q,this.isCompressed=$}async fetch({name:Q}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!Q)throw new Error("CMap name must be specified.");const $=this.baseUrl+Q+(this.isCompressed?".bcmap":""),be=this.isCompressed?B.CMapCompressionType.BINARY:B.CMapCompressionType.NONE;return this._fetchData($,be).catch(te=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${$}`)})}_fetchData(Q,$){(0,B.unreachable)("Abstract method `_fetchData` called.")}}j.BaseCMapReaderFactory=y;class ve{constructor({baseUrl:Q=null}){this.constructor===ve&&(0,B.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=Q}async fetch({filename:Q}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!Q)throw new Error("Font filename must be specified.");const $=`${this.baseUrl}${Q}`;return this._fetchData($).catch(be=>{throw new Error(`Unable to load font data at: ${$}`)})}_fetchData(Q){(0,B.unreachable)("Abstract method `_fetchData` called.")}}j.BaseStandardFontDataFactory=ve;class Ne{constructor(){this.constructor===Ne&&(0,B.unreachable)("Cannot initialize BaseSVGFactory.")}create(Q,$,be=!1){if(Q<=0||$<=0)throw new Error("Invalid SVG dimensions");const te=this._createSVG("svg:svg");return te.setAttribute("version","1.1"),be||(te.setAttribute("width",`${Q}px`),te.setAttribute("height",`${$}px`)),te.setAttribute("preserveAspectRatio","none"),te.setAttribute("viewBox",`0 0 ${Q} ${$}`),te}createElement(Q){if(typeof Q!="string")throw new Error("Invalid SVG element type");return this._createSVG(Q)}_createSVG(Q){(0,B.unreachable)("Abstract method `_createSVG` called.")}}j.BaseSVGFactory=Ne},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.MurmurHash3_64=void 0;var B=Pe(1);const J=3285377520,y=4294901760,ve=65535;class Ne{constructor(Q){this.h1=Q?Q&4294967295:J,this.h2=Q?Q&4294967295:J}update(Q){let $,be;if(typeof Q=="string"){$=new Uint8Array(Q.length*2),be=0;for(let N=0,ne=Q.length;N<ne;N++){const se=Q.charCodeAt(N);se<=255?$[be++]=se:($[be++]=se>>>8,$[be++]=se&255)}}else if((0,B.isArrayBuffer)(Q))$=Q.slice(),be=$.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const te=be>>2,X=be-te*4,U=new Uint32Array($.buffer,0,te);let V=0,T=0,L=this.h1,H=this.h2;const x=3432918353,P=461845907,_=x&ve,A=P&ve;for(let N=0;N<te;N++)N&1?(V=U[N],V=V*x&y|V*_&ve,V=V<<15|V>>>17,V=V*P&y|V*A&ve,L^=V,L=L<<13|L>>>19,L=L*5+3864292196):(T=U[N],T=T*x&y|T*_&ve,T=T<<15|T>>>17,T=T*P&y|T*A&ve,H^=T,H=H<<13|H>>>19,H=H*5+3864292196);switch(V=0,X){case 3:V^=$[te*4+2]<<16;case 2:V^=$[te*4+1]<<8;case 1:V^=$[te*4],V=V*x&y|V*_&ve,V=V<<15|V>>>17,V=V*P&y|V*A&ve,te&1?L^=V:H^=V}this.h1=L,this.h2=H}hexdigest(){let Q=this.h1,$=this.h2;return Q^=$>>>1,Q=Q*3981806797&y|Q*36045&ve,$=$*4283543511&y|(($<<16|Q>>>16)*2950163797&y)>>>16,Q^=$>>>1,Q=Q*444984403&y|Q*60499&ve,$=$*3301882366&y|(($<<16|Q>>>16)*3120437893&y)>>>16,Q^=$>>>1,(Q>>>0).toString(16).padStart(8,"0")+($>>>0).toString(16).padStart(8,"0")}}j.MurmurHash3_64=Ne},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.FontLoader=j.FontFaceObject=void 0;var B=Pe(1),J=Pe(10);class y{constructor({onUnsupportedFeature:ye,ownerDocument:Q=globalThis.document,styleElement:$=null}){this._onUnsupportedFeature=ye,this._document=Q,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ye){this.nativeFontFaces.push(ye),this._document.fonts.add(ye)}insertRule(ye){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Q=this.styleElement.sheet;Q.insertRule(ye,Q.cssRules.length)}clear(){for(const ye of this.nativeFontFaces)this._document.fonts.delete(ye);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(ye){if(ye.attached||ye.missingFile)return;if(ye.attached=!0,this.isFontLoadingAPISupported){const $=ye.createNativeFontFace();if($){this.addNativeFontFace($);try{await $.loaded}catch(be){throw this._onUnsupportedFeature({featureId:B.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,B.warn)(`Failed to load font '${$.family}': '${be}'.`),ye.disableFontFace=!0,be}}return}const Q=ye.createFontFaceRule();if(Q){if(this.insertRule(Q),this.isSyncFontLoadingSupported)return;await new Promise($=>{const be=this._queueLoadingCallback($);this._prepareFontLoadEvent(ye,be)})}}get isFontLoadingAPISupported(){var Q;const ye=!!((Q=this._document)!=null&&Q.fonts);return(0,B.shadow)(this,"isFontLoadingAPISupported",ye)}get isSyncFontLoadingSupported(){let ye=!1;return(J.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ye=!0),(0,B.shadow)(this,"isSyncFontLoadingSupported",ye)}_queueLoadingCallback(ye){function Q(){for((0,B.assert)(!be.done,"completeRequest() cannot be called twice."),be.done=!0;$.length>0&&$[0].done;){const te=$.shift();setTimeout(te.callback,0)}}const{loadingRequests:$}=this,be={done:!1,complete:Q,callback:ye};return $.push(be),be}get _loadTestFont(){const ye=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,B.shadow)(this,"_loadTestFont",ye)}_prepareFontLoadEvent(ye,Q){function $(Y,Me){return Y.charCodeAt(Me)<<24|Y.charCodeAt(Me+1)<<16|Y.charCodeAt(Me+2)<<8|Y.charCodeAt(Me+3)&255}function be(Y,Me,Je,ze){const Ge=Y.substring(0,Me),Le=Y.substring(Me+Je);return Ge+ze+Le}let te,X;const U=this._document.createElement("canvas");U.width=1,U.height=1;const V=U.getContext("2d");let T=0;function L(Y,Me){if(++T>30){(0,B.warn)("Load test font never loaded."),Me();return}if(V.font="30px "+Y,V.fillText(".",0,20),V.getImageData(0,0,1,1).data[3]>0){Me();return}setTimeout(L.bind(null,Y,Me))}const H=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=be(x,976,H.length,H);const _=16,A=1482184792;let N=$(x,_);for(te=0,X=H.length-3;te<X;te+=4)N=N-A+$(H,te)|0;te<H.length&&(N=N-A+$(H+"XXX",te)|0),x=be(x,_,4,(0,B.string32)(N));const ne=`url(data:font/opentype;base64,${btoa(x)});`,se=`@font-face {font-family:"${H}";src:${ne}}`;this.insertRule(se);const we=this._document.createElement("div");we.style.visibility="hidden",we.style.width=we.style.height="10px",we.style.position="absolute",we.style.top=we.style.left="0px";for(const Y of[ye.loadedName,H]){const Me=this._document.createElement("span");Me.textContent="Hi",Me.style.fontFamily=Y,we.append(Me)}this._document.body.append(we),L(H,()=>{we.remove(),Q.complete()})}}j.FontLoader=y;class ve{constructor(ye,{isEvalSupported:Q=!0,disableFontFace:$=!1,ignoreErrors:be=!1,onUnsupportedFeature:te,fontRegistry:X=null}){this.compiledGlyphs=Object.create(null);for(const U in ye)this[U]=ye[U];this.isEvalSupported=Q!==!1,this.disableFontFace=$===!0,this.ignoreErrors=be===!0,this._onUnsupportedFeature=te,this.fontRegistry=X}createNativeFontFace(){var Q;if(!this.data||this.disableFontFace)return null;let ye;if(!this.cssFontInfo)ye=new FontFace(this.loadedName,this.data,{});else{const $={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&($.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ye=new FontFace(this.cssFontInfo.fontFamily,this.data,$)}return(Q=this.fontRegistry)==null||Q.registerFont(this),ye}createFontFaceRule(){var be;if(!this.data||this.disableFontFace)return null;const ye=(0,B.bytesToString)(this.data),Q=`url(data:${this.mimetype};base64,${btoa(ye)});`;let $;if(!this.cssFontInfo)$=`@font-face {font-family:"${this.loadedName}";src:${Q}}`;else{let te=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(te+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),$=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${te}src:${Q}}`}return(be=this.fontRegistry)==null||be.registerFont(this,Q),$}getPathGenerator(ye,Q){if(this.compiledGlyphs[Q]!==void 0)return this.compiledGlyphs[Q];let $;try{$=ye.get(this.loadedName+"_path_"+Q)}catch(be){if(!this.ignoreErrors)throw be;return this._onUnsupportedFeature({featureId:B.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,B.warn)(`getPathGenerator - ignoring character: "${be}".`),this.compiledGlyphs[Q]=function(te,X){}}if(this.isEvalSupported&&B.FeatureTest.isEvalSupported){const be=[];for(const te of $){const X=te.args!==void 0?te.args.join(","):"";be.push("c.",te.cmd,"(",X,`);
`)}return this.compiledGlyphs[Q]=new Function("c","size",be.join(""))}return this.compiledGlyphs[Q]=function(be,te){for(const X of $)X.cmd==="scale"&&(X.args=[te,-te]),be[X.cmd].apply(be,X.args)}}}j.FontFaceObject=ve},(R,j)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.isNodeJS=void 0;const Pe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");j.isNodeJS=Pe},(R,j,Pe)=>{var Re,Ui;Object.defineProperty(j,"__esModule",{value:!0}),j.CanvasGraphics=void 0;var B=Pe(1),J=Pe(6),y=Pe(12),ve=Pe(13);const Ne=16,ye=100,Q=4096,$=15,be=10,te=1e3,X=16;function U(ce,D){if(ce._removeMirroring)throw new Error("Context is already forwarding operations.");ce.__originalSave=ce.save,ce.__originalRestore=ce.restore,ce.__originalRotate=ce.rotate,ce.__originalScale=ce.scale,ce.__originalTranslate=ce.translate,ce.__originalTransform=ce.transform,ce.__originalSetTransform=ce.setTransform,ce.__originalResetTransform=ce.resetTransform,ce.__originalClip=ce.clip,ce.__originalMoveTo=ce.moveTo,ce.__originalLineTo=ce.lineTo,ce.__originalBezierCurveTo=ce.bezierCurveTo,ce.__originalRect=ce.rect,ce.__originalClosePath=ce.closePath,ce.__originalBeginPath=ce.beginPath,ce._removeMirroring=()=>{ce.save=ce.__originalSave,ce.restore=ce.__originalRestore,ce.rotate=ce.__originalRotate,ce.scale=ce.__originalScale,ce.translate=ce.__originalTranslate,ce.transform=ce.__originalTransform,ce.setTransform=ce.__originalSetTransform,ce.resetTransform=ce.__originalResetTransform,ce.clip=ce.__originalClip,ce.moveTo=ce.__originalMoveTo,ce.lineTo=ce.__originalLineTo,ce.bezierCurveTo=ce.__originalBezierCurveTo,ce.rect=ce.__originalRect,ce.closePath=ce.__originalClosePath,ce.beginPath=ce.__originalBeginPath,delete ce._removeMirroring},ce.save=function(){D.save(),this.__originalSave()},ce.restore=function(){D.restore(),this.__originalRestore()},ce.translate=function(ee,le){D.translate(ee,le),this.__originalTranslate(ee,le)},ce.scale=function(ee,le){D.scale(ee,le),this.__originalScale(ee,le)},ce.transform=function(ee,le,fe,Ae,Ce,je){D.transform(ee,le,fe,Ae,Ce,je),this.__originalTransform(ee,le,fe,Ae,Ce,je)},ce.setTransform=function(ee,le,fe,Ae,Ce,je){D.setTransform(ee,le,fe,Ae,Ce,je),this.__originalSetTransform(ee,le,fe,Ae,Ce,je)},ce.resetTransform=function(){D.resetTransform(),this.__originalResetTransform()},ce.rotate=function(ee){D.rotate(ee),this.__originalRotate(ee)},ce.clip=function(ee){D.clip(ee),this.__originalClip(ee)},ce.moveTo=function(F,ee){D.moveTo(F,ee),this.__originalMoveTo(F,ee)},ce.lineTo=function(F,ee){D.lineTo(F,ee),this.__originalLineTo(F,ee)},ce.bezierCurveTo=function(F,ee,le,fe,Ae,Ce){D.bezierCurveTo(F,ee,le,fe,Ae,Ce),this.__originalBezierCurveTo(F,ee,le,fe,Ae,Ce)},ce.rect=function(F,ee,le,fe){D.rect(F,ee,le,fe),this.__originalRect(F,ee,le,fe)},ce.closePath=function(){D.closePath(),this.__originalClosePath()},ce.beginPath=function(){D.beginPath(),this.__originalBeginPath()}}class V{constructor(D){this.canvasFactory=D,this.cache=Object.create(null)}getCanvas(D,F,ee){let le;return this.cache[D]!==void 0?(le=this.cache[D],this.canvasFactory.reset(le,F,ee)):(le=this.canvasFactory.create(F,ee),this.cache[D]=le),le}delete(D){delete this.cache[D]}clear(){for(const D in this.cache){const F=this.cache[D];this.canvasFactory.destroy(F),delete this.cache[D]}}}function T(ce,D,F,ee,le,fe,Ae,Ce,je,Xe){const[Ue,We,Be,O,G,ie]=(0,J.getCurrentTransform)(ce);if(We===0&&Be===0){const xe=Ae*Ue+G,Ve=Math.round(xe),Qe=Ce*O+ie,rt=Math.round(Qe),He=(Ae+je)*Ue+G,lt=Math.abs(Math.round(He)-Ve)||1,st=(Ce+Xe)*O+ie,dt=Math.abs(Math.round(st)-rt)||1;return ce.setTransform(Math.sign(Ue),0,0,Math.sign(O),Ve,rt),ce.drawImage(D,F,ee,le,fe,0,0,lt,dt),ce.setTransform(Ue,We,Be,O,G,ie),[lt,dt]}if(Ue===0&&O===0){const xe=Ce*Be+G,Ve=Math.round(xe),Qe=Ae*We+ie,rt=Math.round(Qe),He=(Ce+Xe)*Be+G,lt=Math.abs(Math.round(He)-Ve)||1,st=(Ae+je)*We+ie,dt=Math.abs(Math.round(st)-rt)||1;return ce.setTransform(0,Math.sign(We),Math.sign(Be),0,Ve,rt),ce.drawImage(D,F,ee,le,fe,0,0,dt,lt),ce.setTransform(Ue,We,Be,O,G,ie),[dt,lt]}ce.drawImage(D,F,ee,le,fe,Ae,Ce,je,Xe);const he=Math.hypot(Ue,We),re=Math.hypot(Be,O);return[he*je,re*Xe]}function L(ce){const{width:D,height:F}=ce;if(D>te||F>te)return null;const ee=1e3,le=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),fe=D+1;let Ae=new Uint8Array(fe*(F+1)),Ce,je,Xe;const Ue=D+7&-8;let We=new Uint8Array(Ue*F),Be=0;for(const re of ce.data){let xe=128;for(;xe>0;)We[Be++]=re&xe?0:255,xe>>=1}let O=0;for(Be=0,We[Be]!==0&&(Ae[0]=1,++O),je=1;je<D;je++)We[Be]!==We[Be+1]&&(Ae[je]=We[Be]?2:1,++O),Be++;for(We[Be]!==0&&(Ae[je]=2,++O),Ce=1;Ce<F;Ce++){Be=Ce*Ue,Xe=Ce*fe,We[Be-Ue]!==We[Be]&&(Ae[Xe]=We[Be]?1:8,++O);let re=(We[Be]?4:0)+(We[Be-Ue]?8:0);for(je=1;je<D;je++)re=(re>>2)+(We[Be+1]?4:0)+(We[Be-Ue+1]?8:0),le[re]&&(Ae[Xe+je]=le[re],++O),Be++;if(We[Be-Ue]!==We[Be]&&(Ae[Xe+je]=We[Be]?2:4,++O),O>ee)return null}for(Be=Ue*(F-1),Xe=Ce*fe,We[Be]!==0&&(Ae[Xe]=8,++O),je=1;je<D;je++)We[Be]!==We[Be+1]&&(Ae[Xe+je]=We[Be]?4:8,++O),Be++;if(We[Be]!==0&&(Ae[Xe+je]=4,++O),O>ee)return null;const G=new Int32Array([0,fe,-1,0,-fe,0,0,0,1]),ie=new Path2D;for(Ce=0;O&&Ce<=F;Ce++){let re=Ce*fe;const xe=re+D;for(;re<xe&&!Ae[re];)re++;if(re===xe)continue;ie.moveTo(re%fe,Ce);const Ve=re;let Qe=Ae[re];do{const rt=G[Qe];do re+=rt;while(!Ae[re]);const He=Ae[re];He!==5&&He!==10?(Qe=He,Ae[re]=0):(Qe=He&51*Qe>>4,Ae[re]&=Qe>>2|Qe<<2),ie.lineTo(re%fe,re/fe|0),Ae[re]||--O}while(Ve!==re);--Ce}return We=null,Ae=null,function(re){re.save(),re.scale(1/D,-1/F),re.translate(0,-F),re.fill(ie),re.beginPath(),re.restore()}}class H{constructor(D,F){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=B.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=B.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=B.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,D,F])}clone(){const D=Object.create(this);return D.clipBox=this.clipBox.slice(),D}setCurrentPoint(D,F){this.x=D,this.y=F}updatePathMinMax(D,F,ee){[F,ee]=B.Util.applyTransform([F,ee],D),this.minX=Math.min(this.minX,F),this.minY=Math.min(this.minY,ee),this.maxX=Math.max(this.maxX,F),this.maxY=Math.max(this.maxY,ee)}updateRectMinMax(D,F){const ee=B.Util.applyTransform(F,D),le=B.Util.applyTransform(F.slice(2),D);this.minX=Math.min(this.minX,ee[0],le[0]),this.minY=Math.min(this.minY,ee[1],le[1]),this.maxX=Math.max(this.maxX,ee[0],le[0]),this.maxY=Math.max(this.maxY,ee[1],le[1])}updateScalingPathMinMax(D,F){B.Util.scaleMinMax(D,F),this.minX=Math.min(this.minX,F[0]),this.maxX=Math.max(this.maxX,F[1]),this.minY=Math.min(this.minY,F[2]),this.maxY=Math.max(this.maxY,F[3])}updateCurvePathMinMax(D,F,ee,le,fe,Ae,Ce,je,Xe,Ue){const We=B.Util.bezierBoundingBox(F,ee,le,fe,Ae,Ce,je,Xe);if(Ue){Ue[0]=Math.min(Ue[0],We[0],We[2]),Ue[1]=Math.max(Ue[1],We[0],We[2]),Ue[2]=Math.min(Ue[2],We[1],We[3]),Ue[3]=Math.max(Ue[3],We[1],We[3]);return}this.updateRectMinMax(D,We)}getPathBoundingBox(D=y.PathType.FILL,F=null){const ee=[this.minX,this.minY,this.maxX,this.maxY];if(D===y.PathType.STROKE){F||(0,B.unreachable)("Stroke bounding box must include transform.");const le=B.Util.singularValueDecompose2dScale(F),fe=le[0]*this.lineWidth/2,Ae=le[1]*this.lineWidth/2;ee[0]-=fe,ee[1]-=Ae,ee[2]+=fe,ee[3]+=Ae}return ee}updateClipFromPath(){const D=B.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(D||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(D){this.clipBox=D,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(D=y.PathType.FILL,F=null){return B.Util.intersect(this.clipBox,this.getPathBoundingBox(D,F))}}function x(ce,D,F=null){if(typeof ImageData<"u"&&D instanceof ImageData){ce.putImageData(D,0,0);return}const ee=D.height,le=D.width,fe=ee%X,Ae=(ee-fe)/X,Ce=fe===0?Ae:Ae+1,je=ce.createImageData(le,X);let Xe=0,Ue;const We=D.data,Be=je.data;let O,G,ie,he,re,xe,Ve,Qe;if(F)switch(F.length){case 1:re=F[0],xe=F[0],Ve=F[0],Qe=F[0];break;case 4:re=F[0],xe=F[1],Ve=F[2],Qe=F[3];break}if(D.kind===B.ImageKind.GRAYSCALE_1BPP){const rt=We.byteLength,He=new Uint32Array(Be.buffer,0,Be.byteLength>>2),lt=He.length,st=le+7>>3;let dt=4294967295,gt=B.FeatureTest.isLittleEndian?4278190080:255;for(Qe&&Qe[0]===255&&Qe[255]===0&&([dt,gt]=[gt,dt]),O=0;O<Ce;O++){for(ie=O<Ae?X:fe,Ue=0,G=0;G<ie;G++){const kt=rt-Xe;let Dt=0;const Rt=kt>st?le:kt*8-7,ue=Rt&-8;let ge=0,Se=0;for(;Dt<ue;Dt+=8)Se=We[Xe++],He[Ue++]=Se&128?dt:gt,He[Ue++]=Se&64?dt:gt,He[Ue++]=Se&32?dt:gt,He[Ue++]=Se&16?dt:gt,He[Ue++]=Se&8?dt:gt,He[Ue++]=Se&4?dt:gt,He[Ue++]=Se&2?dt:gt,He[Ue++]=Se&1?dt:gt;for(;Dt<Rt;Dt++)ge===0&&(Se=We[Xe++],ge=128),He[Ue++]=Se&ge?dt:gt,ge>>=1}for(;Ue<lt;)He[Ue++]=0;ce.putImageData(je,0,O*X)}}else if(D.kind===B.ImageKind.RGBA_32BPP){const rt=!!(re||xe||Ve);for(G=0,he=le*X*4,O=0;O<Ae;O++){if(Be.set(We.subarray(Xe,Xe+he)),Xe+=he,rt)for(let He=0;He<he;He+=4)re&&(Be[He+0]=re[Be[He+0]]),xe&&(Be[He+1]=xe[Be[He+1]]),Ve&&(Be[He+2]=Ve[Be[He+2]]);ce.putImageData(je,0,G),G+=X}if(O<Ce){if(he=le*fe*4,Be.set(We.subarray(Xe,Xe+he)),rt)for(let He=0;He<he;He+=4)re&&(Be[He+0]=re[Be[He+0]]),xe&&(Be[He+1]=xe[Be[He+1]]),Ve&&(Be[He+2]=Ve[Be[He+2]]);ce.putImageData(je,0,G)}}else if(D.kind===B.ImageKind.RGB_24BPP){const rt=!!(re||xe||Ve);for(ie=X,he=le*ie,O=0;O<Ce;O++){for(O>=Ae&&(ie=fe,he=le*ie),Ue=0,G=he;G--;)Be[Ue++]=We[Xe++],Be[Ue++]=We[Xe++],Be[Ue++]=We[Xe++],Be[Ue++]=255;if(rt)for(let He=0;He<Ue;He+=4)re&&(Be[He+0]=re[Be[He+0]]),xe&&(Be[He+1]=xe[Be[He+1]]),Ve&&(Be[He+2]=Ve[Be[He+2]]);ce.putImageData(je,0,O*X)}}else throw new Error(`bad image kind: ${D.kind}`)}function P(ce,D){if(D.bitmap){ce.drawImage(D.bitmap,0,0);return}const F=D.height,ee=D.width,le=F%X,fe=(F-le)/X,Ae=le===0?fe:fe+1,Ce=ce.createImageData(ee,X);let je=0;const Xe=D.data,Ue=Ce.data;for(let We=0;We<Ae;We++){const Be=We<fe?X:le;({srcPos:je}=(0,ve.applyMaskImageData)({src:Xe,srcPos:je,dest:Ue,width:ee,height:Be})),ce.putImageData(Ce,0,We*X)}}function _(ce,D){const F=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const ee of F)ce[ee]!==void 0&&(D[ee]=ce[ee]);ce.setLineDash!==void 0&&(D.setLineDash(ce.getLineDash()),D.lineDashOffset=ce.lineDashOffset)}function A(ce,D){ce.strokeStyle=ce.fillStyle=D||"#000000",ce.fillRule="nonzero",ce.globalAlpha=1,ce.lineWidth=1,ce.lineCap="butt",ce.lineJoin="miter",ce.miterLimit=10,ce.globalCompositeOperation="source-over",ce.font="10px sans-serif",ce.setLineDash!==void 0&&(ce.setLineDash([]),ce.lineDashOffset=0)}function N(ce,D,F,ee){const le=ce.length;for(let fe=3;fe<le;fe+=4){const Ae=ce[fe];if(Ae===0)ce[fe-3]=D,ce[fe-2]=F,ce[fe-1]=ee;else if(Ae<255){const Ce=255-Ae;ce[fe-3]=ce[fe-3]*Ae+D*Ce>>8,ce[fe-2]=ce[fe-2]*Ae+F*Ce>>8,ce[fe-1]=ce[fe-1]*Ae+ee*Ce>>8}}}function ne(ce,D,F){const ee=ce.length,le=1/255;for(let fe=3;fe<ee;fe+=4){const Ae=F?F[ce[fe]]:ce[fe];D[fe]=D[fe]*Ae*le|0}}function se(ce,D,F){const ee=ce.length;for(let le=3;le<ee;le+=4){const fe=ce[le-3]*77+ce[le-2]*152+ce[le-1]*28;D[le]=F?D[le]*F[fe>>8]>>8:D[le]*fe>>16}}function we(ce,D,F,ee,le,fe,Ae,Ce,je,Xe,Ue){const We=!!fe,Be=We?fe[0]:0,O=We?fe[1]:0,G=We?fe[2]:0;let ie;le==="Luminosity"?ie=se:ie=ne;const re=Math.min(ee,Math.ceil(1048576/F));for(let xe=0;xe<ee;xe+=re){const Ve=Math.min(re,ee-xe),Qe=ce.getImageData(Ce-Xe,xe+(je-Ue),F,Ve),rt=D.getImageData(Ce,xe+je,F,Ve);We&&N(Qe.data,Be,O,G),ie(Qe.data,rt.data,Ae),D.putImageData(rt,Ce,xe+je)}}function Y(ce,D,F,ee){const le=ee[0],fe=ee[1],Ae=ee[2]-le,Ce=ee[3]-fe;Ae===0||Ce===0||(we(D.context,F,Ae,Ce,D.subtype,D.backdrop,D.transferMap,le,fe,D.offsetX,D.offsetY),ce.save(),ce.globalAlpha=1,ce.globalCompositeOperation="source-over",ce.setTransform(1,0,0,1,0,0),ce.drawImage(F.canvas,0,0),ce.restore())}function Me(ce,D){const F=B.Util.singularValueDecompose2dScale(ce);F[0]=Math.fround(F[0]),F[1]=Math.fround(F[1]);const ee=Math.fround((globalThis.devicePixelRatio||1)*J.PixelsPerInch.PDF_TO_CSS_UNITS);return D!==void 0?D:F[0]<=ee||F[1]<=ee}const Je=["butt","round","square"],ze=["miter","round","bevel"],Ge={},Le={},et=class et{constructor(D,F,ee,le,{optionalContentConfig:fe,markedContentStack:Ae=null},Ce,je){qe(this,Re);this.ctx=D,this.current=new H(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=F,this.objs=ee,this.canvasFactory=le,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ae||[],this.optionalContentConfig=fe,this.cachedCanvases=new V(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ce,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(je==null?void 0:je.background)||null,this.foregroundColor=(je==null?void 0:je.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(D,F=null){return typeof D=="string"?D.startsWith("g_")?this.commonObjs.get(D):this.objs.get(D):F}beginDrawing({transform:D,viewport:F,transparency:ee=!1,background:le=null}){const fe=this.ctx.canvas.width,Ae=this.ctx.canvas.height,Ce=le||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const je=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Xe=this.backgroundColor=this.ctx.fillStyle;let Ue=!0,We=Ce;if(this.ctx.fillStyle=Ce,We=this.ctx.fillStyle,Ue=typeof We=="string"&&/^#[0-9A-Fa-f]{6}$/.test(We),je==="#000000"&&Xe==="#ffffff"||je===Xe||!Ue)this.foregroundColor=this.backgroundColor=null;else{const[Be,O,G]=(0,J.getRGB)(We),ie=re=>(re/=255,re<=.03928?re/12.92:((re+.055)/1.055)**2.4),he=Math.round(.2126*ie(Be)+.7152*ie(O)+.0722*ie(G));this.selectColor=(re,xe,Ve)=>{const Qe=.2126*ie(re)+.7152*ie(xe)+.0722*ie(Ve);return Math.round(Qe)===he?Xe:je}}}if(this.ctx.fillStyle=this.backgroundColor||Ce,this.ctx.fillRect(0,0,fe,Ae),this.ctx.restore(),ee){const je=this.cachedCanvases.getCanvas("transparent",fe,Ae);this.compositeCtx=this.ctx,this.transparentCanvas=je.canvas,this.ctx=je.context,this.ctx.save(),this.ctx.transform(...(0,J.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx,this.foregroundColor),D&&(this.ctx.transform(...D),this.outputScaleX=D[0],this.outputScaleY=D[0]),this.ctx.transform(...F.transform),this.viewportScale=F.scale,this.baseTransform=(0,J.getCurrentTransform)(this.ctx)}executeOperatorList(D,F,ee,le){const fe=D.argsArray,Ae=D.fnArray;let Ce=F||0;const je=fe.length;if(je===Ce)return Ce;const Xe=je-Ce>be&&typeof ee=="function",Ue=Xe?Date.now()+$:0;let We=0;const Be=this.commonObjs,O=this.objs;let G;for(;;){if(le!==void 0&&Ce===le.nextBreakPoint)return le.breakIt(Ce,ee),Ce;if(G=Ae[Ce],G!==B.OPS.dependency)this[G].apply(this,fe[Ce]);else for(const ie of fe[Ce]){const he=ie.startsWith("g_")?Be:O;if(!he.has(ie))return he.get(ie,ee),Ce}if(Ce++,Ce===je)return Ce;if(Xe&&++We>be){if(Date.now()>Ue)return ee(),Ce;We=0}}}endDrawing(){tt(this,Re,Ui).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const D of this._cachedBitmapsMap.values()){for(const F of D.values())typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement&&(F.width=F.height=0);D.clear()}this._cachedBitmapsMap.clear()}_scaleImage(D,F){const ee=D.width,le=D.height;let fe=Math.max(Math.hypot(F[0],F[1]),1),Ae=Math.max(Math.hypot(F[2],F[3]),1),Ce=ee,je=le,Xe="prescale1",Ue,We;for(;fe>2&&Ce>1||Ae>2&&je>1;){let Be=Ce,O=je;fe>2&&Ce>1&&(Be=Math.ceil(Ce/2),fe/=Ce/Be),Ae>2&&je>1&&(O=Math.ceil(je/2),Ae/=je/O),Ue=this.cachedCanvases.getCanvas(Xe,Be,O),We=Ue.context,We.clearRect(0,0,Be,O),We.drawImage(D,0,0,Ce,je,0,0,Be,O),D=Ue.canvas,Ce=Be,je=O,Xe=Xe==="prescale1"?"prescale2":"prescale1"}return{img:D,paintWidth:Ce,paintHeight:je}}_createMaskCanvas(D){const F=this.ctx,{width:ee,height:le}=D,fe=this.current.fillColor,Ae=this.current.patternFill,Ce=(0,J.getCurrentTransform)(F);let je,Xe,Ue,We;if((D.bitmap||D.data)&&D.count>1){const lt=D.bitmap||D.data.buffer;Xe=JSON.stringify(Ae?Ce:[Ce.slice(0,4),fe]),je=this._cachedBitmapsMap.get(lt),je||(je=new Map,this._cachedBitmapsMap.set(lt,je));const st=je.get(Xe);if(st&&!Ae){const dt=Math.round(Math.min(Ce[0],Ce[2])+Ce[4]),gt=Math.round(Math.min(Ce[1],Ce[3])+Ce[5]);return{canvas:st,offsetX:dt,offsetY:gt}}Ue=st}Ue||(We=this.cachedCanvases.getCanvas("maskCanvas",ee,le),P(We.context,D));let Be=B.Util.transform(Ce,[1/ee,0,0,-1/le,0,0]);Be=B.Util.transform(Be,[1,0,0,1,0,-le]);const O=B.Util.applyTransform([0,0],Be),G=B.Util.applyTransform([ee,le],Be),ie=B.Util.normalizeRect([O[0],O[1],G[0],G[1]]),he=Math.round(ie[2]-ie[0])||1,re=Math.round(ie[3]-ie[1])||1,xe=this.cachedCanvases.getCanvas("fillCanvas",he,re),Ve=xe.context,Qe=Math.min(O[0],G[0]),rt=Math.min(O[1],G[1]);Ve.translate(-Qe,-rt),Ve.transform(...Be),Ue||(Ue=this._scaleImage(We.canvas,(0,J.getCurrentTransformInverse)(Ve)),Ue=Ue.img,je&&Ae&&je.set(Xe,Ue)),Ve.imageSmoothingEnabled=Me((0,J.getCurrentTransform)(Ve),D.interpolate),T(Ve,Ue,0,0,Ue.width,Ue.height,0,0,ee,le),Ve.globalCompositeOperation="source-in";const He=B.Util.transform((0,J.getCurrentTransformInverse)(Ve),[1,0,0,1,-Qe,-rt]);return Ve.fillStyle=Ae?fe.getPattern(F,this,He,y.PathType.FILL):fe,Ve.fillRect(0,0,ee,le),je&&!Ae&&(this.cachedCanvases.delete("fillCanvas"),je.set(Xe,xe.canvas)),{canvas:xe.canvas,offsetX:Math.round(Qe),offsetY:Math.round(rt)}}setLineWidth(D){D!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=D,this.ctx.lineWidth=D}setLineCap(D){this.ctx.lineCap=Je[D]}setLineJoin(D){this.ctx.lineJoin=ze[D]}setMiterLimit(D){this.ctx.miterLimit=D}setDash(D,F){const ee=this.ctx;ee.setLineDash!==void 0&&(ee.setLineDash(D),ee.lineDashOffset=F)}setRenderingIntent(D){}setFlatness(D){}setGState(D){for(const[F,ee]of D)switch(F){case"LW":this.setLineWidth(ee);break;case"LC":this.setLineCap(ee);break;case"LJ":this.setLineJoin(ee);break;case"ML":this.setMiterLimit(ee);break;case"D":this.setDash(ee[0],ee[1]);break;case"RI":this.setRenderingIntent(ee);break;case"FL":this.setFlatness(ee);break;case"Font":this.setFont(ee[0],ee[1]);break;case"CA":this.current.strokeAlpha=ee;break;case"ca":this.current.fillAlpha=ee,this.ctx.globalAlpha=ee;break;case"BM":this.ctx.globalCompositeOperation=ee;break;case"SMask":this.current.activeSMask=ee?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=ee}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const D=this.inSMaskMode;this.current.activeSMask&&!D?this.beginSMaskMode():!this.current.activeSMask&&D&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const D=this.ctx.canvas.width,F=this.ctx.canvas.height,ee="smaskGroupAt"+this.groupLevel,le=this.cachedCanvases.getCanvas(ee,D,F);this.suspendedCtx=this.ctx,this.ctx=le.context;const fe=this.ctx;fe.setTransform(...(0,J.getCurrentTransform)(this.suspendedCtx)),_(this.suspendedCtx,fe),U(fe,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(D){if(!this.current.activeSMask)return;D?(D[0]=Math.floor(D[0]),D[1]=Math.floor(D[1]),D[2]=Math.ceil(D[2]),D[3]=Math.ceil(D[3])):D=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const F=this.current.activeSMask,ee=this.suspendedCtx;Y(ee,F,this.ctx,D),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const D=this.current;this.stateStack.push(D),this.current=D.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(D,F,ee,le,fe,Ae){this.ctx.transform(D,F,ee,le,fe,Ae),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(D,F,ee){const le=this.ctx,fe=this.current;let Ae=fe.x,Ce=fe.y,je,Xe;const Ue=(0,J.getCurrentTransform)(le),We=Ue[0]===0&&Ue[3]===0||Ue[1]===0&&Ue[2]===0,Be=We?ee.slice(0):null;for(let O=0,G=0,ie=D.length;O<ie;O++)switch(D[O]|0){case B.OPS.rectangle:Ae=F[G++],Ce=F[G++];const he=F[G++],re=F[G++],xe=Ae+he,Ve=Ce+re;le.moveTo(Ae,Ce),he===0||re===0?le.lineTo(xe,Ve):(le.lineTo(xe,Ce),le.lineTo(xe,Ve),le.lineTo(Ae,Ve)),We||fe.updateRectMinMax(Ue,[Ae,Ce,xe,Ve]),le.closePath();break;case B.OPS.moveTo:Ae=F[G++],Ce=F[G++],le.moveTo(Ae,Ce),We||fe.updatePathMinMax(Ue,Ae,Ce);break;case B.OPS.lineTo:Ae=F[G++],Ce=F[G++],le.lineTo(Ae,Ce),We||fe.updatePathMinMax(Ue,Ae,Ce);break;case B.OPS.curveTo:je=Ae,Xe=Ce,Ae=F[G+4],Ce=F[G+5],le.bezierCurveTo(F[G],F[G+1],F[G+2],F[G+3],Ae,Ce),fe.updateCurvePathMinMax(Ue,je,Xe,F[G],F[G+1],F[G+2],F[G+3],Ae,Ce,Be),G+=6;break;case B.OPS.curveTo2:je=Ae,Xe=Ce,le.bezierCurveTo(Ae,Ce,F[G],F[G+1],F[G+2],F[G+3]),fe.updateCurvePathMinMax(Ue,je,Xe,Ae,Ce,F[G],F[G+1],F[G+2],F[G+3],Be),Ae=F[G+2],Ce=F[G+3],G+=4;break;case B.OPS.curveTo3:je=Ae,Xe=Ce,Ae=F[G+2],Ce=F[G+3],le.bezierCurveTo(F[G],F[G+1],Ae,Ce,Ae,Ce),fe.updateCurvePathMinMax(Ue,je,Xe,F[G],F[G+1],Ae,Ce,Ae,Ce,Be),G+=4;break;case B.OPS.closePath:le.closePath();break}We&&fe.updateScalingPathMinMax(Ue,Be),fe.setCurrentPoint(Ae,Ce)}closePath(){this.ctx.closePath()}stroke(D=!0){const F=this.ctx,ee=this.current.strokeColor;F.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof ee=="object"&&(ee!=null&&ee.getPattern)?(F.save(),F.strokeStyle=ee.getPattern(F,this,(0,J.getCurrentTransformInverse)(F),y.PathType.STROKE),this.rescaleAndStroke(!1),F.restore()):this.rescaleAndStroke(!0)),D&&this.consumePath(this.current.getClippedPathBoundingBox()),F.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(D=!0){const F=this.ctx,ee=this.current.fillColor,le=this.current.patternFill;let fe=!1;le&&(F.save(),F.fillStyle=ee.getPattern(F,this,(0,J.getCurrentTransformInverse)(F),y.PathType.FILL),fe=!0);const Ae=this.current.getClippedPathBoundingBox();this.contentVisible&&Ae!==null&&(this.pendingEOFill?(F.fill("evenodd"),this.pendingEOFill=!1):F.fill()),fe&&F.restore(),D&&this.consumePath(Ae)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ge}eoClip(){this.pendingClip=Le}beginText(){this.current.textMatrix=B.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const D=this.pendingTextPaths,F=this.ctx;if(D===void 0){F.beginPath();return}F.save(),F.beginPath();for(const ee of D)F.setTransform(...ee.transform),F.translate(ee.x,ee.y),ee.addToPath(F,ee.fontSize);F.restore(),F.clip(),F.beginPath(),delete this.pendingTextPaths}setCharSpacing(D){this.current.charSpacing=D}setWordSpacing(D){this.current.wordSpacing=D}setHScale(D){this.current.textHScale=D/100}setLeading(D){this.current.leading=-D}setFont(D,F){const ee=this.commonObjs.get(D),le=this.current;if(!ee)throw new Error(`Can't find font for ${D}`);if(le.fontMatrix=ee.fontMatrix||B.FONT_IDENTITY_MATRIX,(le.fontMatrix[0]===0||le.fontMatrix[3]===0)&&(0,B.warn)("Invalid font matrix for font "+D),F<0?(F=-F,le.fontDirection=-1):le.fontDirection=1,this.current.font=ee,this.current.fontSize=F,ee.isType3Font)return;const fe=ee.loadedName||"sans-serif";let Ae="normal";ee.black?Ae="900":ee.bold&&(Ae="bold");const Ce=ee.italic?"italic":"normal",je=`"${fe}", ${ee.fallbackName}`;let Xe=F;F<Ne?Xe=Ne:F>ye&&(Xe=ye),this.current.fontSizeScale=F/Xe,this.ctx.font=`${Ce} ${Ae} ${Xe}px ${je}`}setTextRenderingMode(D){this.current.textRenderingMode=D}setTextRise(D){this.current.textRise=D}moveText(D,F){this.current.x=this.current.lineX+=D,this.current.y=this.current.lineY+=F}setLeadingMoveText(D,F){this.setLeading(-F),this.moveText(D,F)}setTextMatrix(D,F,ee,le,fe,Ae){this.current.textMatrix=[D,F,ee,le,fe,Ae],this.current.textMatrixScale=Math.hypot(D,F),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(D,F,ee,le){const fe=this.ctx,Ae=this.current,Ce=Ae.font,je=Ae.textRenderingMode,Xe=Ae.fontSize/Ae.fontSizeScale,Ue=je&B.TextRenderingMode.FILL_STROKE_MASK,We=!!(je&B.TextRenderingMode.ADD_TO_PATH_FLAG),Be=Ae.patternFill&&!Ce.missingFile;let O;(Ce.disableFontFace||We||Be)&&(O=Ce.getPathGenerator(this.commonObjs,D)),Ce.disableFontFace||Be?(fe.save(),fe.translate(F,ee),fe.beginPath(),O(fe,Xe),le&&fe.setTransform(...le),(Ue===B.TextRenderingMode.FILL||Ue===B.TextRenderingMode.FILL_STROKE)&&fe.fill(),(Ue===B.TextRenderingMode.STROKE||Ue===B.TextRenderingMode.FILL_STROKE)&&fe.stroke(),fe.restore()):((Ue===B.TextRenderingMode.FILL||Ue===B.TextRenderingMode.FILL_STROKE)&&fe.fillText(D,F,ee),(Ue===B.TextRenderingMode.STROKE||Ue===B.TextRenderingMode.FILL_STROKE)&&fe.strokeText(D,F,ee)),We&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,J.getCurrentTransform)(fe),x:F,y:ee,fontSize:Xe,addToPath:O})}get isFontSubpixelAAEnabled(){const{context:D}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);D.scale(1.5,1),D.fillText("I",0,10);const F=D.getImageData(0,0,10,10).data;let ee=!1;for(let le=3;le<F.length;le+=4)if(F[le]>0&&F[le]<255){ee=!0;break}return(0,B.shadow)(this,"isFontSubpixelAAEnabled",ee)}showText(D){const F=this.current,ee=F.font;if(ee.isType3Font)return this.showType3Text(D);const le=F.fontSize;if(le===0)return;const fe=this.ctx,Ae=F.fontSizeScale,Ce=F.charSpacing,je=F.wordSpacing,Xe=F.fontDirection,Ue=F.textHScale*Xe,We=D.length,Be=ee.vertical,O=Be?1:-1,G=ee.defaultVMetrics,ie=le*F.fontMatrix[0],he=F.textRenderingMode===B.TextRenderingMode.FILL&&!ee.disableFontFace&&!F.patternFill;fe.save(),fe.transform(...F.textMatrix),fe.translate(F.x,F.y+F.textRise),Xe>0?fe.scale(Ue,-1):fe.scale(Ue,1);let re;if(F.patternFill){fe.save();const He=F.fillColor.getPattern(fe,this,(0,J.getCurrentTransformInverse)(fe),y.PathType.FILL);re=(0,J.getCurrentTransform)(fe),fe.restore(),fe.fillStyle=He}let xe=F.lineWidth;const Ve=F.textMatrixScale;if(Ve===0||xe===0){const He=F.textRenderingMode&B.TextRenderingMode.FILL_STROKE_MASK;(He===B.TextRenderingMode.STROKE||He===B.TextRenderingMode.FILL_STROKE)&&(xe=this.getSinglePixelWidth())}else xe/=Ve;if(Ae!==1&&(fe.scale(Ae,Ae),xe/=Ae),fe.lineWidth=xe,ee.isInvalidPDFjsFont){const He=[];let lt=0;for(const st of D)He.push(st.unicode),lt+=st.width;fe.fillText(He.join(""),0,0),F.x+=lt*ie*Ue,fe.restore(),this.compose();return}let Qe=0,rt;for(rt=0;rt<We;++rt){const He=D[rt];if(typeof He=="number"){Qe+=O*He*le/1e3;continue}let lt=!1;const st=(He.isSpace?je:0)+Ce,dt=He.fontChar,gt=He.accent;let kt,Dt,Rt=He.width;if(Be){const ge=He.vmetric||G,Se=-(He.vmetric?ge[1]:Rt*.5)*ie,nt=ge[2]*ie;Rt=ge?-ge[0]:Rt,kt=Se/Ae,Dt=(Qe+nt)/Ae}else kt=Qe/Ae,Dt=0;if(ee.remeasure&&Rt>0){const ge=fe.measureText(dt).width*1e3/le*Ae;if(Rt<ge&&this.isFontSubpixelAAEnabled){const Se=Rt/ge;lt=!0,fe.save(),fe.scale(Se,1),kt/=Se}else Rt!==ge&&(kt+=(Rt-ge)/2e3*le/Ae)}if(this.contentVisible&&(He.isInFont||ee.missingFile)){if(he&&!gt)fe.fillText(dt,kt,Dt);else if(this.paintChar(dt,kt,Dt,re),gt){const ge=kt+le*gt.offset.x/Ae,Se=Dt-le*gt.offset.y/Ae;this.paintChar(gt.fontChar,ge,Se,re)}}let ue;Be?ue=Rt*ie-st*Xe:ue=Rt*ie+st*Xe,Qe+=ue,lt&&fe.restore()}Be?F.y-=Qe:F.x+=Qe*Ue,fe.restore(),this.compose()}showType3Text(D){const F=this.ctx,ee=this.current,le=ee.font,fe=ee.fontSize,Ae=ee.fontDirection,Ce=le.vertical?1:-1,je=ee.charSpacing,Xe=ee.wordSpacing,Ue=ee.textHScale*Ae,We=ee.fontMatrix||B.FONT_IDENTITY_MATRIX,Be=D.length,O=ee.textRenderingMode===B.TextRenderingMode.INVISIBLE;let G,ie,he,re;if(!(O||fe===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,F.save(),F.transform(...ee.textMatrix),F.translate(ee.x,ee.y),F.scale(Ue,Ae),G=0;G<Be;++G){if(ie=D[G],typeof ie=="number"){re=Ce*ie*fe/1e3,this.ctx.translate(re,0),ee.x+=re*Ue;continue}const xe=(ie.isSpace?Xe:0)+je,Ve=le.charProcOperatorList[ie.operatorListId];if(!Ve){(0,B.warn)(`Type3 character "${ie.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ie,this.save(),F.scale(fe,fe),F.transform(...We),this.executeOperatorList(Ve),this.restore()),he=B.Util.applyTransform([ie.width,0],We)[0]*fe+xe,F.translate(he,0),ee.x+=he*Ue}F.restore(),this.processingType3=null}}setCharWidth(D,F){}setCharWidthAndBounds(D,F,ee,le,fe,Ae){this.ctx.rect(ee,le,fe-ee,Ae-le),this.ctx.clip(),this.endPath()}getColorN_Pattern(D){let F;if(D[0]==="TilingPattern"){const ee=D[1],le=this.baseTransform||(0,J.getCurrentTransform)(this.ctx),fe={createCanvasGraphics:Ae=>new et(Ae,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};F=new y.TilingPattern(D,ee,this.ctx,fe,le)}else F=this._getPattern(D[1],D[2]);return F}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(D,F,ee){var fe;const le=((fe=this.selectColor)==null?void 0:fe.call(this,D,F,ee))||B.Util.makeHexColor(D,F,ee);this.ctx.strokeStyle=le,this.current.strokeColor=le}setFillRGBColor(D,F,ee){var fe;const le=((fe=this.selectColor)==null?void 0:fe.call(this,D,F,ee))||B.Util.makeHexColor(D,F,ee);this.ctx.fillStyle=le,this.current.fillColor=le,this.current.patternFill=!1}_getPattern(D,F=null){let ee;return this.cachedPatterns.has(D)?ee=this.cachedPatterns.get(D):(ee=(0,y.getShadingPattern)(this.objs.get(D)),this.cachedPatterns.set(D,ee)),F&&(ee.matrix=F),ee}shadingFill(D){if(!this.contentVisible)return;const F=this.ctx;this.save();const ee=this._getPattern(D);F.fillStyle=ee.getPattern(F,this,(0,J.getCurrentTransformInverse)(F),y.PathType.SHADING);const le=(0,J.getCurrentTransformInverse)(F);if(le){const fe=F.canvas,Ae=fe.width,Ce=fe.height,je=B.Util.applyTransform([0,0],le),Xe=B.Util.applyTransform([0,Ce],le),Ue=B.Util.applyTransform([Ae,0],le),We=B.Util.applyTransform([Ae,Ce],le),Be=Math.min(je[0],Xe[0],Ue[0],We[0]),O=Math.min(je[1],Xe[1],Ue[1],We[1]),G=Math.max(je[0],Xe[0],Ue[0],We[0]),ie=Math.max(je[1],Xe[1],Ue[1],We[1]);this.ctx.fillRect(Be,O,G-Be,ie-O)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,B.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,B.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(D,F){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(D)&&D.length===6&&this.transform(...D),this.baseTransform=(0,J.getCurrentTransform)(this.ctx),F)){const ee=F[2]-F[0],le=F[3]-F[1];this.ctx.rect(F[0],F[1],ee,le),this.current.updateRectMinMax((0,J.getCurrentTransform)(this.ctx),F),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(D){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const F=this.ctx;D.isolated||(0,B.info)("TODO: Support non-isolated groups."),D.knockout&&(0,B.warn)("Knockout groups not supported.");const ee=(0,J.getCurrentTransform)(F);if(D.matrix&&F.transform(...D.matrix),!D.bbox)throw new Error("Bounding box is required.");let le=B.Util.getAxialAlignedBoundingBox(D.bbox,(0,J.getCurrentTransform)(F));const fe=[0,0,F.canvas.width,F.canvas.height];le=B.Util.intersect(le,fe)||[0,0,0,0];const Ae=Math.floor(le[0]),Ce=Math.floor(le[1]);let je=Math.max(Math.ceil(le[2])-Ae,1),Xe=Math.max(Math.ceil(le[3])-Ce,1),Ue=1,We=1;je>Q&&(Ue=je/Q,je=Q),Xe>Q&&(We=Xe/Q,Xe=Q),this.current.startNewPathAndClipBox([0,0,je,Xe]);let Be="groupAt"+this.groupLevel;D.smask&&(Be+="_smask_"+this.smaskCounter++%2);const O=this.cachedCanvases.getCanvas(Be,je,Xe),G=O.context;G.scale(1/Ue,1/We),G.translate(-Ae,-Ce),G.transform(...ee),D.smask?this.smaskStack.push({canvas:O.canvas,context:G,offsetX:Ae,offsetY:Ce,scaleX:Ue,scaleY:We,subtype:D.smask.subtype,backdrop:D.smask.backdrop,transferMap:D.smask.transferMap||null,startTransformInverse:null}):(F.setTransform(1,0,0,1,0,0),F.translate(Ae,Ce),F.scale(Ue,We),F.save()),_(F,G),this.ctx=G,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(F),this.groupLevel++}endGroup(D){if(!this.contentVisible)return;this.groupLevel--;const F=this.ctx,ee=this.groupStack.pop();if(this.ctx=ee,this.ctx.imageSmoothingEnabled=!1,D.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const le=(0,J.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...le);const fe=B.Util.getAxialAlignedBoundingBox([0,0,F.canvas.width,F.canvas.height],le);this.ctx.drawImage(F.canvas,0,0),this.ctx.restore(),this.compose(fe)}}beginAnnotation(D,F,ee,le,fe){if(tt(this,Re,Ui).call(this),A(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(F)&&F.length===4){const Ae=F[2]-F[0],Ce=F[3]-F[1];if(fe&&this.annotationCanvasMap){ee=ee.slice(),ee[4]-=F[0],ee[5]-=F[1],F=F.slice(),F[0]=F[1]=0,F[2]=Ae,F[3]=Ce;const[je,Xe]=B.Util.singularValueDecompose2dScale((0,J.getCurrentTransform)(this.ctx)),{viewportScale:Ue}=this,We=Math.ceil(Ae*this.outputScaleX*Ue),Be=Math.ceil(Ce*this.outputScaleY*Ue);this.annotationCanvas=this.canvasFactory.create(We,Be);const{canvas:O,context:G}=this.annotationCanvas;this.annotationCanvasMap.set(D,O),this.annotationCanvas.savedCtx=this.ctx,this.ctx=G,this.ctx.setTransform(je,0,0,-Xe,0,Ce*Xe),A(this.ctx,this.foregroundColor)}else A(this.ctx,this.foregroundColor),this.ctx.rect(F[0],F[1],Ae,Ce),this.ctx.clip(),this.endPath()}this.current=new H(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...ee),this.transform(...le)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(D){if(!this.contentVisible)return;const F=D.count;D=this.getObject(D.data,D),D.count=F;const ee=this.ctx,le=this.processingType3;if(le&&(le.compiled===void 0&&(le.compiled=L(D)),le.compiled)){le.compiled(ee);return}const fe=this._createMaskCanvas(D),Ae=fe.canvas;ee.save(),ee.setTransform(1,0,0,1,0,0),ee.drawImage(Ae,fe.offsetX,fe.offsetY),ee.restore(),this.compose()}paintImageMaskXObjectRepeat(D,F,ee=0,le=0,fe,Ae){if(!this.contentVisible)return;D=this.getObject(D.data,D);const Ce=this.ctx;Ce.save();const je=(0,J.getCurrentTransform)(Ce);Ce.transform(F,ee,le,fe,0,0);const Xe=this._createMaskCanvas(D);Ce.setTransform(1,0,0,1,Xe.offsetX-je[4],Xe.offsetY-je[5]);for(let Ue=0,We=Ae.length;Ue<We;Ue+=2){const Be=B.Util.transform(je,[F,ee,le,fe,Ae[Ue],Ae[Ue+1]]),[O,G]=B.Util.applyTransform([0,0],Be);Ce.drawImage(Xe.canvas,O,G)}Ce.restore(),this.compose()}paintImageMaskXObjectGroup(D){if(!this.contentVisible)return;const F=this.ctx,ee=this.current.fillColor,le=this.current.patternFill;for(const fe of D){const{data:Ae,width:Ce,height:je,transform:Xe}=fe,Ue=this.cachedCanvases.getCanvas("maskCanvas",Ce,je),We=Ue.context;We.save();const Be=this.getObject(Ae,fe);P(We,Be),We.globalCompositeOperation="source-in",We.fillStyle=le?ee.getPattern(We,this,(0,J.getCurrentTransformInverse)(F),y.PathType.FILL):ee,We.fillRect(0,0,Ce,je),We.restore(),F.save(),F.transform(...Xe),F.scale(1,-1),T(F,Ue.canvas,0,0,Ce,je,0,-1,1,1),F.restore()}this.compose()}paintImageXObject(D){if(!this.contentVisible)return;const F=this.getObject(D);if(!F){(0,B.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(F)}paintImageXObjectRepeat(D,F,ee,le){if(!this.contentVisible)return;const fe=this.getObject(D);if(!fe){(0,B.warn)("Dependent image isn't ready yet");return}const Ae=fe.width,Ce=fe.height,je=[];for(let Xe=0,Ue=le.length;Xe<Ue;Xe+=2)je.push({transform:[F,0,0,ee,le[Xe],le[Xe+1]],x:0,y:0,w:Ae,h:Ce});this.paintInlineImageXObjectGroup(fe,je)}paintInlineImageXObject(D){if(!this.contentVisible)return;const F=D.width,ee=D.height,le=this.ctx;this.save(),le.scale(1/F,-1/ee);let fe;if(typeof HTMLElement=="function"&&D instanceof HTMLElement||!D.data)fe=D;else{const Ce=this.cachedCanvases.getCanvas("inlineImage",F,ee),je=Ce.context;x(je,D,this.current.transferMaps),fe=Ce.canvas}const Ae=this._scaleImage(fe,(0,J.getCurrentTransformInverse)(le));le.imageSmoothingEnabled=Me((0,J.getCurrentTransform)(le),D.interpolate),T(le,Ae.img,0,0,Ae.paintWidth,Ae.paintHeight,0,-ee,F,ee),this.compose(),this.restore()}paintInlineImageXObjectGroup(D,F){if(!this.contentVisible)return;const ee=this.ctx,le=D.width,fe=D.height,Ae=this.cachedCanvases.getCanvas("inlineImage",le,fe),Ce=Ae.context;x(Ce,D,this.current.transferMaps);for(const je of F)ee.save(),ee.transform(...je.transform),ee.scale(1,-1),T(ee,Ae.canvas,je.x,je.y,je.w,je.h,0,-1,1,1),ee.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(D){}markPointProps(D,F){}beginMarkedContent(D){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(D,F){D==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(F)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(D){const F=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(D);const ee=this.ctx;this.pendingClip&&(F||(this.pendingClip===Le?ee.clip("evenodd"):ee.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ee.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const D=(0,J.getCurrentTransform)(this.ctx);if(D[1]===0&&D[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(D[0]),Math.abs(D[3]));else{const F=Math.abs(D[0]*D[3]-D[2]*D[1]),ee=Math.hypot(D[0],D[2]),le=Math.hypot(D[1],D[3]);this._cachedGetSinglePixelWidth=Math.max(ee,le)/F}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:D}=this.current,F=(0,J.getCurrentTransform)(this.ctx);let ee,le;if(F[1]===0&&F[2]===0){const fe=Math.abs(F[0]),Ae=Math.abs(F[3]);if(D===0)ee=1/fe,le=1/Ae;else{const Ce=fe*D,je=Ae*D;ee=Ce<1?1/Ce:1,le=je<1?1/je:1}}else{const fe=Math.abs(F[0]*F[3]-F[2]*F[1]),Ae=Math.hypot(F[0],F[1]),Ce=Math.hypot(F[2],F[3]);if(D===0)ee=Ce/fe,le=Ae/fe;else{const je=D*fe;ee=Ce>je?Ce/je:1,le=Ae>je?Ae/je:1}}this._cachedScaleForStroking=[ee,le]}return this._cachedScaleForStroking}rescaleAndStroke(D){const{ctx:F}=this,{lineWidth:ee}=this.current,[le,fe]=this.getScaleForStroking();if(F.lineWidth=ee||1,le===1&&fe===1){F.stroke();return}let Ae,Ce,je;D&&(Ae=(0,J.getCurrentTransform)(F),Ce=F.getLineDash().slice(),je=F.lineDashOffset),F.scale(le,fe);const Xe=Math.max(le,fe);F.setLineDash(F.getLineDash().map(Ue=>Ue/Xe)),F.lineDashOffset/=Xe,F.stroke(),D&&(F.setTransform(...Ae),F.setLineDash(Ce),F.lineDashOffset=je)}isContentVisible(){for(let D=this.markedContentStack.length-1;D>=0;D--)if(!this.markedContentStack[D].visible)return!1;return!0}};Re=new WeakSet,Ui=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let Te=et;j.CanvasGraphics=Te;for(const ce in B.OPS)Te.prototype[ce]!==void 0&&(Te.prototype[B.OPS[ce]]=Te.prototype[ce])},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.TilingPattern=j.PathType=void 0,j.getShadingPattern=X;var B=Pe(1),J=Pe(6);const y={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};j.PathType=y;function ve(T,L){if(!L)return;const H=L[2]-L[0],x=L[3]-L[1],P=new Path2D;P.rect(L[0],L[1],H,x),T.clip(P)}class Ne{constructor(){this.constructor===Ne&&(0,B.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,B.unreachable)("Abstract method `getPattern` called.")}}class ye extends Ne{constructor(L){super(),this._type=L[1],this._bbox=L[2],this._colorStops=L[3],this._p0=L[4],this._p1=L[5],this._r0=L[6],this._r1=L[7],this.matrix=null}_createGradient(L){let H;this._type==="axial"?H=L.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(H=L.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)H.addColorStop(x[0],x[1]);return H}getPattern(L,H,x,P){let _;if(P===y.STROKE||P===y.FILL){const A=H.current.getClippedPathBoundingBox(P,(0,J.getCurrentTransform)(L))||[0,0,0,0],N=Math.ceil(A[2]-A[0])||1,ne=Math.ceil(A[3]-A[1])||1,se=H.cachedCanvases.getCanvas("pattern",N,ne,!0),we=se.context;we.clearRect(0,0,we.canvas.width,we.canvas.height),we.beginPath(),we.rect(0,0,we.canvas.width,we.canvas.height),we.translate(-A[0],-A[1]),x=B.Util.transform(x,[1,0,0,1,A[0],A[1]]),we.transform(...H.baseTransform),this.matrix&&we.transform(...this.matrix),ve(we,this._bbox),we.fillStyle=this._createGradient(we),we.fill(),_=L.createPattern(se.canvas,"no-repeat");const Y=new DOMMatrix(x);_.setTransform(Y)}else ve(L,this._bbox),_=this._createGradient(L);return _}}function Q(T,L,H,x,P,_,A,N){const ne=L.coords,se=L.colors,we=T.data,Y=T.width*4;let Me;ne[H+1]>ne[x+1]&&(Me=H,H=x,x=Me,Me=_,_=A,A=Me),ne[x+1]>ne[P+1]&&(Me=x,x=P,P=Me,Me=A,A=N,N=Me),ne[H+1]>ne[x+1]&&(Me=H,H=x,x=Me,Me=_,_=A,A=Me);const Je=(ne[H]+L.offsetX)*L.scaleX,ze=(ne[H+1]+L.offsetY)*L.scaleY,Ge=(ne[x]+L.offsetX)*L.scaleX,Le=(ne[x+1]+L.offsetY)*L.scaleY,Te=(ne[P]+L.offsetX)*L.scaleX,Re=(ne[P+1]+L.offsetY)*L.scaleY;if(ze>=Re)return;const $e=se[_],et=se[_+1],ce=se[_+2],D=se[A],F=se[A+1],ee=se[A+2],le=se[N],fe=se[N+1],Ae=se[N+2],Ce=Math.round(ze),je=Math.round(Re);let Xe,Ue,We,Be,O,G,ie,he;for(let re=Ce;re<=je;re++){if(re<Le){let He;re<ze?He=0:He=(ze-re)/(ze-Le),Xe=Je-(Je-Ge)*He,Ue=$e-($e-D)*He,We=et-(et-F)*He,Be=ce-(ce-ee)*He}else{let He;re>Re?He=1:Le===Re?He=0:He=(Le-re)/(Le-Re),Xe=Ge-(Ge-Te)*He,Ue=D-(D-le)*He,We=F-(F-fe)*He,Be=ee-(ee-Ae)*He}let xe;re<ze?xe=0:re>Re?xe=1:xe=(ze-re)/(ze-Re),O=Je-(Je-Te)*xe,G=$e-($e-le)*xe,ie=et-(et-fe)*xe,he=ce-(ce-Ae)*xe;const Ve=Math.round(Math.min(Xe,O)),Qe=Math.round(Math.max(Xe,O));let rt=Y*re+Ve*4;for(let He=Ve;He<=Qe;He++)xe=(Xe-He)/(Xe-O),xe<0?xe=0:xe>1&&(xe=1),we[rt++]=Ue-(Ue-G)*xe|0,we[rt++]=We-(We-ie)*xe|0,we[rt++]=Be-(Be-he)*xe|0,we[rt++]=255}}function $(T,L,H){const x=L.coords,P=L.colors;let _,A;switch(L.type){case"lattice":const N=L.verticesPerRow,ne=Math.floor(x.length/N)-1,se=N-1;for(_=0;_<ne;_++){let we=_*N;for(let Y=0;Y<se;Y++,we++)Q(T,H,x[we],x[we+1],x[we+N],P[we],P[we+1],P[we+N]),Q(T,H,x[we+N+1],x[we+1],x[we+N],P[we+N+1],P[we+1],P[we+N])}break;case"triangles":for(_=0,A=x.length;_<A;_+=3)Q(T,H,x[_],x[_+1],x[_+2],P[_],P[_+1],P[_+2]);break;default:throw new Error("illegal figure")}}class be extends Ne{constructor(L){super(),this._coords=L[2],this._colors=L[3],this._figures=L[4],this._bounds=L[5],this._bbox=L[7],this._background=L[8],this.matrix=null}_createMeshCanvas(L,H,x){const N=Math.floor(this._bounds[0]),ne=Math.floor(this._bounds[1]),se=Math.ceil(this._bounds[2])-N,we=Math.ceil(this._bounds[3])-ne,Y=Math.min(Math.ceil(Math.abs(se*L[0]*1.1)),3e3),Me=Math.min(Math.ceil(Math.abs(we*L[1]*1.1)),3e3),Je=se/Y,ze=we/Me,Ge={coords:this._coords,colors:this._colors,offsetX:-N,offsetY:-ne,scaleX:1/Je,scaleY:1/ze},Le=Y+2*2,Te=Me+2*2,Re=x.getCanvas("mesh",Le,Te,!1),$e=Re.context,et=$e.createImageData(Y,Me);if(H){const D=et.data;for(let F=0,ee=D.length;F<ee;F+=4)D[F]=H[0],D[F+1]=H[1],D[F+2]=H[2],D[F+3]=255}for(const D of this._figures)$(et,D,Ge);return $e.putImageData(et,2,2),{canvas:Re.canvas,offsetX:N-2*Je,offsetY:ne-2*ze,scaleX:Je,scaleY:ze}}getPattern(L,H,x,P){ve(L,this._bbox);let _;if(P===y.SHADING)_=B.Util.singularValueDecompose2dScale((0,J.getCurrentTransform)(L));else if(_=B.Util.singularValueDecompose2dScale(H.baseTransform),this.matrix){const N=B.Util.singularValueDecompose2dScale(this.matrix);_=[_[0]*N[0],_[1]*N[1]]}const A=this._createMeshCanvas(_,P===y.SHADING?null:this._background,H.cachedCanvases);return P!==y.SHADING&&(L.setTransform(...H.baseTransform),this.matrix&&L.transform(...this.matrix)),L.translate(A.offsetX,A.offsetY),L.scale(A.scaleX,A.scaleY),L.createPattern(A.canvas,"no-repeat")}}class te extends Ne{getPattern(){return"hotpink"}}function X(T){switch(T[0]){case"RadialAxial":return new ye(T);case"Mesh":return new be(T);case"Dummy":return new te}throw new Error(`Unknown IR type: ${T[0]}`)}const U={COLORED:1,UNCOLORED:2};class V{static get MAX_PATTERN_SIZE(){return(0,B.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(L,H,x,P,_){this.operatorList=L[2],this.matrix=L[3]||[1,0,0,1,0,0],this.bbox=L[4],this.xstep=L[5],this.ystep=L[6],this.paintType=L[7],this.tilingType=L[8],this.color=H,this.ctx=x,this.canvasGraphicsFactory=P,this.baseTransform=_}createPatternCanvas(L){const H=this.operatorList,x=this.bbox,P=this.xstep,_=this.ystep,A=this.paintType,N=this.tilingType,ne=this.color,se=this.canvasGraphicsFactory;(0,B.info)("TilingType: "+N);const we=x[0],Y=x[1],Me=x[2],Je=x[3],ze=B.Util.singularValueDecompose2dScale(this.matrix),Ge=B.Util.singularValueDecompose2dScale(this.baseTransform),Le=[ze[0]*Ge[0],ze[1]*Ge[1]],Te=this.getSizeAndScale(P,this.ctx.canvas.width,Le[0]),Re=this.getSizeAndScale(_,this.ctx.canvas.height,Le[1]),$e=L.cachedCanvases.getCanvas("pattern",Te.size,Re.size,!0),et=$e.context,ce=se.createCanvasGraphics(et);ce.groupLevel=L.groupLevel,this.setFillAndStrokeStyleToContext(ce,A,ne);let D=we,F=Y,ee=Me,le=Je;return we<0&&(D=0,ee+=Math.abs(we)),Y<0&&(F=0,le+=Math.abs(Y)),et.translate(-(Te.scale*D),-(Re.scale*F)),ce.transform(Te.scale,0,0,Re.scale,0,0),et.save(),this.clipBbox(ce,D,F,ee,le),ce.baseTransform=(0,J.getCurrentTransform)(ce.ctx),ce.executeOperatorList(H),ce.endDrawing(),{canvas:$e.canvas,scaleX:Te.scale,scaleY:Re.scale,offsetX:D,offsetY:F}}getSizeAndScale(L,H,x){L=Math.abs(L);const P=Math.max(V.MAX_PATTERN_SIZE,H);let _=Math.ceil(L*x);return _>=P?_=P:x=_/L,{scale:x,size:_}}clipBbox(L,H,x,P,_){const A=P-H,N=_-x;L.ctx.rect(H,x,A,N),L.current.updateRectMinMax((0,J.getCurrentTransform)(L.ctx),[H,x,P,_]),L.clip(),L.endPath()}setFillAndStrokeStyleToContext(L,H,x){const P=L.ctx,_=L.current;switch(H){case U.COLORED:const A=this.ctx;P.fillStyle=A.fillStyle,P.strokeStyle=A.strokeStyle,_.fillColor=A.fillStyle,_.strokeColor=A.strokeStyle;break;case U.UNCOLORED:const N=B.Util.makeHexColor(x[0],x[1],x[2]);P.fillStyle=N,P.strokeStyle=N,_.fillColor=N,_.strokeColor=N;break;default:throw new B.FormatError(`Unsupported paint type: ${H}`)}}getPattern(L,H,x,P){let _=x;P!==y.SHADING&&(_=B.Util.transform(_,H.baseTransform),this.matrix&&(_=B.Util.transform(_,this.matrix)));const A=this.createPatternCanvas(H);let N=new DOMMatrix(_);N=N.translate(A.offsetX,A.offsetY),N=N.scale(1/A.scaleX,1/A.scaleY);const ne=L.createPattern(A.canvas,"repeat");return ne.setTransform(N),ne}}j.TilingPattern=V},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.applyMaskImageData=J;var B=Pe(1);function J({src:y,srcPos:ve=0,dest:Ne,destPos:ye=0,width:Q,height:$,inverseDecode:be=!1}){const te=B.FeatureTest.isLittleEndian?4278190080:255,[X,U]=be?[0,te]:[te,0],V=Q>>3,T=Q&7,L=y.length;Ne=new Uint32Array(Ne.buffer);for(let H=0;H<$;H++){for(const P=ve+V;ve<P;ve++){const _=ve<L?y[ve]:255;Ne[ye++]=_&128?U:X,Ne[ye++]=_&64?U:X,Ne[ye++]=_&32?U:X,Ne[ye++]=_&16?U:X,Ne[ye++]=_&8?U:X,Ne[ye++]=_&4?U:X,Ne[ye++]=_&2?U:X,Ne[ye++]=_&1?U:X}if(T===0)continue;const x=ve<L?y[ve++]:255;for(let P=0;P<T;P++)Ne[ye++]=x&1<<7-P?U:X}return{srcPos:ve,destPos:ye}}},(R,j)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.GlobalWorkerOptions=void 0;const Pe=Object.create(null);j.GlobalWorkerOptions=Pe,Pe.workerPort=null,Pe.workerSrc=""},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.MessageHandler=void 0;var B=Pe(1);const J={UNKNOWN:0,DATA:1,ERROR:2},y={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ve(ye){switch(ye instanceof Error||typeof ye=="object"&&ye!==null||(0,B.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ye.name){case"AbortException":return new B.AbortException(ye.message);case"MissingPDFException":return new B.MissingPDFException(ye.message);case"PasswordException":return new B.PasswordException(ye.message,ye.code);case"UnexpectedResponseException":return new B.UnexpectedResponseException(ye.message,ye.status);case"UnknownErrorException":return new B.UnknownErrorException(ye.message,ye.details);default:return new B.UnknownErrorException(ye.message,ye.toString())}}class Ne{constructor(Q,$,be){this.sourceName=Q,this.targetName=$,this.comObj=be,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=te=>{const X=te.data;if(X.targetName!==this.sourceName)return;if(X.stream){this._processStreamMessage(X);return}if(X.callback){const V=X.callbackId,T=this.callbackCapabilities[V];if(!T)throw new Error(`Cannot resolve callback ${V}`);if(delete this.callbackCapabilities[V],X.callback===J.DATA)T.resolve(X.data);else if(X.callback===J.ERROR)T.reject(ve(X.reason));else throw new Error("Unexpected callback case");return}const U=this.actionHandler[X.action];if(!U)throw new Error(`Unknown action from worker: ${X.action}`);if(X.callbackId){const V=this.sourceName,T=X.sourceName;new Promise(function(L){L(U(X.data))}).then(function(L){be.postMessage({sourceName:V,targetName:T,callback:J.DATA,callbackId:X.callbackId,data:L})},function(L){be.postMessage({sourceName:V,targetName:T,callback:J.ERROR,callbackId:X.callbackId,reason:ve(L)})});return}if(X.streamId){this._createStreamSink(X);return}U(X.data)},be.addEventListener("message",this._onComObjOnMessage)}on(Q,$){const be=this.actionHandler;if(be[Q])throw new Error(`There is already an actionName called "${Q}"`);be[Q]=$}send(Q,$,be){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Q,data:$},be)}sendWithPromise(Q,$,be){const te=this.callbackId++,X=(0,B.createPromiseCapability)();this.callbackCapabilities[te]=X;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Q,callbackId:te,data:$},be)}catch(U){X.reject(U)}return X.promise}sendWithStream(Q,$,be,te){const X=this.streamId++,U=this.sourceName,V=this.targetName,T=this.comObj;return new ReadableStream({start:L=>{const H=(0,B.createPromiseCapability)();return this.streamControllers[X]={controller:L,startCall:H,pullCall:null,cancelCall:null,isClosed:!1},T.postMessage({sourceName:U,targetName:V,action:Q,streamId:X,data:$,desiredSize:L.desiredSize},te),H.promise},pull:L=>{const H=(0,B.createPromiseCapability)();return this.streamControllers[X].pullCall=H,T.postMessage({sourceName:U,targetName:V,stream:y.PULL,streamId:X,desiredSize:L.desiredSize}),H.promise},cancel:L=>{(0,B.assert)(L instanceof Error,"cancel must have a valid reason");const H=(0,B.createPromiseCapability)();return this.streamControllers[X].cancelCall=H,this.streamControllers[X].isClosed=!0,T.postMessage({sourceName:U,targetName:V,stream:y.CANCEL,streamId:X,reason:ve(L)}),H.promise}},be)}_createStreamSink(Q){const $=Q.streamId,be=this.sourceName,te=Q.sourceName,X=this.comObj,U=this,V=this.actionHandler[Q.action],T={enqueue(L,H=1,x){if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=H,P>0&&this.desiredSize<=0&&(this.sinkCapability=(0,B.createPromiseCapability)(),this.ready=this.sinkCapability.promise),X.postMessage({sourceName:be,targetName:te,stream:y.ENQUEUE,streamId:$,chunk:L},x)},close(){this.isCancelled||(this.isCancelled=!0,X.postMessage({sourceName:be,targetName:te,stream:y.CLOSE,streamId:$}),delete U.streamSinks[$])},error(L){(0,B.assert)(L instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,X.postMessage({sourceName:be,targetName:te,stream:y.ERROR,streamId:$,reason:ve(L)}))},sinkCapability:(0,B.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:Q.desiredSize,ready:null};T.sinkCapability.resolve(),T.ready=T.sinkCapability.promise,this.streamSinks[$]=T,new Promise(function(L){L(V(Q.data,T))}).then(function(){X.postMessage({sourceName:be,targetName:te,stream:y.START_COMPLETE,streamId:$,success:!0})},function(L){X.postMessage({sourceName:be,targetName:te,stream:y.START_COMPLETE,streamId:$,reason:ve(L)})})}_processStreamMessage(Q){const $=Q.streamId,be=this.sourceName,te=Q.sourceName,X=this.comObj,U=this.streamControllers[$],V=this.streamSinks[$];switch(Q.stream){case y.START_COMPLETE:Q.success?U.startCall.resolve():U.startCall.reject(ve(Q.reason));break;case y.PULL_COMPLETE:Q.success?U.pullCall.resolve():U.pullCall.reject(ve(Q.reason));break;case y.PULL:if(!V){X.postMessage({sourceName:be,targetName:te,stream:y.PULL_COMPLETE,streamId:$,success:!0});break}V.desiredSize<=0&&Q.desiredSize>0&&V.sinkCapability.resolve(),V.desiredSize=Q.desiredSize,new Promise(function(T){T(V.onPull&&V.onPull())}).then(function(){X.postMessage({sourceName:be,targetName:te,stream:y.PULL_COMPLETE,streamId:$,success:!0})},function(T){X.postMessage({sourceName:be,targetName:te,stream:y.PULL_COMPLETE,streamId:$,reason:ve(T)})});break;case y.ENQUEUE:if((0,B.assert)(U,"enqueue should have stream controller"),U.isClosed)break;U.controller.enqueue(Q.chunk);break;case y.CLOSE:if((0,B.assert)(U,"close should have stream controller"),U.isClosed)break;U.isClosed=!0,U.controller.close(),this._deleteStreamController(U,$);break;case y.ERROR:(0,B.assert)(U,"error should have stream controller"),U.controller.error(ve(Q.reason)),this._deleteStreamController(U,$);break;case y.CANCEL_COMPLETE:Q.success?U.cancelCall.resolve():U.cancelCall.reject(ve(Q.reason)),this._deleteStreamController(U,$);break;case y.CANCEL:if(!V)break;new Promise(function(T){T(V.onCancel&&V.onCancel(ve(Q.reason)))}).then(function(){X.postMessage({sourceName:be,targetName:te,stream:y.CANCEL_COMPLETE,streamId:$,success:!0})},function(T){X.postMessage({sourceName:be,targetName:te,stream:y.CANCEL_COMPLETE,streamId:$,reason:ve(T)})}),V.sinkCapability.reject(ve(Q.reason)),V.isCancelled=!0,delete this.streamSinks[$];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(Q,$){await Promise.allSettled([Q.startCall&&Q.startCall.promise,Q.pullCall&&Q.pullCall.promise,Q.cancelCall&&Q.cancelCall.promise]),delete this.streamControllers[$]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}j.MessageHandler=Ne},(R,j,Pe)=>{var y,ve;Object.defineProperty(j,"__esModule",{value:!0}),j.Metadata=void 0;var B=Pe(1);class J{constructor({parsedData:ye,rawData:Q}){qe(this,y,void 0);qe(this,ve,void 0);pt(this,y,ye),pt(this,ve,Q)}getRaw(){return K(this,ve)}get(ye){return K(this,y).get(ye)??null}getAll(){return(0,B.objectFromMap)(K(this,y))}has(ye){return K(this,y).has(ye)}}y=new WeakMap,ve=new WeakMap,j.Metadata=J},(R,j,Pe)=>{var ye,Q,$,be,te,X,Hi;Object.defineProperty(j,"__esModule",{value:!0}),j.OptionalContentConfig=void 0;var B=Pe(1),J=Pe(8);const y=Symbol("INTERNAL");class ve{constructor(T,L){qe(this,ye,!0);this.name=T,this.intent=L}get visible(){return K(this,ye)}_setVisible(T,L){T!==y&&(0,B.unreachable)("Internal method `_setVisible` called."),pt(this,ye,L)}}ye=new WeakMap;class Ne{constructor(T){qe(this,X);qe(this,Q,null);qe(this,$,new Map);qe(this,be,null);qe(this,te,null);if(this.name=null,this.creator=null,T!==null){this.name=T.name,this.creator=T.creator,pt(this,te,T.order);for(const L of T.groups)K(this,$).set(L.id,new ve(L.name,L.intent));if(T.baseState==="OFF")for(const L of K(this,$).values())L._setVisible(y,!1);for(const L of T.on)K(this,$).get(L)._setVisible(y,!0);for(const L of T.off)K(this,$).get(L)._setVisible(y,!1);pt(this,be,this.getHash())}}isVisible(T){if(K(this,$).size===0)return!0;if(!T)return(0,B.warn)("Optional content group not defined."),!0;if(T.type==="OCG")return K(this,$).has(T.id)?K(this,$).get(T.id).visible:((0,B.warn)(`Optional content group not found: ${T.id}`),!0);if(T.type==="OCMD"){if(T.expression)return tt(this,X,Hi).call(this,T.expression);if(!T.policy||T.policy==="AnyOn"){for(const L of T.ids){if(!K(this,$).has(L))return(0,B.warn)(`Optional content group not found: ${L}`),!0;if(K(this,$).get(L).visible)return!0}return!1}else if(T.policy==="AllOn"){for(const L of T.ids){if(!K(this,$).has(L))return(0,B.warn)(`Optional content group not found: ${L}`),!0;if(!K(this,$).get(L).visible)return!1}return!0}else if(T.policy==="AnyOff"){for(const L of T.ids){if(!K(this,$).has(L))return(0,B.warn)(`Optional content group not found: ${L}`),!0;if(!K(this,$).get(L).visible)return!0}return!1}else if(T.policy==="AllOff"){for(const L of T.ids){if(!K(this,$).has(L))return(0,B.warn)(`Optional content group not found: ${L}`),!0;if(K(this,$).get(L).visible)return!1}return!0}return(0,B.warn)(`Unknown optional content policy ${T.policy}.`),!0}return(0,B.warn)(`Unknown group type ${T.type}.`),!0}setVisibility(T,L=!0){if(!K(this,$).has(T)){(0,B.warn)(`Optional content group not found: ${T}`);return}K(this,$).get(T)._setVisible(y,!!L),pt(this,Q,null)}get hasInitialVisibility(){return this.getHash()===K(this,be)}getOrder(){return K(this,$).size?K(this,te)?K(this,te).slice():[...K(this,$).keys()]:null}getGroups(){return K(this,$).size>0?(0,B.objectFromMap)(K(this,$)):null}getGroup(T){return K(this,$).get(T)||null}getHash(){if(K(this,Q)!==null)return K(this,Q);const T=new J.MurmurHash3_64;for(const[L,H]of K(this,$))T.update(`${L}:${H.visible}`);return pt(this,Q,T.hexdigest())}}Q=new WeakMap,$=new WeakMap,be=new WeakMap,te=new WeakMap,X=new WeakSet,Hi=function(T){const L=T.length;if(L<2)return!0;const H=T[0];for(let x=1;x<L;x++){const P=T[x];let _;if(Array.isArray(P))_=tt(this,X,Hi).call(this,P);else if(K(this,$).has(P))_=K(this,$).get(P).visible;else return(0,B.warn)(`Optional content group not found: ${P}`),!0;switch(H){case"And":if(!_)return!1;break;case"Or":if(_)return!0;break;case"Not":return!_;default:return!0}}return H==="And"},j.OptionalContentConfig=Ne},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.PDFDataTransportStream=void 0;var B=Pe(1),J=Pe(6);class y{constructor({length:Q,initialData:$,progressiveDone:be=!1,contentDispositionFilename:te=null,disableRange:X=!1,disableStream:U=!1},V){if((0,B.assert)(V,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=be,this._contentDispositionFilename=te,($==null?void 0:$.length)>0){const T=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;this._queuedChunks.push(T)}this._pdfDataRangeTransport=V,this._isStreamingSupported=!U,this._isRangeSupported=!X,this._contentLength=Q,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((T,L)=>{this._onReceiveData({begin:T,chunk:L})}),this._pdfDataRangeTransport.addProgressListener((T,L)=>{this._onProgress({loaded:T,total:L})}),this._pdfDataRangeTransport.addProgressiveReadListener(T=>{this._onReceiveData({chunk:T})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:Q,chunk:$}){const be=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;if(Q===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(be):this._queuedChunks.push(be);else{const te=this._rangeReaders.some(function(X){return X._begin!==Q?!1:(X._enqueue(be),!0)});(0,B.assert)(te,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var Q;return((Q=this._fullRequestReader)==null?void 0:Q._loaded)??0}_onProgress(Q){var $,be,te,X;Q.total===void 0?(be=($=this._rangeReaders[0])==null?void 0:$.onProgress)==null||be.call($,{loaded:Q.loaded}):(X=(te=this._fullRequestReader)==null?void 0:te.onProgress)==null||X.call(te,{loaded:Q.loaded,total:Q.total})}_onProgressiveDone(){var Q;(Q=this._fullRequestReader)==null||Q.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(Q){const $=this._rangeReaders.indexOf(Q);$>=0&&this._rangeReaders.splice($,1)}getFullReader(){(0,B.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const Q=this._queuedChunks;return this._queuedChunks=null,new ve(this,Q,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(Q,$){if($<=this._progressiveDataLength)return null;const be=new Ne(this,Q,$);return this._pdfDataRangeTransport.requestDataRange(Q,$),this._rangeReaders.push(be),be}cancelAllRequests(Q){var $;($=this._fullRequestReader)==null||$.cancel(Q);for(const be of this._rangeReaders.slice(0))be.cancel(Q);this._pdfDataRangeTransport.abort()}}j.PDFDataTransportStream=y;class ve{constructor(Q,$,be=!1,te=null){this._stream=Q,this._done=be||!1,this._filename=(0,J.isPdfFile)(te)?te:null,this._queuedChunks=$||[],this._loaded=0;for(const X of this._queuedChunks)this._loaded+=X.byteLength;this._requests=[],this._headersReady=Promise.resolve(),Q._fullRequestReader=this,this.onProgress=null}_enqueue(Q){this._done||(this._requests.length>0?this._requests.shift().resolve({value:Q,done:!1}):this._queuedChunks.push(Q),this._loaded+=Q.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Q=(0,B.createPromiseCapability)();return this._requests.push(Q),Q.promise}cancel(Q){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ne{constructor(Q,$,be){this._stream=Q,this._begin=$,this._end=be,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(Q){if(!this._done){if(this._requests.length===0)this._queuedChunk=Q;else{this._requests.shift().resolve({value:Q,done:!1});for(const be of this._requests)be.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const $=this._queuedChunk;return this._queuedChunk=null,{value:$,done:!1}}if(this._done)return{value:void 0,done:!0};const Q=(0,B.createPromiseCapability)();return this._requests.push(Q),Q.promise}cancel(Q){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(R,j)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.XfaText=void 0;class Pe{static textContent(J){const y=[],ve={items:y,styles:Object.create(null)};function Ne(ye){var be;if(!ye)return;let Q=null;const $=ye.name;if($==="#text")Q=ye.value;else if(Pe.shouldBuildText($))(be=ye==null?void 0:ye.attributes)!=null&&be.textContent?Q=ye.attributes.textContent:ye.value&&(Q=ye.value);else return;if(Q!==null&&y.push({str:Q}),!!ye.children)for(const te of ye.children)Ne(te)}return Ne(J),ve}static shouldBuildText(J){return!(J==="textarea"||J==="input"||J==="option"||J==="select")}}j.XfaText=Pe},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.NodeStandardFontDataFactory=j.NodeCanvasFactory=j.NodeCMapReaderFactory=void 0;var B=Pe(7);const J=function(ye){return new Promise((Q,$)=>{require$$5.readFile(ye,(te,X)=>{if(te||!X){$(new Error(te));return}Q(new Uint8Array(X))})})};class y extends B.BaseCanvasFactory{_createCanvas(Q,$){return require$$5.createCanvas(Q,$)}}j.NodeCanvasFactory=y;class ve extends B.BaseCMapReaderFactory{_fetchData(Q,$){return J(Q).then(be=>({cMapData:be,compressionType:$}))}}j.NodeCMapReaderFactory=ve;class Ne extends B.BaseStandardFontDataFactory{_fetchData(Q){return J(Q)}}j.NodeStandardFontDataFactory=Ne},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.PDFNodeStream=void 0;var B=Pe(1),J=Pe(22);const y=require$$5,ve=require$$5,Ne=require$$5,ye=require$$5,Q=/^file:\/\/\/[a-zA-Z]:\//;function $(x){const P=ye.parse(x);return P.protocol==="file:"||P.host?P:/^[a-z]:[/\\]/i.test(x)?ye.parse(`file:///${x}`):(P.host||(P.protocol="file:"),P)}class be{constructor(P){this.source=P,this.url=$(P.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,B.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new L(this):new V(this),this._fullRequestReader}getRangeReader(P,_){if(_<=this._progressiveDataLength)return null;const A=this.isFsUrl?new H(this,P,_):new T(this,P,_);return this._rangeRequestReaders.push(A),A}cancelAllRequests(P){var _;(_=this._fullRequestReader)==null||_.cancel(P);for(const A of this._rangeRequestReaders.slice(0))A.cancel(P)}}j.PDFNodeStream=be;class te{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=P.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=(0,B.createPromiseCapability)(),this._headersCapability=(0,B.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=(0,B.createPromiseCapability)(),this.read()):(this._loaded+=P.length,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new B.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class X{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,B.createPromiseCapability)();const _=P.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=(0,B.createPromiseCapability)(),this.read()):(this._loaded+=P.length,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function U(x,P){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:P}}class V extends te{constructor(P){super(P);const _=A=>{if(A.statusCode===404){const we=new B.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=we,this._headersCapability.reject(we);return}this._headersCapability.resolve(),this._setReadableStream(A);const N=we=>this._readableStream.headers[we.toLowerCase()],{allowRangeRequests:ne,suggestedLength:se}=(0,J.validateRangeRequestCapabilities)({getResponseHeader:N,isHttp:P.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ne,this._contentLength=se||this._contentLength,this._filename=(0,J.extractFilenameFromHeader)(N)};this._request=null,this._url.protocol==="http:"?this._request=ve.request(U(this._url,P.httpHeaders),_):this._request=Ne.request(U(this._url,P.httpHeaders),_),this._request.on("error",A=>{this._storedError=A,this._headersCapability.reject(A)}),this._request.end()}}class T extends X{constructor(P,_,A){super(P),this._httpHeaders={};for(const ne in P.httpHeaders){const se=P.httpHeaders[ne];se!==void 0&&(this._httpHeaders[ne]=se)}this._httpHeaders.Range=`bytes=${_}-${A-1}`;const N=ne=>{if(ne.statusCode===404){const se=new B.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=se;return}this._setReadableStream(ne)};this._request=null,this._url.protocol==="http:"?this._request=ve.request(U(this._url,this._httpHeaders),N):this._request=Ne.request(U(this._url,this._httpHeaders),N),this._request.on("error",ne=>{this._storedError=ne}),this._request.end()}}class L extends te{constructor(P){super(P);let _=decodeURIComponent(this._url.path);Q.test(this._url.href)&&(_=_.replace(/^\//,"")),y.lstat(_,(A,N)=>{if(A){A.code==="ENOENT"&&(A=new B.MissingPDFException(`Missing PDF "${_}".`)),this._storedError=A,this._headersCapability.reject(A);return}this._contentLength=N.size,this._setReadableStream(y.createReadStream(_)),this._headersCapability.resolve()})}}class H extends X{constructor(P,_,A){super(P);let N=decodeURIComponent(this._url.path);Q.test(this._url.href)&&(N=N.replace(/^\//,"")),this._setReadableStream(y.createReadStream(N,{start:_,end:A-1}))}}},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.createResponseStatusError=ye,j.extractFilenameFromHeader=Ne,j.validateRangeRequestCapabilities=ve,j.validateResponseStatus=Q;var B=Pe(1),J=Pe(23),y=Pe(6);function ve({getResponseHeader:$,isHttp:be,rangeChunkSize:te,disableRange:X}){const U={allowRangeRequests:!1,suggestedLength:void 0},V=parseInt($("Content-Length"),10);return!Number.isInteger(V)||(U.suggestedLength=V,V<=2*te)||X||!be||$("Accept-Ranges")!=="bytes"||($("Content-Encoding")||"identity")!=="identity"||(U.allowRangeRequests=!0),U}function Ne($){const be=$("Content-Disposition");if(be){let te=(0,J.getFilenameFromContentDispositionHeader)(be);if(te.includes("%"))try{te=decodeURIComponent(te)}catch{}if((0,y.isPdfFile)(te))return te}return null}function ye($,be){return $===404||$===0&&be.startsWith("file:")?new B.MissingPDFException('Missing PDF "'+be+'".'):new B.UnexpectedResponseException(`Unexpected server response (${$}) while retrieving PDF "${be}".`,$)}function Q($){return $===200||$===206}},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.getFilenameFromContentDispositionHeader=J;var B=Pe(1);function J(y){let ve=!0,Ne=ye("filename\\*","i").exec(y);if(Ne){Ne=Ne[1];let V=te(Ne);return V=unescape(V),V=X(V),V=U(V),$(V)}if(Ne=be(y),Ne){const V=U(Ne);return $(V)}if(Ne=ye("filename","i").exec(y),Ne){Ne=Ne[1];let V=te(Ne);return V=U(V),$(V)}function ye(V,T){return new RegExp("(?:^|;)\\s*"+V+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',T)}function Q(V,T){if(V){if(!/^[\x00-\xFF]+$/.test(T))return T;try{const L=new TextDecoder(V,{fatal:!0}),H=(0,B.stringToBytes)(T);T=L.decode(H),ve=!1}catch{}}return T}function $(V){return ve&&/[\x80-\xff]/.test(V)&&(V=Q("utf-8",V),ve&&(V=Q("iso-8859-1",V))),V}function be(V){const T=[];let L;const H=ye("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(L=H.exec(V))!==null;){let[,P,_,A]=L;if(P=parseInt(P,10),P in T){if(P===0)break;continue}T[P]=[_,A]}const x=[];for(let P=0;P<T.length&&P in T;++P){let[_,A]=T[P];A=te(A),_&&(A=unescape(A),P===0&&(A=X(A))),x.push(A)}return x.join("")}function te(V){if(V.startsWith('"')){const T=V.slice(1).split('\\"');for(let L=0;L<T.length;++L){const H=T[L].indexOf('"');H!==-1&&(T[L]=T[L].slice(0,H),T.length=L+1),T[L]=T[L].replace(/\\(.)/g,"$1")}V=T.join('"')}return V}function X(V){const T=V.indexOf("'");if(T===-1)return V;const L=V.slice(0,T),x=V.slice(T+1).replace(/^[^']*'/,"");return Q(L,x)}function U(V){return!V.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(V)?V:V.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(T,L,H,x){if(H==="q"||H==="Q")return x=x.replace(/_/g," "),x=x.replace(/=([0-9a-fA-F]{2})/g,function(P,_){return String.fromCharCode(parseInt(_,16))}),Q(L,x);try{x=atob(x)}catch{}return Q(L,x)})}return""}},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.PDFNetworkStream=void 0;var B=Pe(1),J=Pe(22);const y=200,ve=206;function Ne(te){const X=te.response;return typeof X!="string"?X:(0,B.stringToBytes)(X).buffer}class ye{constructor(X,U={}){this.url=X,this.isHttp=/^https?:/i.test(X),this.httpHeaders=this.isHttp&&U.httpHeaders||Object.create(null),this.withCredentials=U.withCredentials||!1,this.getXhr=U.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(X,U,V){const T={begin:X,end:U};for(const L in V)T[L]=V[L];return this.request(T)}requestFull(X){return this.request(X)}request(X){const U=this.getXhr(),V=this.currXhrId++,T=this.pendingRequests[V]={xhr:U};U.open("GET",this.url),U.withCredentials=this.withCredentials;for(const L in this.httpHeaders){const H=this.httpHeaders[L];H!==void 0&&U.setRequestHeader(L,H)}return this.isHttp&&"begin"in X&&"end"in X?(U.setRequestHeader("Range",`bytes=${X.begin}-${X.end-1}`),T.expectedStatus=ve):T.expectedStatus=y,U.responseType="arraybuffer",X.onError&&(U.onerror=function(L){X.onError(U.status)}),U.onreadystatechange=this.onStateChange.bind(this,V),U.onprogress=this.onProgress.bind(this,V),T.onHeadersReceived=X.onHeadersReceived,T.onDone=X.onDone,T.onError=X.onError,T.onProgress=X.onProgress,U.send(null),V}onProgress(X,U){var T;const V=this.pendingRequests[X];V&&((T=V.onProgress)==null||T.call(V,U))}onStateChange(X,U){var P,_,A;const V=this.pendingRequests[X];if(!V)return;const T=V.xhr;if(T.readyState>=2&&V.onHeadersReceived&&(V.onHeadersReceived(),delete V.onHeadersReceived),T.readyState!==4||!(X in this.pendingRequests))return;if(delete this.pendingRequests[X],T.status===0&&this.isHttp){(P=V.onError)==null||P.call(V,T.status);return}const L=T.status||y;if(!(L===y&&V.expectedStatus===ve)&&L!==V.expectedStatus){(_=V.onError)==null||_.call(V,T.status);return}const x=Ne(T);if(L===ve){const N=T.getResponseHeader("Content-Range"),ne=/bytes (\d+)-(\d+)\/(\d+)/.exec(N);V.onDone({begin:parseInt(ne[1],10),chunk:x})}else x?V.onDone({begin:0,chunk:x}):(A=V.onError)==null||A.call(V,T.status)}getRequestXhr(X){return this.pendingRequests[X].xhr}isPendingRequest(X){return X in this.pendingRequests}abortRequest(X){const U=this.pendingRequests[X].xhr;delete this.pendingRequests[X],U.abort()}}class Q{constructor(X){this._source=X,this._manager=new ye(X.url,{httpHeaders:X.httpHeaders,withCredentials:X.withCredentials}),this._rangeChunkSize=X.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(X){const U=this._rangeRequestReaders.indexOf(X);U>=0&&this._rangeRequestReaders.splice(U,1)}getFullReader(){return(0,B.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $(this._manager,this._source),this._fullRequestReader}getRangeReader(X,U){const V=new be(this._manager,X,U);return V.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(V),V}cancelAllRequests(X){var U;(U=this._fullRequestReader)==null||U.cancel(X);for(const V of this._rangeRequestReaders.slice(0))V.cancel(X)}}j.PDFNetworkStream=Q;class ${constructor(X,U){this._manager=X;const V={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=U.url,this._fullRequestId=X.requestFull(V),this._headersReceivedCapability=(0,B.createPromiseCapability)(),this._disableRange=U.disableRange||!1,this._contentLength=U.length,this._rangeChunkSize=U.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const X=this._fullRequestId,U=this._manager.getRequestXhr(X),V=H=>U.getResponseHeader(H),{allowRangeRequests:T,suggestedLength:L}=(0,J.validateRangeRequestCapabilities)({getResponseHeader:V,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});T&&(this._isRangeSupported=!0),this._contentLength=L||this._contentLength,this._filename=(0,J.extractFilenameFromHeader)(V),this._isRangeSupported&&this._manager.abortRequest(X),this._headersReceivedCapability.resolve()}_onDone(X){if(X&&(this._requests.length>0?this._requests.shift().resolve({value:X.chunk,done:!1}):this._cachedChunks.push(X.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(X){this._storedError=(0,J.createResponseStatusError)(X,this._url),this._headersReceivedCapability.reject(this._storedError);for(const U of this._requests)U.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(X){var U;(U=this.onProgress)==null||U.call(this,{loaded:X.loaded,total:X.lengthComputable?X.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const X=(0,B.createPromiseCapability)();return this._requests.push(X),X.promise}cancel(X){this._done=!0,this._headersReceivedCapability.reject(X);for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class be{constructor(X,U,V){this._manager=X;const T={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=X.url,this._requestId=X.requestRange(U,V,T),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var X;(X=this.onClosed)==null||X.call(this,this)}_onDone(X){const U=X.chunk;this._requests.length>0?this._requests.shift().resolve({value:U,done:!1}):this._queuedChunk=U,this._done=!0;for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(X){this._storedError=(0,J.createResponseStatusError)(X,this._url);for(const U of this._requests)U.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(X){var U;this.isStreamingSupported||(U=this.onProgress)==null||U.call(this,{loaded:X.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const U=this._queuedChunk;return this._queuedChunk=null,{value:U,done:!1}}if(this._done)return{value:void 0,done:!0};const X=(0,B.createPromiseCapability)();return this._requests.push(X),X.promise}cancel(X){this._done=!0;for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.PDFFetchStream=void 0;var B=Pe(1),J=Pe(22);function y(be,te,X){return{method:"GET",headers:be,signal:X.signal,mode:"cors",credentials:te?"include":"same-origin",redirect:"follow"}}function ve(be){const te=new Headers;for(const X in be){const U=be[X];U!==void 0&&te.append(X,U)}return te}function Ne(be){return be instanceof Uint8Array?be.buffer:be instanceof ArrayBuffer?be:((0,B.warn)(`getArrayBuffer - unexpected data format: ${be}`),new Uint8Array(be).buffer)}class ye{constructor(te){this.source=te,this.isHttp=/^https?:/i.test(te.url),this.httpHeaders=this.isHttp&&te.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var te;return((te=this._fullRequestReader)==null?void 0:te._loaded)??0}getFullReader(){return(0,B.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Q(this),this._fullRequestReader}getRangeReader(te,X){if(X<=this._progressiveDataLength)return null;const U=new $(this,te,X);return this._rangeRequestReaders.push(U),U}cancelAllRequests(te){var X;(X=this._fullRequestReader)==null||X.cancel(te);for(const U of this._rangeRequestReaders.slice(0))U.cancel(te)}}j.PDFFetchStream=ye;class Q{constructor(te){this._stream=te,this._reader=null,this._loaded=0,this._filename=null;const X=te.source;this._withCredentials=X.withCredentials||!1,this._contentLength=X.length,this._headersCapability=(0,B.createPromiseCapability)(),this._disableRange=X.disableRange||!1,this._rangeChunkSize=X.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!X.disableStream,this._isRangeSupported=!X.disableRange,this._headers=ve(this._stream.httpHeaders);const U=X.url;fetch(U,y(this._headers,this._withCredentials,this._abortController)).then(V=>{if(!(0,J.validateResponseStatus)(V.status))throw(0,J.createResponseStatusError)(V.status,U);this._reader=V.body.getReader(),this._headersCapability.resolve();const T=x=>V.headers.get(x),{allowRangeRequests:L,suggestedLength:H}=(0,J.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=L,this._contentLength=H||this._contentLength,this._filename=(0,J.extractFilenameFromHeader)(T),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new B.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var U;await this._headersCapability.promise;const{value:te,done:X}=await this._reader.read();return X?{value:te,done:X}:(this._loaded+=te.byteLength,(U=this.onProgress)==null||U.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Ne(te),done:!1})}cancel(te){var X;(X=this._reader)==null||X.cancel(te),this._abortController.abort()}}class ${constructor(te,X,U){this._stream=te,this._reader=null,this._loaded=0;const V=te.source;this._withCredentials=V.withCredentials||!1,this._readCapability=(0,B.createPromiseCapability)(),this._isStreamingSupported=!V.disableStream,this._abortController=new AbortController,this._headers=ve(this._stream.httpHeaders),this._headers.append("Range",`bytes=${X}-${U-1}`);const T=V.url;fetch(T,y(this._headers,this._withCredentials,this._abortController)).then(L=>{if(!(0,J.validateResponseStatus)(L.status))throw(0,J.createResponseStatusError)(L.status,T);this._readCapability.resolve(),this._reader=L.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var U;await this._readCapability.promise;const{value:te,done:X}=await this._reader.read();return X?{value:te,done:X}:(this._loaded+=te.byteLength,(U=this.onProgress)==null||U.call(this,{loaded:this._loaded}),{value:Ne(te),done:!1})}cancel(te){var X;(X=this._reader)==null||X.cancel(te),this._abortController.abort()}}},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.TextLayerRenderTask=void 0,j.renderTextLayer=V,j.updateTextLayer=T;var B=Pe(1),J=Pe(6);const y=1e5,ve=30,Ne=.8,ye=new Map;function Q(L,H){let x;if(H&&B.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(L,L).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=L,x=P.getContext("2d",{alpha:!1})}return x}function $(L,H){const x=ye.get(L);if(x)return x;const P=Q(ve,H);P.font=`${ve}px ${L}`;const _=P.measureText("");let A=_.fontBoundingBoxAscent,N=Math.abs(_.fontBoundingBoxDescent);if(A){const se=A/(A+N);return ye.set(L,se),P.canvas.width=P.canvas.height=0,se}P.strokeStyle="red",P.clearRect(0,0,ve,ve),P.strokeText("g",0,0);let ne=P.getImageData(0,0,ve,ve).data;N=0;for(let se=ne.length-1-3;se>=0;se-=4)if(ne[se]>0){N=Math.ceil(se/4/ve);break}P.clearRect(0,0,ve,ve),P.strokeText("A",0,ve),ne=P.getImageData(0,0,ve,ve).data,A=0;for(let se=0,we=ne.length;se<we;se+=4)if(ne[se]>0){A=ve-Math.floor(se/4/ve);break}if(P.canvas.width=P.canvas.height=0,A){const se=A/(A+N);return ye.set(L,se),se}return ye.set(L,Ne),Ne}function be(L,H,x){const P=document.createElement("span"),_={angle:0,canvasWidth:0,hasText:H.str!=="",hasEOL:H.hasEOL,fontSize:0};L._textDivs.push(P);const A=B.Util.transform(L._transform,H.transform);let N=Math.atan2(A[1],A[0]);const ne=x[H.fontName];ne.vertical&&(N+=Math.PI/2);const se=Math.hypot(A[2],A[3]),we=se*$(ne.fontFamily,L._isOffscreenCanvasSupported);let Y,Me;N===0?(Y=A[4],Me=A[5]-we):(Y=A[4]+we*Math.sin(N),Me=A[5]-we*Math.cos(N));const Je="calc(var(--scale-factor)*",ze=P.style;L._container===L._rootContainer?(ze.left=`${(100*Y/L._pageWidth).toFixed(2)}%`,ze.top=`${(100*Me/L._pageHeight).toFixed(2)}%`):(ze.left=`${Je}${Y.toFixed(2)}px)`,ze.top=`${Je}${Me.toFixed(2)}px)`),ze.fontSize=`${Je}${se.toFixed(2)}px)`,ze.fontFamily=ne.fontFamily,_.fontSize=se,P.setAttribute("role","presentation"),P.textContent=H.str,P.dir=H.dir,L._fontInspectorEnabled&&(P.dataset.fontName=H.fontName),N!==0&&(_.angle=N*(180/Math.PI));let Ge=!1;if(H.str.length>1)Ge=!0;else if(H.str!==" "&&H.transform[0]!==H.transform[3]){const Le=Math.abs(H.transform[0]),Te=Math.abs(H.transform[3]);Le!==Te&&Math.max(Le,Te)/Math.min(Le,Te)>1.5&&(Ge=!0)}Ge&&(_.canvasWidth=ne.vertical?H.height:H.width),L._textDivProperties.set(P,_),L._isReadableStream&&L._layoutText(P)}function te(L){const{div:H,scale:x,properties:P,ctx:_,prevFontSize:A,prevFontFamily:N}=L,{style:ne}=H;let se="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:we}=ne,{canvasWidth:Y,fontSize:Me}=P;(A!==Me||N!==we)&&(_.font=`${Me*x}px ${we}`,L.prevFontSize=Me,L.prevFontFamily=we);const{width:Je}=_.measureText(H.textContent);Je>0&&(se=`scaleX(${Y*x/Je})`)}P.angle!==0&&(se=`rotate(${P.angle}deg) ${se}`),se.length>0&&(ne.transform=se)}function X(L){if(L._canceled)return;const H=L._textDivs,x=L._capability;if(H.length>y){x.resolve();return}if(!L._isReadableStream)for(const _ of H)L._layoutText(_);x.resolve()}class U{constructor({textContentSource:H,container:x,viewport:P,textDivs:_,textDivProperties:A,textContentItemsStr:N,isOffscreenCanvasSupported:ne}){var Je;this._textContentSource=H,this._isReadableStream=H instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=_||[],this._textContentItemsStr=N||[],this._isOffscreenCanvasSupported=ne,this._fontInspectorEnabled=!!((Je=globalThis.FontInspector)!=null&&Je.enabled),this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=(0,B.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Q(0,ne)};const{pageWidth:se,pageHeight:we,pageX:Y,pageY:Me}=P.rawDims;this._transform=[1,0,0,-1,-Y,Me+we],this._pageWidth=se,this._pageHeight=we,(0,J.setLayerDimensions)(x,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new B.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new B.AbortException("TextLayer task cancelled."))}_processItems(H,x){for(const P of H){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),_.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),be(this,P,x)}}_layoutText(H){const x=this._layoutTextParams.properties=this._textDivProperties.get(H);if(this._layoutTextParams.div=H,te(this._layoutTextParams),x.hasText&&this._container.append(H),x.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const H=(0,B.createPromiseCapability)();let x=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:_,done:A})=>{if(A){H.resolve();return}Object.assign(x,_.styles),this._processItems(_.items,x),P()},H.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:_}=this._textContentSource;this._processItems(P,_),H.resolve()}else throw new Error('No "textContentSource" parameter specified.');H.promise.then(()=>{x=null,X(this)},this._capability.reject)}}j.TextLayerRenderTask=U;function V(L){!L.textContentSource&&(L.textContent||L.textContentStream)&&((0,J.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),L.textContentSource=L.textContent||L.textContentStream);const H=new U(L);return H._render(),H}function T({container:L,viewport:H,textDivs:x,textDivProperties:P,isOffscreenCanvasSupported:_,mustRotate:A=!0,mustRescale:N=!0}){if(A&&(0,J.setLayerDimensions)(L,{rotation:H.rotation}),N){const ne=Q(0,_),we={prevFontSize:null,prevFontFamily:null,div:null,scale:H.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ne};for(const Y of x)we.properties=P.get(Y),we.div=Y,te(we)}}},(R,j,Pe)=>{var Q,$,be,te,X,U,V,T,L,zi,x,wr,_,Wi,N,Vi;Object.defineProperty(j,"__esModule",{value:!0}),j.AnnotationEditorLayer=void 0;var B=Pe(1),J=Pe(5),y=Pe(28),ve=Pe(29),Ne=Pe(6);const se=class se{constructor(Y){qe(this,L);qe(this,x);qe(this,_);qe(this,N);qe(this,Q,void 0);qe(this,$,!1);qe(this,be,this.pointerup.bind(this));qe(this,te,this.pointerdown.bind(this));qe(this,X,new Map);qe(this,U,!1);qe(this,V,!1);qe(this,T,void 0);se._initialized||(se._initialized=!0,y.FreeTextEditor.initialize(Y.l10n),ve.InkEditor.initialize(Y.l10n)),Y.uiManager.registerEditorTypes([y.FreeTextEditor,ve.InkEditor]),pt(this,T,Y.uiManager),this.pageIndex=Y.pageIndex,this.div=Y.div,pt(this,Q,Y.accessibilityManager),K(this,T).addLayer(this)}get isEmpty(){return K(this,X).size===0}updateToolbar(Y){K(this,T).updateToolbar(Y)}updateMode(Y=K(this,T).getMode()){tt(this,N,Vi).call(this),Y===B.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),K(this,T).unselectAll(),Y!==B.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Y===B.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Y===B.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(Y){if(!Y&&K(this,T).getMode()!==B.AnnotationEditorType.INK)return;if(!Y){for(const Je of K(this,X).values())if(Je.isEmpty()){Je.setInBackground();return}}tt(this,_,Wi).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(Y){K(this,T).setEditingState(Y)}addCommands(Y){K(this,T).addCommands(Y)}enable(){this.div.style.pointerEvents="auto";for(const Y of K(this,X).values())Y.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const Y of K(this,X).values())Y.disableEditing();tt(this,N,Vi).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(Y){K(this,T).getActive()!==Y&&K(this,T).setActiveEditor(Y)}enableClick(){this.div.addEventListener("pointerdown",K(this,te)),this.div.addEventListener("pointerup",K(this,be))}disableClick(){this.div.removeEventListener("pointerdown",K(this,te)),this.div.removeEventListener("pointerup",K(this,be))}attach(Y){K(this,X).set(Y.id,Y)}detach(Y){var Me;K(this,X).delete(Y.id),(Me=K(this,Q))==null||Me.removePointerInTextLayer(Y.contentDiv)}remove(Y){K(this,T).removeEditor(Y),this.detach(Y),Y.div.style.display="none",setTimeout(()=>{Y.div.style.display="",Y.div.remove(),Y.isAttachedToDOM=!1,document.activeElement===document.body&&K(this,T).focusMainContainer()},0),K(this,V)||this.addInkEditorIfNeeded(!1)}add(Y){if(tt(this,L,zi).call(this,Y),K(this,T).addEditor(Y),this.attach(Y),!Y.isAttachedToDOM){const Me=Y.render();this.div.append(Me),Y.isAttachedToDOM=!0}this.moveEditorInDOM(Y),Y.onceAdded(),K(this,T).addToAnnotationStorage(Y)}moveEditorInDOM(Y){var Me;(Me=K(this,Q))==null||Me.moveElementInDOM(this.div,Y.div,Y.contentDiv,!0)}addOrRebuild(Y){Y.needsToBeRebuilt()?Y.rebuild():this.add(Y)}addANewEditor(Y){const Me=()=>{this.addOrRebuild(Y)},Je=()=>{Y.remove()};this.addCommands({cmd:Me,undo:Je,mustExec:!0})}addUndoableEditor(Y){const Me=()=>{this.addOrRebuild(Y)},Je=()=>{Y.remove()};this.addCommands({cmd:Me,undo:Je,mustExec:!1})}getNextId(){return K(this,T).getId()}deserialize(Y){switch(Y.annotationType){case B.AnnotationEditorType.FREETEXT:return y.FreeTextEditor.deserialize(Y,this,K(this,T));case B.AnnotationEditorType.INK:return ve.InkEditor.deserialize(Y,this,K(this,T))}return null}setSelected(Y){K(this,T).setSelected(Y)}toggleSelected(Y){K(this,T).toggleSelected(Y)}isSelected(Y){return K(this,T).isSelected(Y)}unselect(Y){K(this,T).unselect(Y)}pointerup(Y){const{isMac:Me}=B.FeatureTest.platform;if(!(Y.button!==0||Y.ctrlKey&&Me)&&Y.target===this.div&&K(this,U)){if(pt(this,U,!1),!K(this,$)){pt(this,$,!0);return}tt(this,_,Wi).call(this,Y)}}pointerdown(Y){const{isMac:Me}=B.FeatureTest.platform;if(Y.button!==0||Y.ctrlKey&&Me||Y.target!==this.div)return;pt(this,U,!0);const Je=K(this,T).getActive();pt(this,$,!Je||Je.isEmpty())}drop(Y){const Me=Y.dataTransfer.getData("text/plain"),Je=K(this,T).getEditor(Me);if(!Je)return;Y.preventDefault(),Y.dataTransfer.dropEffect="move",tt(this,L,zi).call(this,Je);const ze=this.div.getBoundingClientRect(),Ge=Y.clientX-ze.x,Le=Y.clientY-ze.y;Je.translate(Ge-Je.startX,Le-Je.startY),this.moveEditorInDOM(Je),Je.div.focus()}dragover(Y){Y.preventDefault()}destroy(){var Y,Me;((Y=K(this,T).getActive())==null?void 0:Y.parent)===this&&K(this,T).setActiveEditor(null);for(const Je of K(this,X).values())(Me=K(this,Q))==null||Me.removePointerInTextLayer(Je.contentDiv),Je.setParent(null),Je.isAttachedToDOM=!1,Je.div.remove();this.div=null,K(this,X).clear(),K(this,T).removeLayer(this)}render({viewport:Y}){this.viewport=Y,(0,Ne.setLayerDimensions)(this.div,Y),(0,J.bindEvents)(this,this.div,["dragover","drop"]);for(const Me of K(this,T).getEditors(this.pageIndex))this.add(Me);this.updateMode()}update({viewport:Y}){K(this,T).commitOrRemove(),this.viewport=Y,(0,Ne.setLayerDimensions)(this.div,{rotation:Y.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Y,pageHeight:Me}=this.viewport.rawDims;return[Y,Me]}};Q=new WeakMap,$=new WeakMap,be=new WeakMap,te=new WeakMap,X=new WeakMap,U=new WeakMap,V=new WeakMap,T=new WeakMap,L=new WeakSet,zi=function(Y){var Me;Y.parent!==this&&(this.attach(Y),(Me=Y.parent)==null||Me.detach(Y),Y.setParent(this),Y.div&&Y.isAttachedToDOM&&(Y.div.remove(),this.div.append(Y.div)))},x=new WeakSet,wr=function(Y){switch(K(this,T).getMode()){case B.AnnotationEditorType.FREETEXT:return new y.FreeTextEditor(Y);case B.AnnotationEditorType.INK:return new ve.InkEditor(Y)}return null},_=new WeakSet,Wi=function(Y){const Me=this.getNextId(),Je=tt(this,x,wr).call(this,{parent:this,id:Me,x:Y.offsetX,y:Y.offsetY,uiManager:K(this,T)});return Je&&this.add(Je),Je},N=new WeakSet,Vi=function(){pt(this,V,!0);for(const Y of K(this,X).values())Y.isEmpty()&&Y.remove();pt(this,V,!1)},pn(se,"_initialized",!1);let ye=se;j.AnnotationEditorLayer=ye},(R,j,Pe)=>{var Ne,ye,Q,$,be,te,X,U,V,T,Pr,H,xr,P,Tr,A,qi;Object.defineProperty(j,"__esModule",{value:!0}),j.FreeTextEditor=void 0;var B=Pe(1),J=Pe(5),y=Pe(4);const ne=class ne extends y.AnnotationEditor{constructor(Y){super({...Y,name:"freeTextEditor"});qe(this,T);qe(this,H);qe(this,P);qe(this,A);qe(this,Ne,this.editorDivBlur.bind(this));qe(this,ye,this.editorDivFocus.bind(this));qe(this,Q,this.editorDivInput.bind(this));qe(this,$,this.editorDivKeydown.bind(this));qe(this,be,void 0);qe(this,te,"");qe(this,X,`${this.id}-editor`);qe(this,U,!1);qe(this,V,void 0);pt(this,be,Y.color||ne._defaultColor||y.AnnotationEditor._defaultLineColor),pt(this,V,Y.fontSize||ne._defaultFontSize)}static initialize(Y){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(Je=>[Je,Y.get(Je)]));const Me=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Me.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Y,Me){switch(Y){case B.AnnotationEditorParamsType.FREETEXT_SIZE:ne._defaultFontSize=Me;break;case B.AnnotationEditorParamsType.FREETEXT_COLOR:ne._defaultColor=Me;break}}updateParams(Y,Me){switch(Y){case B.AnnotationEditorParamsType.FREETEXT_SIZE:tt(this,T,Pr).call(this,Me);break;case B.AnnotationEditorParamsType.FREETEXT_COLOR:tt(this,H,xr).call(this,Me);break}}static get defaultPropertiesToUpdate(){return[[B.AnnotationEditorParamsType.FREETEXT_SIZE,ne._defaultFontSize],[B.AnnotationEditorParamsType.FREETEXT_COLOR,ne._defaultColor||y.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[B.AnnotationEditorParamsType.FREETEXT_SIZE,K(this,V)],[B.AnnotationEditorParamsType.FREETEXT_COLOR,K(this,be)]]}getInitialTranslation(){const Y=this.parentScale;return[-ne._internalPadding*Y,-(ne._internalPadding+K(this,V))*Y]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(B.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",K(this,$)),this.editorDiv.addEventListener("focus",K(this,ye)),this.editorDiv.addEventListener("blur",K(this,Ne)),this.editorDiv.addEventListener("input",K(this,Q)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",K(this,X)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",K(this,$)),this.editorDiv.removeEventListener("focus",K(this,ye)),this.editorDiv.removeEventListener("blur",K(this,Ne)),this.editorDiv.removeEventListener("input",K(this,Q)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Y){super.focusin(Y),Y.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),K(this,U)||(pt(this,U,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),pt(this,te,tt(this,P,Tr).call(this).trimEnd()),tt(this,A,qi).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(Y){this.enableEditMode(),this.editorDiv.focus()}keydown(Y){Y.target===this.div&&Y.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(Y){ne._keyboardManager.exec(this,Y)}editorDivFocus(Y){this.isEditing=!0}editorDivBlur(Y){this.isEditing=!1}editorDivInput(Y){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Y,Me;this.width&&(Y=this.x,Me=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",K(this,X)),this.enableEditing(),ne._l10nPromise.get("editor_free_text2_aria_label").then(ze=>{var Ge;return(Ge=this.editorDiv)==null?void 0:Ge.setAttribute("aria-label",ze)}),ne._l10nPromise.get("free_text2_default_content").then(ze=>{var Ge;return(Ge=this.editorDiv)==null?void 0:Ge.setAttribute("default-content",ze)}),this.editorDiv.contentEditable=!0;const{style:Je}=this.editorDiv;if(Je.fontSize=`calc(${K(this,V)}px * var(--scale-factor))`,Je.color=K(this,be),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,J.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ze,Ge]=this.parentDimensions;this.setAt(Y*ze,Me*Ge,this.width*ze,this.height*Ge);for(const Le of K(this,te).split(`
`)){const Te=document.createElement("div");Te.append(Le?document.createTextNode(Le):document.createElement("br")),this.editorDiv.append(Te)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Y,Me,Je){const ze=super.deserialize(Y,Me,Je);return pt(ze,V,Y.fontSize),pt(ze,be,B.Util.makeHexColor(...Y.color)),pt(ze,te,Y.value),ze}serialize(){if(this.isEmpty())return null;const Y=ne._internalPadding*this.parentScale,Me=this.getRect(Y,Y),Je=y.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:K(this,be));return{annotationType:B.AnnotationEditorType.FREETEXT,color:Je,fontSize:K(this,V),value:K(this,te),pageIndex:this.pageIndex,rect:Me,rotation:this.rotation}}};Ne=new WeakMap,ye=new WeakMap,Q=new WeakMap,$=new WeakMap,be=new WeakMap,te=new WeakMap,X=new WeakMap,U=new WeakMap,V=new WeakMap,T=new WeakSet,Pr=function(Y){const Me=ze=>{this.editorDiv.style.fontSize=`calc(${ze}px * var(--scale-factor))`,this.translate(0,-(ze-K(this,V))*this.parentScale),pt(this,V,ze),tt(this,A,qi).call(this)},Je=K(this,V);this.addCommands({cmd:()=>{Me(Y)},undo:()=>{Me(Je)},mustExec:!0,type:B.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},H=new WeakSet,xr=function(Y){const Me=K(this,be);this.addCommands({cmd:()=>{pt(this,be,this.editorDiv.style.color=Y)},undo:()=>{pt(this,be,this.editorDiv.style.color=Me)},mustExec:!0,type:B.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Tr=function(){const Y=this.editorDiv.getElementsByTagName("div");if(Y.length===0)return this.editorDiv.innerText;const Me=[];for(const Je of Y)Me.push(Je.innerText.replace(/\r\n?|\n/,""));return Me.join(`
`)},A=new WeakSet,qi=function(){const[Y,Me]=this.parentDimensions;let Je;if(this.isAttachedToDOM)Je=this.div.getBoundingClientRect();else{const{currentLayer:ze,div:Ge}=this,Le=Ge.style.display;Ge.style.display="hidden",ze.div.append(this.div),Je=Ge.getBoundingClientRect(),Ge.remove(),Ge.style.display=Le}this.width=Je.width/Y,this.height=Je.height/Me},pn(ne,"_freeTextDefaultContent",""),pn(ne,"_l10nPromise"),pn(ne,"_internalPadding",0),pn(ne,"_defaultColor",null),pn(ne,"_defaultFontSize",10),pn(ne,"_keyboardManager",new J.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],ne.prototype.commitOrRemove]])),pn(ne,"_type","freetext");let ve=ne;j.FreeTextEditor=ve},(R,j,Pe)=>{var $,be,te,X,U,V,T,L,H,x,P,_,A,N,ne,Rr,we,kr,Me,Mr,ze,Fr,Le,Gi,Re,Or,et,Dr,D,Lr,ee,Nn,fe,Xi,Ce,vi,Xe,bi,We,ni,O,$i,ie,_i,re,Yi,Ve,Ir,rt,Nr,lt,jr,dt,Ki,kt,yi,Rt,ii,ge,Zi;Object.defineProperty(j,"__esModule",{value:!0}),j.InkEditor=void 0,Object.defineProperty(j,"fitCurve",{enumerable:!0,get:function(){return y.fitCurve}});var B=Pe(1),J=Pe(4),y=Pe(30),ve=Pe(5);const Ne=16,ye=100,nt=class nt extends J.AnnotationEditor{constructor(Ie){super({...Ie,name:"inkEditor"});qe(this,ne);qe(this,we);qe(this,Me);qe(this,ze);qe(this,Le);qe(this,Re);qe(this,et);qe(this,D);qe(this,ee);qe(this,fe);qe(this,Ce);qe(this,Xe);qe(this,We);qe(this,O);qe(this,ie);qe(this,Ve);qe(this,rt);qe(this,lt);qe(this,dt);qe(this,kt);qe(this,Rt);qe(this,ge);qe(this,$,0);qe(this,be,0);qe(this,te,0);qe(this,X,this.canvasPointermove.bind(this));qe(this,U,this.canvasPointerleave.bind(this));qe(this,V,this.canvasPointerup.bind(this));qe(this,T,this.canvasPointerdown.bind(this));qe(this,L,!1);qe(this,H,!1);qe(this,x,null);qe(this,P,null);qe(this,_,0);qe(this,A,0);qe(this,N,null);this.color=Ie.color||null,this.thickness=Ie.thickness||null,this.opacity=Ie.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Ie){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(it=>[it,Ie.get(it)]))}static updateDefaultParams(Ie,it){switch(Ie){case B.AnnotationEditorParamsType.INK_THICKNESS:nt._defaultThickness=it;break;case B.AnnotationEditorParamsType.INK_COLOR:nt._defaultColor=it;break;case B.AnnotationEditorParamsType.INK_OPACITY:nt._defaultOpacity=it/100;break}}updateParams(Ie,it){switch(Ie){case B.AnnotationEditorParamsType.INK_THICKNESS:tt(this,ne,Rr).call(this,it);break;case B.AnnotationEditorParamsType.INK_COLOR:tt(this,we,kr).call(this,it);break;case B.AnnotationEditorParamsType.INK_OPACITY:tt(this,Me,Mr).call(this,it);break}}static get defaultPropertiesToUpdate(){return[[B.AnnotationEditorParamsType.INK_THICKNESS,nt._defaultThickness],[B.AnnotationEditorParamsType.INK_COLOR,nt._defaultColor||J.AnnotationEditor._defaultLineColor],[B.AnnotationEditorParamsType.INK_OPACITY,Math.round(nt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[B.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||nt._defaultThickness],[B.AnnotationEditorParamsType.INK_COLOR,this.color||nt._defaultColor||J.AnnotationEditor._defaultLineColor],[B.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??nt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(tt(this,Ce,vi).call(this),tt(this,Xe,bi).call(this)),this.isAttachedToDOM||(this.parent.add(this),tt(this,We,ni).call(this)),tt(this,Rt,ii).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,K(this,P).disconnect(),pt(this,P,null),super.remove())}setParent(Ie){!this.parent&&Ie?this._uiManager.removeShouldRescale(this):this.parent&&Ie===null&&this._uiManager.addShouldRescale(this),super.setParent(Ie)}onScaleChanging(){const[Ie,it]=this.parentDimensions,ut=this.width*Ie,ft=this.height*it;this.setDimensions(ut,ft)}enableEditMode(){K(this,L)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",K(this,T)),this.canvas.addEventListener("pointerup",K(this,V)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",K(this,T)),this.canvas.removeEventListener("pointerup",K(this,V)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){K(this,L)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pt(this,L,!0),this.div.classList.add("disabled"),tt(this,Rt,ii).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(Ie){super.focusin(Ie),this.enableEditMode()}canvasPointerdown(Ie){Ie.button!==0||!this.isInEditMode()||K(this,L)||(this.setInForeground(),Ie.type!=="mouse"&&this.div.focus(),Ie.stopPropagation(),this.canvas.addEventListener("pointerleave",K(this,U)),this.canvas.addEventListener("pointermove",K(this,X)),tt(this,Re,Or).call(this,Ie.offsetX,Ie.offsetY))}canvasPointermove(Ie){Ie.stopPropagation(),tt(this,et,Dr).call(this,Ie.offsetX,Ie.offsetY)}canvasPointerup(Ie){Ie.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(Ie.stopPropagation(),tt(this,fe,Xi).call(this,Ie),this.setInBackground())}canvasPointerleave(Ie){tt(this,fe,Xi).call(this,Ie),this.setInBackground()}render(){if(this.div)return this.div;let Ie,it;this.width&&(Ie=this.x,it=this.y),super.render(),nt._l10nPromise.get("editor_ink2_aria_label").then(Ht=>{var Wt;return(Wt=this.div)==null?void 0:Wt.setAttribute("aria-label",Ht)});const[ut,ft,jt,Zt]=tt(this,ze,Fr).call(this);if(this.setAt(ut,ft,0,0),this.setDims(jt,Zt),tt(this,Ce,vi).call(this),this.width){const[Ht,Wt]=this.parentDimensions;this.setAt(Ie*Ht,it*Wt,this.width*Ht,this.height*Wt),pt(this,H,!0),tt(this,We,ni).call(this),this.setDims(this.width*Ht,this.height*Wt),tt(this,ee,Nn).call(this),tt(this,ge,Zi).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return tt(this,Xe,bi).call(this),this.div}setDimensions(Ie,it){const ut=Math.round(Ie),ft=Math.round(it);if(K(this,_)===ut&&K(this,A)===ft)return;pt(this,_,ut),pt(this,A,ft),this.canvas.style.visibility="hidden",K(this,$)&&Math.abs(K(this,$)-Ie/it)>.01&&(it=Math.ceil(Ie/K(this,$)),this.setDims(Ie,it));const[jt,Zt]=this.parentDimensions;this.width=Ie/jt,this.height=it/Zt,K(this,L)&&tt(this,O,$i).call(this,Ie,it),tt(this,We,ni).call(this),tt(this,ee,Nn).call(this),this.canvas.style.visibility="visible"}static deserialize(Ie,it,ut){var dn,hn;const ft=super.deserialize(Ie,it,ut);ft.thickness=Ie.thickness,ft.color=B.Util.makeHexColor(...Ie.color),ft.opacity=Ie.opacity;const[jt,Zt]=ft.pageDimensions,Ht=ft.width*jt,Wt=ft.height*Zt,Bt=ft.parentScale,Xt=Ie.thickness/2;pt(ft,$,Ht/Wt),pt(ft,L,!0),pt(ft,_,Math.round(Ht)),pt(ft,A,Math.round(Wt));for(const{bezier:fn}of Ie.paths){const an=[];ft.paths.push(an);let wn=Bt*(fn[0]-Xt),Tn=Bt*(Wt-fn[1]-Xt);for(let kn=2,$n=fn.length;kn<$n;kn+=6){const Yn=Bt*(fn[kn]-Xt),Kn=Bt*(Wt-fn[kn+1]-Xt),Zn=Bt*(fn[kn+2]-Xt),Jn=Bt*(Wt-fn[kn+3]-Xt),li=Bt*(fn[kn+4]-Xt),ci=Bt*(Wt-fn[kn+5]-Xt);an.push([[wn,Tn],[Yn,Kn],[Zn,Jn],[li,ci]]),wn=li,Tn=ci}const jn=tt(this,re,Yi).call(this,an);ft.bezierPath2D.push(jn)}const _n=tt(dn=ft,dt,Ki).call(dn);return pt(ft,te,Math.max(Ne,_n[2]-_n[0])),pt(ft,be,Math.max(Ne,_n[3]-_n[1])),tt(hn=ft,O,$i).call(hn,Ht,Wt),ft}serialize(){if(this.isEmpty())return null;const Ie=this.getRect(0,0),it=this.rotation%180===0?Ie[3]-Ie[1]:Ie[2]-Ie[0],ut=J.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:B.AnnotationEditorType.INK,color:ut,thickness:this.thickness,opacity:this.opacity,paths:tt(this,Ve,Ir).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,it),pageIndex:this.pageIndex,rect:Ie,rotation:this.rotation}}};$=new WeakMap,be=new WeakMap,te=new WeakMap,X=new WeakMap,U=new WeakMap,V=new WeakMap,T=new WeakMap,L=new WeakMap,H=new WeakMap,x=new WeakMap,P=new WeakMap,_=new WeakMap,A=new WeakMap,N=new WeakMap,ne=new WeakSet,Rr=function(Ie){const it=this.thickness;this.addCommands({cmd:()=>{this.thickness=Ie,tt(this,Rt,ii).call(this)},undo:()=>{this.thickness=it,tt(this,Rt,ii).call(this)},mustExec:!0,type:B.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},we=new WeakSet,kr=function(Ie){const it=this.color;this.addCommands({cmd:()=>{this.color=Ie,tt(this,ee,Nn).call(this)},undo:()=>{this.color=it,tt(this,ee,Nn).call(this)},mustExec:!0,type:B.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Me=new WeakSet,Mr=function(Ie){Ie/=100;const it=this.opacity;this.addCommands({cmd:()=>{this.opacity=Ie,tt(this,ee,Nn).call(this)},undo:()=>{this.opacity=it,tt(this,ee,Nn).call(this)},mustExec:!0,type:B.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ze=new WeakSet,Fr=function(){const{parentRotation:Ie,parentDimensions:[it,ut]}=this;switch(Ie){case 90:return[0,ut,ut,it];case 180:return[it,ut,it,ut];case 270:return[it,0,ut,it];default:return[0,0,it,ut]}},Le=new WeakSet,Gi=function(){const{ctx:Ie,color:it,opacity:ut,thickness:ft,parentScale:jt,scaleFactor:Zt}=this;Ie.lineWidth=ft*jt/Zt,Ie.lineCap="round",Ie.lineJoin="round",Ie.miterLimit=10,Ie.strokeStyle=`${it}${(0,ve.opacityToHex)(ut)}`},Re=new WeakSet,Or=function(Ie,it){this.isEditing=!0,K(this,H)||(pt(this,H,!0),tt(this,We,ni).call(this),this.thickness||(this.thickness=nt._defaultThickness),this.color||(this.color=nt._defaultColor||J.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=nt._defaultOpacity)),this.currentPath.push([Ie,it]),pt(this,x,null),tt(this,Le,Gi).call(this),this.ctx.beginPath(),this.ctx.moveTo(Ie,it),pt(this,N,()=>{K(this,N)&&(K(this,x)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):tt(this,ee,Nn).call(this),this.ctx.lineTo(...K(this,x)),pt(this,x,null),this.ctx.stroke()),window.requestAnimationFrame(K(this,N)))}),window.requestAnimationFrame(K(this,N))},et=new WeakSet,Dr=function(Ie,it){const[ut,ft]=this.currentPath.at(-1);Ie===ut&&it===ft||(this.currentPath.push([Ie,it]),pt(this,x,[Ie,it]))},D=new WeakSet,Lr=function(Ie,it){var Bt;this.ctx.closePath(),pt(this,N,null),Ie=Math.min(Math.max(Ie,0),this.canvas.width),it=Math.min(Math.max(it,0),this.canvas.height);const[ut,ft]=this.currentPath.at(-1);(Ie!==ut||it!==ft)&&this.currentPath.push([Ie,it]);let jt;if(this.currentPath.length!==1)jt=(0,y.fitCurve)(this.currentPath,30,null);else{const Xt=[Ie,it];jt=[[Xt,Xt.slice(),Xt.slice(),Xt]]}const Zt=tt(Bt=nt,re,Yi).call(Bt,jt);this.currentPath.length=0;const Ht=()=>{this.paths.push(jt),this.bezierPath2D.push(Zt),this.rebuild()},Wt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(tt(this,Ce,vi).call(this),tt(this,Xe,bi).call(this)),tt(this,Rt,ii).call(this))};this.addCommands({cmd:Ht,undo:Wt,mustExec:!0})},ee=new WeakSet,Nn=function(){if(this.isEmpty()){tt(this,ie,_i).call(this);return}tt(this,Le,Gi).call(this);const{canvas:Ie,ctx:it}=this;it.setTransform(1,0,0,1,0,0),it.clearRect(0,0,Ie.width,Ie.height),tt(this,ie,_i).call(this);for(const ut of this.bezierPath2D)it.stroke(ut)},fe=new WeakSet,Xi=function(Ie){tt(this,D,Lr).call(this,Ie.offsetX,Ie.offsetY),this.canvas.removeEventListener("pointerleave",K(this,U)),this.canvas.removeEventListener("pointermove",K(this,X)),this.addToAnnotationStorage()},Ce=new WeakSet,vi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",nt._l10nPromise.get("editor_ink_canvas_aria_label").then(Ie=>{var it;return(it=this.canvas)==null?void 0:it.setAttribute("aria-label",Ie)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Xe=new WeakSet,bi=function(){let Ie=null;pt(this,P,new ResizeObserver(it=>{const ut=it[0].contentRect;ut.width&&ut.height&&(Ie!==null&&clearTimeout(Ie),Ie=setTimeout(()=>{this.fixDims(),Ie=null},ye),this.setDimensions(ut.width,ut.height))})),K(this,P).observe(this.div)},We=new WeakSet,ni=function(){if(!K(this,H))return;const[Ie,it]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Ie),this.canvas.height=Math.ceil(this.height*it),tt(this,ie,_i).call(this)},O=new WeakSet,$i=function(Ie,it){const ut=tt(this,kt,yi).call(this),ft=(Ie-ut)/K(this,te),jt=(it-ut)/K(this,be);this.scaleFactor=Math.min(ft,jt)},ie=new WeakSet,_i=function(){const Ie=tt(this,kt,yi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Ie,this.translationY*this.scaleFactor+Ie)},re=new WeakSet,Yi=function(Ie){const it=new Path2D;for(let ut=0,ft=Ie.length;ut<ft;ut++){const[jt,Zt,Ht,Wt]=Ie[ut];ut===0&&it.moveTo(...jt),it.bezierCurveTo(Zt[0],Zt[1],Ht[0],Ht[1],Wt[0],Wt[1])}return it},Ve=new WeakSet,Ir=function(Ie,it,ut,ft){const Zt=[],Ht=this.thickness/2;let Wt,Bt;for(const Xt of this.paths){Wt=[],Bt=[];for(let _n=0,dn=Xt.length;_n<dn;_n++){const[hn,fn,an,wn]=Xt[_n],Tn=Ie*(hn[0]+it)+Ht,jn=ft-Ie*(hn[1]+ut)-Ht,kn=Ie*(fn[0]+it)+Ht,$n=ft-Ie*(fn[1]+ut)-Ht,Yn=Ie*(an[0]+it)+Ht,Kn=ft-Ie*(an[1]+ut)-Ht,Zn=Ie*(wn[0]+it)+Ht,Jn=ft-Ie*(wn[1]+ut)-Ht;_n===0&&(Wt.push(Tn,jn),Bt.push(Tn,jn)),Wt.push(kn,$n,Yn,Kn,Zn,Jn),tt(this,rt,Nr).call(this,Tn,jn,kn,$n,Yn,Kn,Zn,Jn,4,Bt)}Zt.push({bezier:Wt,points:Bt})}return Zt},rt=new WeakSet,Nr=function(Ie,it,ut,ft,jt,Zt,Ht,Wt,Bt,Xt){if(tt(this,lt,jr).call(this,Ie,it,ut,ft,jt,Zt,Ht,Wt)){Xt.push(Ht,Wt);return}for(let _n=1;_n<Bt-1;_n++){const dn=_n/Bt,hn=1-dn;let fn=dn*Ie+hn*ut,an=dn*it+hn*ft,wn=dn*ut+hn*jt,Tn=dn*ft+hn*Zt;const jn=dn*jt+hn*Ht,kn=dn*Zt+hn*Wt;fn=dn*fn+hn*wn,an=dn*an+hn*Tn,wn=dn*wn+hn*jn,Tn=dn*Tn+hn*kn,fn=dn*fn+hn*wn,an=dn*an+hn*Tn,Xt.push(fn,an)}Xt.push(Ht,Wt)},lt=new WeakSet,jr=function(Ie,it,ut,ft,jt,Zt,Ht,Wt){const Xt=(3*ut-2*Ie-Ht)**2,_n=(3*ft-2*it-Wt)**2,dn=(3*jt-Ie-2*Ht)**2,hn=(3*Zt-it-2*Wt)**2;return Math.max(Xt,dn)+Math.max(_n,hn)<=10},dt=new WeakSet,Ki=function(){let Ie=1/0,it=-1/0,ut=1/0,ft=-1/0;for(const jt of this.paths)for(const[Zt,Ht,Wt,Bt]of jt){const Xt=B.Util.bezierBoundingBox(...Zt,...Ht,...Wt,...Bt);Ie=Math.min(Ie,Xt[0]),ut=Math.min(ut,Xt[1]),it=Math.max(it,Xt[2]),ft=Math.max(ft,Xt[3])}return[Ie,ut,it,ft]},kt=new WeakSet,yi=function(){return K(this,L)?Math.ceil(this.thickness*this.parentScale):0},Rt=new WeakSet,ii=function(Ie=!1){if(this.isEmpty())return;if(!K(this,L)){tt(this,ee,Nn).call(this);return}const it=tt(this,dt,Ki).call(this),ut=tt(this,kt,yi).call(this);pt(this,te,Math.max(Ne,it[2]-it[0])),pt(this,be,Math.max(Ne,it[3]-it[1]));const ft=Math.ceil(ut+K(this,te)*this.scaleFactor),jt=Math.ceil(ut+K(this,be)*this.scaleFactor),[Zt,Ht]=this.parentDimensions;this.width=ft/Zt,this.height=jt/Ht,pt(this,$,ft/jt),tt(this,ge,Zi).call(this);const Wt=this.translationX,Bt=this.translationY;this.translationX=-it[0],this.translationY=-it[1],tt(this,We,ni).call(this),tt(this,ee,Nn).call(this),pt(this,_,ft),pt(this,A,jt),this.setDims(ft,jt);const Xt=Ie?ut/this.scaleFactor/2:0;this.translate(Wt-this.translationX-Xt,Bt-this.translationY-Xt)},ge=new WeakSet,Zi=function(){const{style:Ie}=this.div;K(this,$)>=1?(Ie.minHeight=`${Ne}px`,Ie.minWidth=`${Math.round(K(this,$)*Ne)}px`):(Ie.minWidth=`${Ne}px`,Ie.minHeight=`${Math.round(Ne/K(this,$))}px`)},qe(nt,re),pn(nt,"_defaultColor",null),pn(nt,"_defaultOpacity",1),pn(nt,"_defaultThickness",1),pn(nt,"_l10nPromise"),pn(nt,"_type","ink");let Q=nt;j.InkEditor=Q},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.fitCurve=void 0;const B=Pe(31);j.fitCurve=B},R=>{function j(U,V,T){if(!Array.isArray(U))throw new TypeError("First argument should be an array");if(U.forEach(P=>{if(!Array.isArray(P)||P.some(_=>typeof _!="number")||P.length!==U[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),U=U.filter((P,_)=>_===0||!P.every((A,N)=>A===U[_-1][N])),U.length<2)return[];const L=U.length,H=be(U[1],U[0]),x=be(U[L-2],U[L-1]);return Pe(U,H,x,V,T)}function Pe(U,V,T,L,H){var P,_,A,N,ne,se,we,Y,Me,Je,ze,Ge,Le;if(U.length===2)return Ge=te.vectorLen(te.subtract(U[0],U[1]))/3,P=[U[0],te.addArrays(U[0],te.mulItems(V,Ge)),te.addArrays(U[1],te.mulItems(T,Ge)),U[1]],[P];if(_=Ne(U),[P,N,se]=B(U,_,_,V,T,H),N===0||N<L)return[P];if(N<L*L)for(A=_,ne=N,we=se,Le=0;Le<20;Le++){if(A=y(P,U,A),[P,N,se]=B(U,_,A,V,T,H),N<L)return[P];if(se===we){let Te=N/ne;if(Te>.9999&&Te<1.0001)break}ne=N,we=se}return ze=[],Y=te.subtract(U[se-1],U[se+1]),Y.every(Te=>Te===0)&&(Y=te.subtract(U[se-1],U[se]),[Y[0],Y[1]]=[-Y[1],Y[0]]),Me=te.normalize(Y),Je=te.mulItems(Me,-1),ze=ze.concat(Pe(U.slice(0,se+1),V,Me,L,H)),ze=ze.concat(Pe(U.slice(se),Je,T,L,H)),ze}function B(U,V,T,L,H,x){var P,_,A;return P=J(U,T,L,H),[_,A]=ye(U,P,V),x&&x({bez:P,points:U,params:V,maxErr:_,maxPoint:A}),[P,_,A]}function J(U,V,T,L){var H,x,P,_,A,N,ne,se,we,Y,Me,Je,ze,Ge,Le,Te,Re,$e=U[0],et=U[U.length-1];for(H=[$e,null,null,et],x=te.zeros_Xx2x2(V.length),ze=0,Ge=V.length;ze<Ge;ze++)Te=V[ze],Re=1-Te,P=x[ze],P[0]=te.mulItems(T,3*Te*(Re*Re)),P[1]=te.mulItems(L,3*Re*(Te*Te));for(_=[[0,0],[0,0]],A=[0,0],ze=0,Ge=U.length;ze<Ge;ze++)Te=V[ze],P=x[ze],_[0][0]+=te.dot(P[0],P[0]),_[0][1]+=te.dot(P[0],P[1]),_[1][0]+=te.dot(P[0],P[1]),_[1][1]+=te.dot(P[1],P[1]),Le=te.subtract(U[ze],X.q([$e,$e,et,et],Te)),A[0]+=te.dot(P[0],Le),A[1]+=te.dot(P[1],Le);return N=_[0][0]*_[1][1]-_[1][0]*_[0][1],ne=_[0][0]*A[1]-_[1][0]*A[0],se=A[0]*_[1][1]-A[1]*_[0][1],we=N===0?0:se/N,Y=N===0?0:ne/N,Je=te.vectorLen(te.subtract($e,et)),Me=1e-6*Je,we<Me||Y<Me?(H[1]=te.addArrays($e,te.mulItems(T,Je/3)),H[2]=te.addArrays(et,te.mulItems(L,Je/3))):(H[1]=te.addArrays($e,te.mulItems(T,we)),H[2]=te.addArrays(et,te.mulItems(L,Y))),H}function y(U,V,T){return T.map((L,H)=>ve(U,V[H],L))}function ve(U,V,T){var L=te.subtract(X.q(U,T),V),H=X.qprime(U,T),x=te.mulMatrix(L,H),P=te.sum(te.squareItems(H))+2*te.mulMatrix(L,X.qprimeprime(U,T));return P===0?T:T-x/P}function Ne(U){var V=[],T,L,H;return U.forEach((x,P)=>{T=P?L+te.vectorLen(te.subtract(x,H)):0,V.push(T),L=T,H=x}),V=V.map(x=>x/L),V}function ye(U,V,T){var L,H,x,P,_,A,N,ne;H=0,x=Math.floor(U.length/2);const se=Q(V,10);for(_=0,A=U.length;_<A;_++)N=U[_],ne=$(V,T[_],se,10),P=te.subtract(X.q(V,ne),N),L=P[0]*P[0]+P[1]*P[1],L>H&&(H=L,x=_);return[H,x]}var Q=function(U,V){for(var T,L=[0],H=U[0],x=0,P=1;P<=V;P++)T=X.q(U,P/V),x+=te.vectorLen(te.subtract(T,H)),L.push(x),H=T;return L=L.map(_=>_/x),L};function $(U,V,T,L){if(V<0)return 0;if(V>1)return 1;for(var H,x,P,_,A,N=1;N<=L;N++)if(V<=T[N]){_=(N-1)/L,P=N/L,x=T[N-1],H=T[N],A=(V-x)/(H-x)*(P-_)+_;break}return A}function be(U,V){return te.normalize(te.subtract(U,V))}class te{static zeros_Xx2x2(V){for(var T=[];V--;)T.push([0,0]);return T}static mulItems(V,T){return V.map(L=>L*T)}static mulMatrix(V,T){return V.reduce((L,H,x)=>L+H*T[x],0)}static subtract(V,T){return V.map((L,H)=>L-T[H])}static addArrays(V,T){return V.map((L,H)=>L+T[H])}static addItems(V,T){return V.map(L=>L+T)}static sum(V){return V.reduce((T,L)=>T+L)}static dot(V,T){return te.mulMatrix(V,T)}static vectorLen(V){return Math.hypot(...V)}static divItems(V,T){return V.map(L=>L/T)}static squareItems(V){return V.map(T=>T*T)}static normalize(V){return this.divItems(V,this.vectorLen(V))}}class X{static q(V,T){var L=1-T,H=te.mulItems(V[0],L*L*L),x=te.mulItems(V[1],3*L*L*T),P=te.mulItems(V[2],3*L*T*T),_=te.mulItems(V[3],T*T*T);return te.addArrays(te.addArrays(H,x),te.addArrays(P,_))}static qprime(V,T){var L=1-T,H=te.mulItems(te.subtract(V[1],V[0]),3*L*L),x=te.mulItems(te.subtract(V[2],V[1]),6*L*T),P=te.mulItems(te.subtract(V[3],V[2]),3*T*T);return te.addArrays(te.addArrays(H,x),P)}static qprimeprime(V,T){return te.addArrays(te.mulItems(te.addArrays(te.subtract(V[2],te.mulItems(V[1],2)),V[0]),6*(1-T)),te.mulItems(te.addArrays(te.subtract(V[3],te.mulItems(V[2],2)),V[1]),6*T))}}R.exports=j,R.exports.fitCubic=Pe,R.exports.createTangent=be},(R,j,Pe)=>{var F,Xn,le,Br,Ce,Ji,Xe,Qi;Object.defineProperty(j,"__esModule",{value:!0}),j.AnnotationLayer=void 0;var B=Pe(1),J=Pe(6),y=Pe(3),ve=Pe(33),Ne=Pe(34);const ye=1e3,Q=9,$=new WeakSet;function be(Be){return{width:Be[2]-Be[0],height:Be[3]-Be[1]}}class te{static create(O){switch(O.data.annotationType){case B.AnnotationType.LINK:return new U(O);case B.AnnotationType.TEXT:return new V(O);case B.AnnotationType.WIDGET:switch(O.data.fieldType){case"Tx":return new L(O);case"Btn":return O.data.radioButton?new x(O):O.data.checkBox?new H(O):new P(O);case"Ch":return new _(O)}return new T(O);case B.AnnotationType.POPUP:return new A(O);case B.AnnotationType.FREETEXT:return new ne(O);case B.AnnotationType.LINE:return new se(O);case B.AnnotationType.SQUARE:return new we(O);case B.AnnotationType.CIRCLE:return new Y(O);case B.AnnotationType.POLYLINE:return new Me(O);case B.AnnotationType.CARET:return new ze(O);case B.AnnotationType.INK:return new Ge(O);case B.AnnotationType.POLYGON:return new Je(O);case B.AnnotationType.HIGHLIGHT:return new Le(O);case B.AnnotationType.UNDERLINE:return new Te(O);case B.AnnotationType.SQUIGGLY:return new Re(O);case B.AnnotationType.STRIKEOUT:return new $e(O);case B.AnnotationType.STAMP:return new et(O);case B.AnnotationType.FILEATTACHMENT:return new ce(O);default:return new X(O)}}}class X{constructor(O,{isRenderable:G=!1,ignoreBorder:ie=!1,createQuadrilaterals:he=!1}={}){this.isRenderable=G,this.data=O.data,this.layer=O.layer,this.page=O.page,this.viewport=O.viewport,this.linkService=O.linkService,this.downloadManager=O.downloadManager,this.imageResourcesPath=O.imageResourcesPath,this.renderForms=O.renderForms,this.svgFactory=O.svgFactory,this.annotationStorage=O.annotationStorage,this.enableScripting=O.enableScripting,this.hasJSActions=O.hasJSActions,this._fieldObjects=O.fieldObjects,G&&(this.container=this._createContainer(ie)),he&&(this.quadrilaterals=this._createQuadrilaterals(ie))}_createContainer(O=!1){const{data:G,page:ie,viewport:he}=this,re=document.createElement("section");re.setAttribute("data-annotation-id",G.id);const{pageWidth:xe,pageHeight:Ve,pageX:Qe,pageY:rt}=he.rawDims,{width:He,height:lt}=be(G.rect),st=B.Util.normalizeRect([G.rect[0],ie.view[3]-G.rect[1]+ie.view[1],G.rect[2],ie.view[3]-G.rect[3]+ie.view[1]]);if(!O&&G.borderStyle.width>0){re.style.borderWidth=`${G.borderStyle.width}px`;const gt=G.borderStyle.horizontalCornerRadius,kt=G.borderStyle.verticalCornerRadius;if(gt>0||kt>0){const Rt=`calc(${gt}px * var(--scale-factor)) / calc(${kt}px * var(--scale-factor))`;re.style.borderRadius=Rt}else if(this instanceof x){const Rt=`calc(${He}px * var(--scale-factor)) / calc(${lt}px * var(--scale-factor))`;re.style.borderRadius=Rt}switch(G.borderStyle.style){case B.AnnotationBorderStyleType.SOLID:re.style.borderStyle="solid";break;case B.AnnotationBorderStyleType.DASHED:re.style.borderStyle="dashed";break;case B.AnnotationBorderStyleType.BEVELED:(0,B.warn)("Unimplemented border style: beveled");break;case B.AnnotationBorderStyleType.INSET:(0,B.warn)("Unimplemented border style: inset");break;case B.AnnotationBorderStyleType.UNDERLINE:re.style.borderBottomStyle="solid";break}const Dt=G.borderColor||null;Dt?re.style.borderColor=B.Util.makeHexColor(Dt[0]|0,Dt[1]|0,Dt[2]|0):re.style.borderWidth=0}re.style.left=`${100*(st[0]-Qe)/xe}%`,re.style.top=`${100*(st[1]-rt)/Ve}%`;const{rotation:dt}=G;return G.hasOwnCanvas||dt===0?(re.style.width=`${100*He/xe}%`,re.style.height=`${100*lt/Ve}%`):this.setRotation(dt,re),re}setRotation(O,G=this.container){const{pageWidth:ie,pageHeight:he}=this.viewport.rawDims,{width:re,height:xe}=be(this.data.rect);let Ve,Qe;O%180===0?(Ve=100*re/ie,Qe=100*xe/he):(Ve=100*xe/ie,Qe=100*re/he),G.style.width=`${Ve}%`,G.style.height=`${Qe}%`,G.setAttribute("data-main-rotation",(360-O)%360)}get _commonActions(){const O=(G,ie,he)=>{const re=he.detail[G];he.target.style[ie]=ve.ColorConverters[`${re[0]}_HTML`](re.slice(1))};return(0,B.shadow)(this,"_commonActions",{display:G=>{const ie=G.detail.display%2===1;this.container.style.visibility=ie?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:ie,print:G.detail.display===0||G.detail.display===3})},print:G=>{this.annotationStorage.setValue(this.data.id,{print:G.detail.print})},hidden:G=>{this.container.style.visibility=G.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:G.detail.hidden})},focus:G=>{setTimeout(()=>G.target.focus({preventScroll:!1}),0)},userName:G=>{G.target.title=G.detail.userName},readonly:G=>{G.detail.readonly?G.target.setAttribute("readonly",""):G.target.removeAttribute("readonly")},required:G=>{this._setRequired(G.target,G.detail.required)},bgColor:G=>{O("bgColor","backgroundColor",G)},fillColor:G=>{O("fillColor","backgroundColor",G)},fgColor:G=>{O("fgColor","color",G)},textColor:G=>{O("textColor","color",G)},borderColor:G=>{O("borderColor","borderColor",G)},strokeColor:G=>{O("strokeColor","borderColor",G)},rotation:G=>{const ie=G.detail.rotation;this.setRotation(ie),this.annotationStorage.setValue(this.data.id,{rotation:ie})}})}_dispatchEventFromSandbox(O,G){const ie=this._commonActions;for(const he of Object.keys(G.detail)){const re=O[he]||ie[he];re==null||re(G)}}_setDefaultPropertiesFromJS(O){if(!this.enableScripting)return;const G=this.annotationStorage.getRawValue(this.data.id);if(!G)return;const ie=this._commonActions;for(const[he,re]of Object.entries(G)){const xe=ie[he];if(xe){const Ve={detail:{[he]:re},target:O};xe(Ve),delete G[he]}}}_createQuadrilaterals(O=!1){if(!this.data.quadPoints)return null;const G=[],ie=this.data.rect;for(const he of this.data.quadPoints)this.data.rect=[he[2].x,he[2].y,he[1].x,he[1].y],G.push(this._createContainer(O));return this.data.rect=ie,G}_createPopup(O,G){let ie=this.container;this.quadrilaterals&&(O=O||this.quadrilaterals,ie=this.quadrilaterals[0]),O||(O=document.createElement("div"),O.className="popupTriggerArea",ie.append(O));const re=new N({container:ie,trigger:O,color:G.color,titleObj:G.titleObj,modificationDate:G.modificationDate,contentsObj:G.contentsObj,richText:G.richText,hideWrapper:!0}).render();re.style.left="100%",ie.append(re)}_renderQuadrilaterals(O){for(const G of this.quadrilaterals)G.className=O;return this.quadrilaterals}render(){(0,B.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(O,G=null){const ie=[];if(this._fieldObjects){const he=this._fieldObjects[O];if(he)for(const{page:re,id:xe,exportValues:Ve}of he){if(re===-1||xe===G)continue;const Qe=typeof Ve=="string"?Ve:null,rt=document.querySelector(`[data-element-id="${xe}"]`);if(rt&&!$.has(rt)){(0,B.warn)(`_getElementsByName - element not allowed: ${xe}`);continue}ie.push({id:xe,exportValue:Qe,domElement:rt})}return ie}for(const he of document.getElementsByName(O)){const{exportValue:re}=he,xe=he.getAttribute("data-element-id");xe!==G&&$.has(he)&&ie.push({id:xe,exportValue:re,domElement:he})}return ie}}class U extends X{constructor(G,ie=null){super(G,{isRenderable:!0,ignoreBorder:!!(ie!=null&&ie.ignoreBorder),createQuadrilaterals:!0});qe(this,F);qe(this,le);this.isTooltipOnly=G.data.isTooltipOnly}render(){const{data:G,linkService:ie}=this,he=document.createElement("a");he.setAttribute("data-element-id",G.id);let re=!1;return G.url?(ie.addLinkAttributes(he,G.url,G.newWindow),re=!0):G.action?(this._bindNamedAction(he,G.action),re=!0):G.attachment?(this._bindAttachment(he,G.attachment),re=!0):G.setOCGState?(tt(this,le,Br).call(this,he,G.setOCGState),re=!0):G.dest?(this._bindLink(he,G.dest),re=!0):(G.actions&&(G.actions.Action||G.actions["Mouse Up"]||G.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(he,G),re=!0),G.resetForm?(this._bindResetFormAction(he,G.resetForm),re=!0):this.isTooltipOnly&&!re&&(this._bindLink(he,""),re=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((xe,Ve)=>{const Qe=Ve===0?he:he.cloneNode();return xe.append(Qe),xe}):(this.container.className="linkAnnotation",re&&this.container.append(he),this.container)}_bindLink(G,ie){G.href=this.linkService.getDestinationHash(ie),G.onclick=()=>(ie&&this.linkService.goToDestination(ie),!1),(ie||ie==="")&&tt(this,F,Xn).call(this)}_bindNamedAction(G,ie){G.href=this.linkService.getAnchorUrl(""),G.onclick=()=>(this.linkService.executeNamedAction(ie),!1),tt(this,F,Xn).call(this)}_bindAttachment(G,ie){G.href=this.linkService.getAnchorUrl(""),G.onclick=()=>{var he;return(he=this.downloadManager)==null||he.openOrDownloadData(this.container,ie.content,ie.filename),!1},tt(this,F,Xn).call(this)}_bindJSAction(G,ie){G.href=this.linkService.getAnchorUrl("");const he=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const re of Object.keys(ie.actions)){const xe=he.get(re);xe&&(G[xe]=()=>{var Ve;return(Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ie.id,name:re}}),!1})}G.onclick||(G.onclick=()=>!1),tt(this,F,Xn).call(this)}_bindResetFormAction(G,ie){const he=G.onclick;if(he||(G.href=this.linkService.getAnchorUrl("")),tt(this,F,Xn).call(this),!this._fieldObjects){(0,B.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),he||(G.onclick=()=>!1);return}G.onclick=()=>{var lt;he==null||he();const{fields:re,refs:xe,include:Ve}=ie,Qe=[];if(re.length!==0||xe.length!==0){const st=new Set(xe);for(const dt of re){const gt=this._fieldObjects[dt]||[];for(const{id:kt}of gt)st.add(kt)}for(const dt of Object.values(this._fieldObjects))for(const gt of dt)st.has(gt.id)===Ve&&Qe.push(gt)}else for(const st of Object.values(this._fieldObjects))Qe.push(...st);const rt=this.annotationStorage,He=[];for(const st of Qe){const{id:dt}=st;switch(He.push(dt),st.type){case"text":{const kt=st.defaultValue||"";rt.setValue(dt,{value:kt});break}case"checkbox":case"radiobutton":{const kt=st.defaultValue===st.exportValues;rt.setValue(dt,{value:kt});break}case"combobox":case"listbox":{const kt=st.defaultValue||"";rt.setValue(dt,{value:kt});break}default:continue}const gt=document.querySelector(`[data-element-id="${dt}"]`);if(gt){if(!$.has(gt)){(0,B.warn)(`_bindResetFormAction - element not allowed: ${dt}`);continue}}else continue;gt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:He,name:"ResetForm"}})),!1}}}F=new WeakSet,Xn=function(){this.container.setAttribute("data-internal-link","")},le=new WeakSet,Br=function(G,ie){G.href=this.linkService.getAnchorUrl(""),G.onclick=()=>(this.linkService.executeSetOCGState(ie),!1),tt(this,F,Xn).call(this)};class V extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G})}render(){this.container.className="textAnnotation";const O=document.createElement("img");return O.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",O.alt="[{{type}} Annotation]",O.dataset.l10nId="text_annotation_type",O.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(O,this.data),this.container.append(O),this.container}}class T extends X{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(O){const{isWin:G,isMac:ie}=B.FeatureTest.platform;return G&&O.ctrlKey||ie&&O.metaKey}_setEventListener(O,G,ie,he){G.includes("mouse")?O.addEventListener(G,re=>{var xe;(xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ie,value:he(re),shift:re.shiftKey,modifier:this._getKeyModifier(re)}})}):O.addEventListener(G,re=>{var xe;(xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ie,value:he(re)}})})}_setEventListeners(O,G,ie){var he;for(const[re,xe]of G)(xe==="Action"||(he=this.data.actions)!=null&&he[xe])&&this._setEventListener(O,re,xe,ie)}_setBackgroundColor(O){const G=this.data.backgroundColor||null;O.style.backgroundColor=G===null?"transparent":B.Util.makeHexColor(G[0],G[1],G[2])}_setTextStyle(O){const G=["left","center","right"],{fontColor:ie}=this.data.defaultAppearanceData,he=this.data.defaultAppearanceData.fontSize||Q,re=O.style;let xe;const Ve=2,Qe=rt=>Math.round(10*rt)/10;if(this.data.multiLine){const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ve),He=Math.round(rt/(B.LINE_FACTOR*he))||1,lt=rt/He;xe=Math.min(he,Qe(lt/B.LINE_FACTOR))}else{const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ve);xe=Math.min(he,Qe(rt/B.LINE_FACTOR))}re.fontSize=`calc(${xe}px * var(--scale-factor))`,re.color=B.Util.makeHexColor(ie[0],ie[1],ie[2]),this.data.textAlignment!==null&&(re.textAlign=G[this.data.textAlignment])}_setRequired(O,G){G?O.setAttribute("required",!0):O.removeAttribute("required"),O.setAttribute("aria-required",G)}}class L extends T{constructor(O){const G=O.renderForms||!O.data.hasAppearance&&!!O.data.fieldValue;super(O,{isRenderable:G})}setPropertyOnSiblings(O,G,ie,he){const re=this.annotationStorage;for(const xe of this._getElementsByName(O.name,O.id))xe.domElement&&(xe.domElement[G]=ie),re.setValue(xe.id,{[he]:ie})}render(){var he;const O=this.annotationStorage,G=this.data.id;this.container.className="textWidgetAnnotation";let ie=null;if(this.renderForms){const re=O.getValue(G,{value:this.data.fieldValue});let xe=re.formattedValue||re.value||"";const Ve=O.getValue(G,{charLimit:this.data.maxLen}).charLimit;Ve&&xe.length>Ve&&(xe=xe.slice(0,Ve));const Qe={userValue:xe,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(ie=document.createElement("textarea"),ie.textContent=xe,this.data.doNotScroll&&(ie.style.overflowY="hidden")):(ie=document.createElement("input"),ie.type="text",ie.setAttribute("value",xe),this.data.doNotScroll&&(ie.style.overflowX="hidden")),$.add(ie),ie.setAttribute("data-element-id",G),ie.disabled=this.data.readOnly,ie.name=this.data.fieldName,ie.tabIndex=ye,this._setRequired(ie,this.data.required),Ve&&(ie.maxLength=Ve),ie.addEventListener("input",He=>{O.setValue(G,{value:He.target.value}),this.setPropertyOnSiblings(ie,"value",He.target.value,"value")}),ie.addEventListener("resetform",He=>{const lt=this.data.defaultFieldValue??"";ie.value=Qe.userValue=lt,Qe.formattedValue=null});let rt=He=>{const{formattedValue:lt}=Qe;lt!=null&&(He.target.value=lt),He.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ie.addEventListener("focus",lt=>{const{target:st}=lt;Qe.userValue&&(st.value=Qe.userValue),Qe.lastCommittedValue=st.value,Qe.commitKey=1}),ie.addEventListener("updatefromsandbox",lt=>{const st={value(dt){Qe.userValue=dt.detail.value??"",O.setValue(G,{value:Qe.userValue.toString()}),dt.target.value=Qe.userValue},formattedValue(dt){const{formattedValue:gt}=dt.detail;Qe.formattedValue=gt,gt!=null&&dt.target!==document.activeElement&&(dt.target.value=gt),O.setValue(G,{formattedValue:gt})},selRange(dt){dt.target.setSelectionRange(...dt.detail.selRange)},charLimit:dt=>{var Rt;const{charLimit:gt}=dt.detail,{target:kt}=dt;if(gt===0){kt.removeAttribute("maxLength");return}kt.setAttribute("maxLength",gt);let Dt=Qe.userValue;!Dt||Dt.length<=gt||(Dt=Dt.slice(0,gt),kt.value=Qe.userValue=Dt,O.setValue(G,{value:Dt}),(Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G,name:"Keystroke",value:Dt,willCommit:!0,commitKey:1,selStart:kt.selectionStart,selEnd:kt.selectionEnd}}))}};this._dispatchEventFromSandbox(st,lt)}),ie.addEventListener("keydown",lt=>{var gt;Qe.commitKey=1;let st=-1;if(lt.key==="Escape"?st=0:lt.key==="Enter"&&!this.data.multiLine?st=2:lt.key==="Tab"&&(Qe.commitKey=3),st===-1)return;const{value:dt}=lt.target;Qe.lastCommittedValue!==dt&&(Qe.lastCommittedValue=dt,Qe.userValue=dt,(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G,name:"Keystroke",value:dt,willCommit:!0,commitKey:st,selStart:lt.target.selectionStart,selEnd:lt.target.selectionEnd}}))});const He=rt;rt=null,ie.addEventListener("blur",lt=>{var dt;if(!lt.relatedTarget)return;const{value:st}=lt.target;Qe.userValue=st,Qe.lastCommittedValue!==st&&((dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G,name:"Keystroke",value:st,willCommit:!0,commitKey:Qe.commitKey,selStart:lt.target.selectionStart,selEnd:lt.target.selectionEnd}})),He(lt)}),(he=this.data.actions)!=null&&he.Keystroke&&ie.addEventListener("beforeinput",lt=>{var ge;Qe.lastCommittedValue=null;const{data:st,target:dt}=lt,{value:gt,selectionStart:kt,selectionEnd:Dt}=dt;let Rt=kt,ue=Dt;switch(lt.inputType){case"deleteWordBackward":{const Se=gt.substring(0,kt).match(/\w*[^\w]*$/);Se&&(Rt-=Se[0].length);break}case"deleteWordForward":{const Se=gt.substring(kt).match(/^[^\w]*\w*/);Se&&(ue+=Se[0].length);break}case"deleteContentBackward":kt===Dt&&(Rt-=1);break;case"deleteContentForward":kt===Dt&&(ue+=1);break}lt.preventDefault(),(ge=this.linkService.eventBus)==null||ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G,name:"Keystroke",value:gt,change:st||"",willCommit:!1,selStart:Rt,selEnd:ue}})}),this._setEventListeners(ie,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.value)}if(rt&&ie.addEventListener("blur",rt),this.data.comb){const lt=(this.data.rect[2]-this.data.rect[0])/Ve;ie.classList.add("comb"),ie.style.letterSpacing=`calc(${lt}px * var(--scale-factor) - 1ch)`}}else ie=document.createElement("div"),ie.textContent=this.data.fieldValue,ie.style.verticalAlign="middle",ie.style.display="table-cell";return this._setTextStyle(ie),this._setBackgroundColor(ie),this._setDefaultPropertiesFromJS(ie),this.container.append(ie),this.container}}class H extends T{constructor(O){super(O,{isRenderable:O.renderForms})}render(){const O=this.annotationStorage,G=this.data,ie=G.id;let he=O.getValue(ie,{value:G.exportValue===G.fieldValue}).value;typeof he=="string"&&(he=he!=="Off",O.setValue(ie,{value:he})),this.container.className="buttonWidgetAnnotation checkBox";const re=document.createElement("input");return $.add(re),re.setAttribute("data-element-id",ie),re.disabled=G.readOnly,this._setRequired(re,this.data.required),re.type="checkbox",re.name=G.fieldName,he&&re.setAttribute("checked",!0),re.setAttribute("exportValue",G.exportValue),re.tabIndex=ye,re.addEventListener("change",xe=>{const{name:Ve,checked:Qe}=xe.target;for(const rt of this._getElementsByName(Ve,ie)){const He=Qe&&rt.exportValue===G.exportValue;rt.domElement&&(rt.domElement.checked=He),O.setValue(rt.id,{value:He})}O.setValue(ie,{value:Qe})}),re.addEventListener("resetform",xe=>{const Ve=G.defaultFieldValue||"Off";xe.target.checked=Ve===G.exportValue}),this.enableScripting&&this.hasJSActions&&(re.addEventListener("updatefromsandbox",xe=>{const Ve={value(Qe){Qe.target.checked=Qe.detail.value!=="Off",O.setValue(ie,{value:Qe.target.checked})}};this._dispatchEventFromSandbox(Ve,xe)}),this._setEventListeners(re,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xe=>xe.target.checked)),this._setBackgroundColor(re),this._setDefaultPropertiesFromJS(re),this.container.append(re),this.container}}class x extends T{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const O=this.annotationStorage,G=this.data,ie=G.id;let he=O.getValue(ie,{value:G.fieldValue===G.buttonValue}).value;typeof he=="string"&&(he=he!==G.buttonValue,O.setValue(ie,{value:he}));const re=document.createElement("input");if($.add(re),re.setAttribute("data-element-id",ie),re.disabled=G.readOnly,this._setRequired(re,this.data.required),re.type="radio",re.name=G.fieldName,he&&re.setAttribute("checked",!0),re.tabIndex=ye,re.addEventListener("change",xe=>{const{name:Ve,checked:Qe}=xe.target;for(const rt of this._getElementsByName(Ve,ie))O.setValue(rt.id,{value:!1});O.setValue(ie,{value:Qe})}),re.addEventListener("resetform",xe=>{const Ve=G.defaultFieldValue;xe.target.checked=Ve!=null&&Ve===G.buttonValue}),this.enableScripting&&this.hasJSActions){const xe=G.buttonValue;re.addEventListener("updatefromsandbox",Ve=>{const Qe={value:rt=>{const He=xe===rt.detail.value;for(const lt of this._getElementsByName(rt.target.name)){const st=He&&lt.id===ie;lt.domElement&&(lt.domElement.checked=st),O.setValue(lt.id,{value:st})}}};this._dispatchEventFromSandbox(Qe,Ve)}),this._setEventListeners(re,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ve=>Ve.target.checked)}return this._setBackgroundColor(re),this._setDefaultPropertiesFromJS(re),this.container.append(re),this.container}}class P extends U{constructor(O){super(O,{ignoreBorder:O.data.hasAppearance})}render(){const O=super.render();O.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(O.title=this.data.alternativeText);const G=O.lastChild;return this.enableScripting&&this.hasJSActions&&G&&(this._setDefaultPropertiesFromJS(G),G.addEventListener("updatefromsandbox",ie=>{this._dispatchEventFromSandbox({},ie)})),O}}class _ extends T{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const O=this.annotationStorage,G=this.data.id,ie=O.getValue(G,{value:this.data.fieldValue}),he=document.createElement("select");$.add(he),he.setAttribute("data-element-id",G),he.disabled=this.data.readOnly,this._setRequired(he,this.data.required),he.name=this.data.fieldName,he.tabIndex=ye;let re=this.data.combo&&this.data.options.length>0;this.data.combo||(he.size=this.data.options.length,this.data.multiSelect&&(he.multiple=!0)),he.addEventListener("resetform",He=>{const lt=this.data.defaultFieldValue;for(const st of he.options)st.selected=st.value===lt});for(const He of this.data.options){const lt=document.createElement("option");lt.textContent=He.displayValue,lt.value=He.exportValue,ie.value.includes(He.exportValue)&&(lt.setAttribute("selected",!0),re=!1),he.append(lt)}let xe=null;if(re){const He=document.createElement("option");He.value=" ",He.setAttribute("hidden",!0),He.setAttribute("selected",!0),he.prepend(He),xe=()=>{He.remove(),he.removeEventListener("input",xe),xe=null},he.addEventListener("input",xe)}const Ve=He=>{const lt=He?"value":"textContent",{options:st,multiple:dt}=he;return dt?Array.prototype.filter.call(st,gt=>gt.selected).map(gt=>gt[lt]):st.selectedIndex===-1?null:st[st.selectedIndex][lt]};let Qe=Ve(!1);const rt=He=>{const lt=He.target.options;return Array.prototype.map.call(lt,st=>({displayValue:st.textContent,exportValue:st.value}))};return this.enableScripting&&this.hasJSActions?(he.addEventListener("updatefromsandbox",He=>{const lt={value(st){xe==null||xe();const dt=st.detail.value,gt=new Set(Array.isArray(dt)?dt:[dt]);for(const kt of he.options)kt.selected=gt.has(kt.value);O.setValue(G,{value:Ve(!0)}),Qe=Ve(!1)},multipleSelection(st){he.multiple=!0},remove(st){const dt=he.options,gt=st.detail.remove;dt[gt].selected=!1,he.remove(gt),dt.length>0&&Array.prototype.findIndex.call(dt,Dt=>Dt.selected)===-1&&(dt[0].selected=!0),O.setValue(G,{value:Ve(!0),items:rt(st)}),Qe=Ve(!1)},clear(st){for(;he.length!==0;)he.remove(0);O.setValue(G,{value:null,items:[]}),Qe=Ve(!1)},insert(st){const{index:dt,displayValue:gt,exportValue:kt}=st.detail.insert,Dt=he.children[dt],Rt=document.createElement("option");Rt.textContent=gt,Rt.value=kt,Dt?Dt.before(Rt):he.append(Rt),O.setValue(G,{value:Ve(!0),items:rt(st)}),Qe=Ve(!1)},items(st){const{items:dt}=st.detail;for(;he.length!==0;)he.remove(0);for(const gt of dt){const{displayValue:kt,exportValue:Dt}=gt,Rt=document.createElement("option");Rt.textContent=kt,Rt.value=Dt,he.append(Rt)}he.options.length>0&&(he.options[0].selected=!0),O.setValue(G,{value:Ve(!0),items:rt(st)}),Qe=Ve(!1)},indices(st){const dt=new Set(st.detail.indices);for(const gt of st.target.options)gt.selected=dt.has(gt.index);O.setValue(G,{value:Ve(!0)}),Qe=Ve(!1)},editable(st){st.target.disabled=!st.detail.editable}};this._dispatchEventFromSandbox(lt,He)}),he.addEventListener("input",He=>{var st;const lt=Ve(!0);O.setValue(G,{value:lt}),He.preventDefault(),(st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G,name:"Keystroke",value:Qe,changeEx:lt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(he,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],He=>He.target.value)):he.addEventListener("input",function(He){O.setValue(G,{value:Ve(!0)})}),this.data.combo&&this._setTextStyle(he),this._setBackgroundColor(he),this._setDefaultPropertiesFromJS(he),this.container.append(he),this.container}}const Ae=class Ae extends X{constructor(O){var he,re,xe;const{data:G}=O,ie=!Ae.IGNORE_TYPES.has(G.parentType)&&!!((he=G.titleObj)!=null&&he.str||(re=G.contentsObj)!=null&&re.str||(xe=G.richText)!=null&&xe.str);super(O,{isRenderable:ie})}render(){this.container.className="popupAnnotation";const O=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(O.length===0)return this.container;const G=new N({container:this.container,trigger:Array.from(O),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),ie=this.page,he=B.Util.normalizeRect([this.data.parentRect[0],ie.view[3]-this.data.parentRect[1]+ie.view[1],this.data.parentRect[2],ie.view[3]-this.data.parentRect[3]+ie.view[1]]),re=he[0]+this.data.parentRect[2]-this.data.parentRect[0],xe=he[1],{pageWidth:Ve,pageHeight:Qe,pageX:rt,pageY:He}=this.viewport.rawDims;return this.container.style.left=`${100*(re-rt)/Ve}%`,this.container.style.top=`${100*(xe-He)/Qe}%`,this.container.append(G.render()),this.container}};pn(Ae,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let A=Ae;class N{constructor(O){this.container=O.container,this.trigger=O.trigger,this.color=O.color,this.titleObj=O.titleObj,this.modificationDate=O.modificationDate,this.contentsObj=O.contentsObj,this.richText=O.richText,this.hideWrapper=O.hideWrapper||!1,this.pinned=!1}render(){var Ve,Qe;const G=document.createElement("div");G.className="popupWrapper",this.hideElement=this.hideWrapper?G:this.container,this.hideElement.hidden=!0;const ie=document.createElement("div");ie.className="popup";const he=this.color;if(he){const rt=.7*(255-he[0])+he[0],He=.7*(255-he[1])+he[1],lt=.7*(255-he[2])+he[2];ie.style.backgroundColor=B.Util.makeHexColor(rt|0,He|0,lt|0)}const re=document.createElement("h1");re.dir=this.titleObj.dir,re.textContent=this.titleObj.str,ie.append(re);const xe=J.PDFDateString.toDateObject(this.modificationDate);if(xe){const rt=document.createElement("span");rt.className="popupDate",rt.textContent="{{date}}, {{time}}",rt.dataset.l10nId="annotation_date_string",rt.dataset.l10nArgs=JSON.stringify({date:xe.toLocaleDateString(),time:xe.toLocaleTimeString()}),ie.append(rt)}if((Ve=this.richText)!=null&&Ve.str&&(!((Qe=this.contentsObj)!=null&&Qe.str)||this.contentsObj.str===this.richText.str))Ne.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:ie}),ie.lastChild.className="richText popupContent";else{const rt=this._formatContents(this.contentsObj);ie.append(rt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const rt of this.trigger)rt.addEventListener("click",this._toggle.bind(this)),rt.addEventListener("mouseover",this._show.bind(this,!1)),rt.addEventListener("mouseout",this._hide.bind(this,!1));return ie.addEventListener("click",this._hide.bind(this,!0)),G.append(ie),G}_formatContents({str:O,dir:G}){const ie=document.createElement("p");ie.className="popupContent",ie.dir=G;const he=O.split(/(?:\r\n?|\n)/);for(let re=0,xe=he.length;re<xe;++re){const Ve=he[re];ie.append(document.createTextNode(Ve)),re<xe-1&&ie.append(document.createElement("br"))}return ie}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(O=!1){O&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(O=!0){O&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class ne extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0}),this.textContent=O.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const O=document.createElement("div");O.className="annotationTextContent",O.setAttribute("role","comment");for(const G of this.textContent){const ie=document.createElement("span");ie.textContent=G,O.append(ie)}this.container.append(O)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class se extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const O=this.data,{width:G,height:ie}=be(O.rect),he=this.svgFactory.create(G,ie,!0),re=this.svgFactory.createElement("svg:line");return re.setAttribute("x1",O.rect[2]-O.lineCoordinates[0]),re.setAttribute("y1",O.rect[3]-O.lineCoordinates[1]),re.setAttribute("x2",O.rect[2]-O.lineCoordinates[2]),re.setAttribute("y2",O.rect[3]-O.lineCoordinates[3]),re.setAttribute("stroke-width",O.borderStyle.width||1),re.setAttribute("stroke","transparent"),re.setAttribute("fill","transparent"),he.append(re),this.container.append(he),this._createPopup(re,O),this.container}}class we extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const O=this.data,{width:G,height:ie}=be(O.rect),he=this.svgFactory.create(G,ie,!0),re=O.borderStyle.width,xe=this.svgFactory.createElement("svg:rect");return xe.setAttribute("x",re/2),xe.setAttribute("y",re/2),xe.setAttribute("width",G-re),xe.setAttribute("height",ie-re),xe.setAttribute("stroke-width",re||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),he.append(xe),this.container.append(he),this._createPopup(xe,O),this.container}}class Y extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const O=this.data,{width:G,height:ie}=be(O.rect),he=this.svgFactory.create(G,ie,!0),re=O.borderStyle.width,xe=this.svgFactory.createElement("svg:ellipse");return xe.setAttribute("cx",G/2),xe.setAttribute("cy",ie/2),xe.setAttribute("rx",G/2-re/2),xe.setAttribute("ry",ie/2-re/2),xe.setAttribute("stroke-width",re||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),he.append(xe),this.container.append(he),this._createPopup(xe,O),this.container}}class Me extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const O=this.data,{width:G,height:ie}=be(O.rect),he=this.svgFactory.create(G,ie,!0);let re=[];for(const Ve of O.vertices){const Qe=Ve.x-O.rect[0],rt=O.rect[3]-Ve.y;re.push(Qe+","+rt)}re=re.join(" ");const xe=this.svgFactory.createElement(this.svgElementName);return xe.setAttribute("points",re),xe.setAttribute("stroke-width",O.borderStyle.width||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),he.append(xe),this.container.append(he),this._createPopup(xe,O),this.container}}class Je extends Me{constructor(O){super(O),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ze extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ge extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const O=this.data,{width:G,height:ie}=be(O.rect),he=this.svgFactory.create(G,ie,!0);for(const re of O.inkLists){let xe=[];for(const Qe of re){const rt=Qe.x-O.rect[0],He=O.rect[3]-Qe.y;xe.push(`${rt},${He}`)}xe=xe.join(" ");const Ve=this.svgFactory.createElement(this.svgElementName);Ve.setAttribute("points",xe),Ve.setAttribute("stroke-width",O.borderStyle.width||1),Ve.setAttribute("stroke","transparent"),Ve.setAttribute("fill","transparent"),this._createPopup(Ve,O),he.append(Ve)}return this.container.append(he),this.container}}class Le extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Te extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Re extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class $e extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class et extends X{constructor(O){var ie,he,re;const G=!!(O.data.hasPopup||(ie=O.data.titleObj)!=null&&ie.str||(he=O.data.contentsObj)!=null&&he.str||(re=O.data.richText)!=null&&re.str);super(O,{isRenderable:G,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ce extends X{constructor(O){var he;super(O,{isRenderable:!0});const{filename:G,content:ie}=this.data.file;this.filename=(0,J.getFilenameFromUrl)(G,!0),this.content=ie,(he=this.linkService.eventBus)==null||he.dispatch("fileattachmentannotation",{source:this,filename:G,content:ie})}render(){var G,ie;this.container.className="fileAttachmentAnnotation";let O;return this.data.hasAppearance?O=document.createElement("div"):(O=document.createElement("img"),O.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),O.className="popupTriggerArea",O.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((G=this.data.titleObj)!=null&&G.str||(ie=this.data.contentsObj)!=null&&ie.str||this.data.richText)&&this._createPopup(O,this.data),this.container.append(O),this.container}_download(){var O;(O=this.downloadManager)==null||O.openOrDownloadData(this.container,this.content,this.filename)}}const We=class We{static render(O){var Qe,rt;const{annotations:G,div:ie,viewport:he,accessibilityManager:re}=O;(0,J.setLayerDimensions)(ie,he);const xe={data:null,layer:ie,page:O.page,viewport:he,linkService:O.linkService,downloadManager:O.downloadManager,imageResourcesPath:O.imageResourcesPath||"",renderForms:O.renderForms!==!1,svgFactory:new J.DOMSVGFactory,annotationStorage:O.annotationStorage||new y.AnnotationStorage,enableScripting:O.enableScripting===!0,hasJSActions:O.hasJSActions,fieldObjects:O.fieldObjects};let Ve=0;for(const He of G){if(He.annotationType!==B.AnnotationType.POPUP){const{width:dt,height:gt}=be(He.rect);if(dt<=0||gt<=0)continue}xe.data=He;const lt=te.create(xe);if(!lt.isRenderable)continue;const st=lt.render();if(He.hidden&&(st.style.visibility="hidden"),Array.isArray(st))for(const dt of st)dt.style.zIndex=Ve++,tt(Qe=We,Ce,Ji).call(Qe,dt,He.id,ie,re);else st.style.zIndex=Ve++,lt instanceof A?ie.prepend(st):tt(rt=We,Ce,Ji).call(rt,st,He.id,ie,re)}tt(this,Xe,Qi).call(this,ie,O.annotationCanvasMap)}static update(O){const{annotationCanvasMap:G,div:ie,viewport:he}=O;(0,J.setLayerDimensions)(ie,{rotation:he.rotation}),tt(this,Xe,Qi).call(this,ie,G),ie.hidden=!1}};Ce=new WeakSet,Ji=function(O,G,ie,he){const re=O.firstChild||O;re.id=`${J.AnnotationPrefix}${G}`,ie.append(O),he==null||he.moveElementInDOM(ie,O,re,!1)},Xe=new WeakSet,Qi=function(O,G){if(G){for(const[ie,he]of G){const re=O.querySelector(`[data-annotation-id="${ie}"]`);if(!re)continue;const{firstChild:xe}=re;xe?xe.nodeName==="CANVAS"?xe.replaceWith(he):xe.before(he):re.append(he)}G.clear()}},qe(We,Ce),qe(We,Xe);let D=We;j.AnnotationLayer=D},(R,j)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.ColorConverters=void 0;function Pe(J){return Math.floor(Math.max(0,Math.min(1,J))*255).toString(16).padStart(2,"0")}class B{static CMYK_G([y,ve,Ne,ye]){return["G",1-Math.min(1,.3*y+.59*Ne+.11*ve+ye)]}static G_CMYK([y]){return["CMYK",0,0,0,1-y]}static G_RGB([y]){return["RGB",y,y,y]}static G_HTML([y]){const ve=Pe(y);return`#${ve}${ve}${ve}`}static RGB_G([y,ve,Ne]){return["G",.3*y+.59*ve+.11*Ne]}static RGB_HTML([y,ve,Ne]){const ye=Pe(y),Q=Pe(ve),$=Pe(Ne);return`#${ye}${Q}${$}`}static T_HTML(){return"#00000000"}static CMYK_RGB([y,ve,Ne,ye]){return["RGB",1-Math.min(1,y+ye),1-Math.min(1,Ne+ye),1-Math.min(1,ve+ye)]}static CMYK_HTML(y){const ve=this.CMYK_RGB(y).slice(1);return this.RGB_HTML(ve)}static RGB_CMYK([y,ve,Ne]){const ye=1-y,Q=1-ve,$=1-Ne,be=Math.min(ye,Q,$);return["CMYK",ye,Q,$,be]}}j.ColorConverters=B},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.XfaLayer=void 0;var B=Pe(19);class J{static setupStorage(ve,Ne,ye,Q,$){const be=Q.getValue(Ne,{value:null});switch(ye.name){case"textarea":if(be.value!==null&&(ve.textContent=be.value),$==="print")break;ve.addEventListener("input",te=>{Q.setValue(Ne,{value:te.target.value})});break;case"input":if(ye.attributes.type==="radio"||ye.attributes.type==="checkbox"){if(be.value===ye.attributes.xfaOn?ve.setAttribute("checked",!0):be.value===ye.attributes.xfaOff&&ve.removeAttribute("checked"),$==="print")break;ve.addEventListener("change",te=>{Q.setValue(Ne,{value:te.target.checked?te.target.getAttribute("xfaOn"):te.target.getAttribute("xfaOff")})})}else{if(be.value!==null&&ve.setAttribute("value",be.value),$==="print")break;ve.addEventListener("input",te=>{Q.setValue(Ne,{value:te.target.value})})}break;case"select":if(be.value!==null)for(const te of ye.children)te.attributes.value===be.value&&(te.attributes.selected=!0);ve.addEventListener("input",te=>{const X=te.target.options,U=X.selectedIndex===-1?"":X[X.selectedIndex].value;Q.setValue(Ne,{value:U})});break}}static setAttributes({html:ve,element:Ne,storage:ye=null,intent:Q,linkService:$}){const{attributes:be}=Ne,te=ve instanceof HTMLAnchorElement;be.type==="radio"&&(be.name=`${be.name}-${Q}`);for(const[X,U]of Object.entries(be))if(U!=null)switch(X){case"class":U.length&&ve.setAttribute(X,U.join(" "));break;case"dataId":break;case"id":ve.setAttribute("data-element-id",U);break;case"style":Object.assign(ve.style,U);break;case"textContent":ve.textContent=U;break;default:(!te||X!=="href"&&X!=="newWindow")&&ve.setAttribute(X,U)}te&&$.addLinkAttributes(ve,be.href,be.newWindow),ye&&be.dataId&&this.setupStorage(ve,be.dataId,Ne,ye)}static render(ve){var V;const Ne=ve.annotationStorage,ye=ve.linkService,Q=ve.xfaHtml,$=ve.intent||"display",be=document.createElement(Q.name);Q.attributes&&this.setAttributes({html:be,element:Q,intent:$,linkService:ye});const te=[[Q,-1,be]],X=ve.div;if(X.append(be),ve.viewport){const T=`matrix(${ve.viewport.transform.join(",")})`;X.style.transform=T}$!=="richText"&&X.setAttribute("class","xfaLayer xfaFont");const U=[];for(;te.length>0;){const[T,L,H]=te.at(-1);if(L+1===T.children.length){te.pop();continue}const x=T.children[++te.at(-1)[1]];if(x===null)continue;const{name:P}=x;if(P==="#text"){const A=document.createTextNode(x.value);U.push(A),H.append(A);continue}let _;if((V=x==null?void 0:x.attributes)!=null&&V.xmlns?_=document.createElementNS(x.attributes.xmlns,P):_=document.createElement(P),H.append(_),x.attributes&&this.setAttributes({html:_,element:x,storage:Ne,intent:$,linkService:ye}),x.children&&x.children.length>0)te.push([x,-1,_]);else if(x.value){const A=document.createTextNode(x.value);B.XfaText.shouldBuildText(P)&&U.push(A),_.append(A)}}for(const T of X.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))T.setAttribute("readOnly",!0);return{textDivs:U}}static update(ve){const Ne=`matrix(${ve.viewport.transform.join(",")})`;ve.div.style.transform=Ne,ve.div.hidden=!1}}j.XfaLayer=J},(R,j,Pe)=>{Object.defineProperty(j,"__esModule",{value:!0}),j.SVGGraphics=void 0;var B=Pe(6),J=Pe(1),y=Pe(10);let ve=class{constructor(){(0,J.unreachable)("Not implemented: SVGGraphics")}};j.SVGGraphics=ve;{let V=function(_){let A=[];const N=[];for(const ne of _){if(ne.fn==="save"){A.push({fnId:92,fn:"group",items:[]}),N.push(A),A=A.at(-1).items;continue}ne.fn==="restore"?A=N.pop():A.push(ne)}return A},T=function(_){if(Number.isInteger(_))return _.toString();const A=_.toFixed(10);let N=A.length-1;if(A[N]!=="0")return A;do N--;while(A[N]==="0");return A.substring(0,A[N]==="."?N:N+1)},L=function(_){if(_[4]===0&&_[5]===0){if(_[1]===0&&_[2]===0)return _[0]===1&&_[3]===1?"":`scale(${T(_[0])} ${T(_[3])})`;if(_[0]===_[3]&&_[1]===-_[2]){const A=Math.acos(_[0])*180/Math.PI;return`rotate(${T(A)})`}}else if(_[0]===1&&_[1]===0&&_[2]===0&&_[3]===1)return`translate(${T(_[4])} ${T(_[5])})`;return`matrix(${T(_[0])} ${T(_[1])} ${T(_[2])} ${T(_[3])} ${T(_[4])} ${T(_[5])})`};const Ne={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ye="http://www.w3.org/XML/1998/namespace",Q="http://www.w3.org/1999/xlink",$=["butt","round","square"],be=["miter","round","bevel"],te=function(_,A="",N=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!N)return URL.createObjectURL(new Blob([_],{type:A}));const ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let se=`data:${A};base64,`;for(let we=0,Y=_.length;we<Y;we+=3){const Me=_[we]&255,Je=_[we+1]&255,ze=_[we+2]&255,Ge=Me>>2,Le=(Me&3)<<4|Je>>4,Te=we+1<Y?(Je&15)<<2|ze>>6:64,Re=we+2<Y?ze&63:64;se+=ne[Ge]+ne[Le]+ne[Te]+ne[Re]}return se},X=function(){const _=new Uint8Array([137,80,78,71,13,10,26,10]),A=12,N=new Int32Array(256);for(let ze=0;ze<256;ze++){let Ge=ze;for(let Le=0;Le<8;Le++)Ge&1?Ge=3988292384^Ge>>1&2147483647:Ge=Ge>>1&2147483647;N[ze]=Ge}function ne(ze,Ge,Le){let Te=-1;for(let Re=Ge;Re<Le;Re++){const $e=(Te^ze[Re])&255,et=N[$e];Te=Te>>>8^et}return Te^-1}function se(ze,Ge,Le,Te){let Re=Te;const $e=Ge.length;Le[Re]=$e>>24&255,Le[Re+1]=$e>>16&255,Le[Re+2]=$e>>8&255,Le[Re+3]=$e&255,Re+=4,Le[Re]=ze.charCodeAt(0)&255,Le[Re+1]=ze.charCodeAt(1)&255,Le[Re+2]=ze.charCodeAt(2)&255,Le[Re+3]=ze.charCodeAt(3)&255,Re+=4,Le.set(Ge,Re),Re+=Ge.length;const et=ne(Le,Te+4,Re);Le[Re]=et>>24&255,Le[Re+1]=et>>16&255,Le[Re+2]=et>>8&255,Le[Re+3]=et&255}function we(ze,Ge,Le){let Te=1,Re=0;for(let $e=Ge;$e<Le;++$e)Te=(Te+(ze[$e]&255))%65521,Re=(Re+Te)%65521;return Re<<16|Te}function Y(ze){if(!y.isNodeJS)return Me(ze);try{let Ge;parseInt(process.versions.node)>=8?Ge=ze:Ge=Buffer.from(ze);const Le=require$$5.deflateSync(Ge,{level:9});return Le instanceof Uint8Array?Le:new Uint8Array(Le)}catch(Ge){(0,J.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ge)}return Me(ze)}function Me(ze){let Ge=ze.length;const Le=65535,Te=Math.ceil(Ge/Le),Re=new Uint8Array(2+Ge+Te*5+4);let $e=0;Re[$e++]=120,Re[$e++]=156;let et=0;for(;Ge>Le;)Re[$e++]=0,Re[$e++]=255,Re[$e++]=255,Re[$e++]=0,Re[$e++]=0,Re.set(ze.subarray(et,et+Le),$e),$e+=Le,et+=Le,Ge-=Le;Re[$e++]=1,Re[$e++]=Ge&255,Re[$e++]=Ge>>8&255,Re[$e++]=~Ge&65535&255,Re[$e++]=(~Ge&65535)>>8&255,Re.set(ze.subarray(et),$e),$e+=ze.length-et;const ce=we(ze,0,ze.length);return Re[$e++]=ce>>24&255,Re[$e++]=ce>>16&255,Re[$e++]=ce>>8&255,Re[$e++]=ce&255,Re}function Je(ze,Ge,Le,Te){const Re=ze.width,$e=ze.height;let et,ce,D;const F=ze.data;switch(Ge){case J.ImageKind.GRAYSCALE_1BPP:ce=0,et=1,D=Re+7>>3;break;case J.ImageKind.RGB_24BPP:ce=2,et=8,D=Re*3;break;case J.ImageKind.RGBA_32BPP:ce=6,et=8,D=Re*4;break;default:throw new Error("invalid format")}const ee=new Uint8Array((1+D)*$e);let le=0,fe=0;for(let We=0;We<$e;++We)ee[le++]=0,ee.set(F.subarray(fe,fe+D),le),fe+=D,le+=D;if(Ge===J.ImageKind.GRAYSCALE_1BPP&&Te){le=0;for(let We=0;We<$e;We++){le++;for(let Be=0;Be<D;Be++)ee[le++]^=255}}const Ae=new Uint8Array([Re>>24&255,Re>>16&255,Re>>8&255,Re&255,$e>>24&255,$e>>16&255,$e>>8&255,$e&255,et,ce,0,0,0]),Ce=Y(ee),je=_.length+A*3+Ae.length+Ce.length,Xe=new Uint8Array(je);let Ue=0;return Xe.set(_,Ue),Ue+=_.length,se("IHDR",Ae,Xe,Ue),Ue+=A+Ae.length,se("IDATA",Ce,Xe,Ue),Ue+=A+Ce.length,se("IEND",new Uint8Array(0),Xe,Ue),te(Xe,"image/png",Le)}return function(Ge,Le,Te){const Re=Ge.kind===void 0?J.ImageKind.GRAYSCALE_1BPP:Ge.kind;return Je(Ge,Re,Le,Te)}}();class U{constructor(){this.fontSizeScale=1,this.fontWeight=Ne.fontWeight,this.fontSize=0,this.textMatrix=J.IDENTITY_MATRIX,this.fontMatrix=J.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=J.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Ne.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(A,N){this.x=A,this.y=N}}let H=0,x=0,P=0;j.SVGGraphics=ve=class{constructor(_,A,N=!1){(0,B.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new B.DOMSVGFactory,this.current=new U,this.transformMatrix=J.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=_,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!N,this._operatorIdMapping=[];for(const ne in J.OPS)this._operatorIdMapping[J.OPS[ne]]=ne}getObject(_,A=null){return typeof _=="string"?_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_):A}save(){this.transformStack.push(this.transformMatrix);const _=this.current;this.extraStack.push(_),this.current=_.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(_){this.save(),this.executeOpTree(_),this.restore()}loadDependencies(_){const A=_.fnArray,N=_.argsArray;for(let ne=0,se=A.length;ne<se;ne++)if(A[ne]===J.OPS.dependency)for(const we of N[ne]){const Y=we.startsWith("g_")?this.commonObjs:this.objs,Me=new Promise(Je=>{Y.get(we,Je)});this.current.dependencies.push(Me)}return Promise.all(this.current.dependencies)}transform(_,A,N,ne,se,we){const Y=[_,A,N,ne,se,we];this.transformMatrix=J.Util.transform(this.transformMatrix,Y),this.tgrp=null}getSVG(_,A){this.viewport=A;const N=this._initialize(A);return this.loadDependencies(_).then(()=>(this.transformMatrix=J.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(_)),N))}convertOpList(_){const A=this._operatorIdMapping,N=_.argsArray,ne=_.fnArray,se=[];for(let we=0,Y=ne.length;we<Y;we++){const Me=ne[we];se.push({fnId:Me,fn:A[Me],args:N[we]})}return V(se)}executeOpTree(_){for(const A of _){const N=A.fn,ne=A.fnId,se=A.args;switch(ne|0){case J.OPS.beginText:this.beginText();break;case J.OPS.dependency:break;case J.OPS.setLeading:this.setLeading(se);break;case J.OPS.setLeadingMoveText:this.setLeadingMoveText(se[0],se[1]);break;case J.OPS.setFont:this.setFont(se);break;case J.OPS.showText:this.showText(se[0]);break;case J.OPS.showSpacedText:this.showText(se[0]);break;case J.OPS.endText:this.endText();break;case J.OPS.moveText:this.moveText(se[0],se[1]);break;case J.OPS.setCharSpacing:this.setCharSpacing(se[0]);break;case J.OPS.setWordSpacing:this.setWordSpacing(se[0]);break;case J.OPS.setHScale:this.setHScale(se[0]);break;case J.OPS.setTextMatrix:this.setTextMatrix(se[0],se[1],se[2],se[3],se[4],se[5]);break;case J.OPS.setTextRise:this.setTextRise(se[0]);break;case J.OPS.setTextRenderingMode:this.setTextRenderingMode(se[0]);break;case J.OPS.setLineWidth:this.setLineWidth(se[0]);break;case J.OPS.setLineJoin:this.setLineJoin(se[0]);break;case J.OPS.setLineCap:this.setLineCap(se[0]);break;case J.OPS.setMiterLimit:this.setMiterLimit(se[0]);break;case J.OPS.setFillRGBColor:this.setFillRGBColor(se[0],se[1],se[2]);break;case J.OPS.setStrokeRGBColor:this.setStrokeRGBColor(se[0],se[1],se[2]);break;case J.OPS.setStrokeColorN:this.setStrokeColorN(se);break;case J.OPS.setFillColorN:this.setFillColorN(se);break;case J.OPS.shadingFill:this.shadingFill(se[0]);break;case J.OPS.setDash:this.setDash(se[0],se[1]);break;case J.OPS.setRenderingIntent:this.setRenderingIntent(se[0]);break;case J.OPS.setFlatness:this.setFlatness(se[0]);break;case J.OPS.setGState:this.setGState(se[0]);break;case J.OPS.fill:this.fill();break;case J.OPS.eoFill:this.eoFill();break;case J.OPS.stroke:this.stroke();break;case J.OPS.fillStroke:this.fillStroke();break;case J.OPS.eoFillStroke:this.eoFillStroke();break;case J.OPS.clip:this.clip("nonzero");break;case J.OPS.eoClip:this.clip("evenodd");break;case J.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case J.OPS.paintImageXObject:this.paintImageXObject(se[0]);break;case J.OPS.paintInlineImageXObject:this.paintInlineImageXObject(se[0]);break;case J.OPS.paintImageMaskXObject:this.paintImageMaskXObject(se[0]);break;case J.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(se[0],se[1]);break;case J.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case J.OPS.closePath:this.closePath();break;case J.OPS.closeStroke:this.closeStroke();break;case J.OPS.closeFillStroke:this.closeFillStroke();break;case J.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case J.OPS.nextLine:this.nextLine();break;case J.OPS.transform:this.transform(se[0],se[1],se[2],se[3],se[4],se[5]);break;case J.OPS.constructPath:this.constructPath(se[0],se[1]);break;case J.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,J.warn)(`Unimplemented operator ${N}`);break}}}setWordSpacing(_){this.current.wordSpacing=_}setCharSpacing(_){this.current.charSpacing=_}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(_,A,N,ne,se,we){const Y=this.current;Y.textMatrix=Y.lineMatrix=[_,A,N,ne,se,we],Y.textMatrixScale=Math.hypot(_,A),Y.x=Y.lineX=0,Y.y=Y.lineY=0,Y.xcoords=[],Y.ycoords=[],Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.tspan.setAttributeNS(null,"font-family",Y.fontFamily),Y.tspan.setAttributeNS(null,"font-size",`${T(Y.fontSize)}px`),Y.tspan.setAttributeNS(null,"y",T(-Y.y)),Y.txtElement=this.svgFactory.createElement("svg:text"),Y.txtElement.append(Y.tspan)}beginText(){const _=this.current;_.x=_.lineX=0,_.y=_.lineY=0,_.textMatrix=J.IDENTITY_MATRIX,_.lineMatrix=J.IDENTITY_MATRIX,_.textMatrixScale=1,_.tspan=this.svgFactory.createElement("svg:tspan"),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtgrp=this.svgFactory.createElement("svg:g"),_.xcoords=[],_.ycoords=[]}moveText(_,A){const N=this.current;N.x=N.lineX+=_,N.y=N.lineY+=A,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${T(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",T(-N.y))}showText(_){const A=this.current,N=A.font,ne=A.fontSize;if(ne===0)return;const se=A.fontSizeScale,we=A.charSpacing,Y=A.wordSpacing,Me=A.fontDirection,Je=A.textHScale*Me,ze=N.vertical,Ge=ze?1:-1,Le=N.defaultVMetrics,Te=ne*A.fontMatrix[0];let Re=0;for(const ce of _){if(ce===null){Re+=Me*Y;continue}else if(typeof ce=="number"){Re+=Ge*ce*ne/1e3;continue}const D=(ce.isSpace?Y:0)+we,F=ce.fontChar;let ee,le,fe=ce.width;if(ze){let Ce;const je=ce.vmetric||Le;Ce=ce.vmetric?je[1]:fe*.5,Ce=-Ce*Te;const Xe=je[2]*Te;fe=je?-je[0]:fe,ee=Ce/se,le=(Re+Xe)/se}else ee=Re/se,le=0;(ce.isInFont||N.missingFile)&&(A.xcoords.push(A.x+ee),ze&&A.ycoords.push(-A.y+le),A.tspan.textContent+=F);let Ae;ze?Ae=fe*Te-D*Me:Ae=fe*Te+D*Me,Re+=Ae}A.tspan.setAttributeNS(null,"x",A.xcoords.map(T).join(" ")),ze?A.tspan.setAttributeNS(null,"y",A.ycoords.map(T).join(" ")):A.tspan.setAttributeNS(null,"y",T(-A.y)),ze?A.y-=Re:A.x+=Re*Je,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${T(A.fontSize)}px`),A.fontStyle!==Ne.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==Ne.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const $e=A.textRenderingMode&J.TextRenderingMode.FILL_STROKE_MASK;if($e===J.TextRenderingMode.FILL||$e===J.TextRenderingMode.FILL_STROKE?(A.fillColor!==Ne.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===J.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),$e===J.TextRenderingMode.STROKE||$e===J.TextRenderingMode.FILL_STROKE){const ce=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,ce)}let et=A.textMatrix;A.textRise!==0&&(et=et.slice(),et[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${L(et)} scale(${T(Je)}, -1)`),A.txtElement.setAttributeNS(ye,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(_,A){this.setLeading(-A),this.moveText(_,A)}addFontStyle(_){if(!_.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=te(_.data,_.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${_.loadedName}"; src: url(${A}); }
`}setFont(_){const A=this.current,N=this.commonObjs.get(_[0]);let ne=_[1];A.font=N,this.embedFonts&&!N.missingFile&&!this.embeddedFonts[N.loadedName]&&(this.addFontStyle(N),this.embeddedFonts[N.loadedName]=N),A.fontMatrix=N.fontMatrix||J.FONT_IDENTITY_MATRIX;let se="normal";N.black?se="900":N.bold&&(se="bold");const we=N.italic?"italic":"normal";ne<0?(ne=-ne,A.fontDirection=-1):A.fontDirection=1,A.fontSize=ne,A.fontFamily=N.loadedName,A.fontWeight=se,A.fontStyle=we,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",T(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const _=this.current;_.textRenderingMode&J.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=_.txtElement)!=null&&A.hasChildNodes())&&(_.element=_.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(_){_>0&&(this.current.lineWidth=_)}setLineCap(_){this.current.lineCap=$[_]}setLineJoin(_){this.current.lineJoin=be[_]}setMiterLimit(_){this.current.miterLimit=_}setStrokeAlpha(_){this.current.strokeAlpha=_}setStrokeRGBColor(_,A,N){this.current.strokeColor=J.Util.makeHexColor(_,A,N)}setFillAlpha(_){this.current.fillAlpha=_}setFillRGBColor(_,A,N){this.current.fillColor=J.Util.makeHexColor(_,A,N),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(_){this.current.strokeColor=this._makeColorN_Pattern(_)}setFillColorN(_){this.current.fillColor=this._makeColorN_Pattern(_)}shadingFill(_){const A=this.viewport.width,N=this.viewport.height,ne=J.Util.inverseTransform(this.transformMatrix),se=J.Util.applyTransform([0,0],ne),we=J.Util.applyTransform([0,N],ne),Y=J.Util.applyTransform([A,0],ne),Me=J.Util.applyTransform([A,N],ne),Je=Math.min(se[0],we[0],Y[0],Me[0]),ze=Math.min(se[1],we[1],Y[1],Me[1]),Ge=Math.max(se[0],we[0],Y[0],Me[0]),Le=Math.max(se[1],we[1],Y[1],Me[1]),Te=this.svgFactory.createElement("svg:rect");Te.setAttributeNS(null,"x",Je),Te.setAttributeNS(null,"y",ze),Te.setAttributeNS(null,"width",Ge-Je),Te.setAttributeNS(null,"height",Le-ze),Te.setAttributeNS(null,"fill",this._makeShadingPattern(_)),this.current.fillAlpha<1&&Te.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Te)}_makeColorN_Pattern(_){return _[0]==="TilingPattern"?this._makeTilingPattern(_):this._makeShadingPattern(_)}_makeTilingPattern(_){const A=_[1],N=_[2],ne=_[3]||J.IDENTITY_MATRIX,[se,we,Y,Me]=_[4],Je=_[5],ze=_[6],Ge=_[7],Le=`shading${P++}`,[Te,Re,$e,et]=J.Util.normalizeRect([...J.Util.applyTransform([se,we],ne),...J.Util.applyTransform([Y,Me],ne)]),[ce,D]=J.Util.singularValueDecompose2dScale(ne),F=Je*ce,ee=ze*D,le=this.svgFactory.createElement("svg:pattern");le.setAttributeNS(null,"id",Le),le.setAttributeNS(null,"patternUnits","userSpaceOnUse"),le.setAttributeNS(null,"width",F),le.setAttributeNS(null,"height",ee),le.setAttributeNS(null,"x",`${Te}`),le.setAttributeNS(null,"y",`${Re}`);const fe=this.svg,Ae=this.transformMatrix,Ce=this.current.fillColor,je=this.current.strokeColor,Xe=this.svgFactory.create($e-Te,et-Re);if(this.svg=Xe,this.transformMatrix=ne,Ge===2){const Ue=J.Util.makeHexColor(...A);this.current.fillColor=Ue,this.current.strokeColor=Ue}return this.executeOpTree(this.convertOpList(N)),this.svg=fe,this.transformMatrix=Ae,this.current.fillColor=Ce,this.current.strokeColor=je,le.append(Xe.childNodes[0]),this.defs.append(le),`url(#${Le})`}_makeShadingPattern(_){switch(typeof _=="string"&&(_=this.objs.get(_)),_[0]){case"RadialAxial":const A=`shading${P++}`,N=_[3];let ne;switch(_[1]){case"axial":const se=_[4],we=_[5];ne=this.svgFactory.createElement("svg:linearGradient"),ne.setAttributeNS(null,"id",A),ne.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ne.setAttributeNS(null,"x1",se[0]),ne.setAttributeNS(null,"y1",se[1]),ne.setAttributeNS(null,"x2",we[0]),ne.setAttributeNS(null,"y2",we[1]);break;case"radial":const Y=_[4],Me=_[5],Je=_[6],ze=_[7];ne=this.svgFactory.createElement("svg:radialGradient"),ne.setAttributeNS(null,"id",A),ne.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ne.setAttributeNS(null,"cx",Me[0]),ne.setAttributeNS(null,"cy",Me[1]),ne.setAttributeNS(null,"r",ze),ne.setAttributeNS(null,"fx",Y[0]),ne.setAttributeNS(null,"fy",Y[1]),ne.setAttributeNS(null,"fr",Je);break;default:throw new Error(`Unknown RadialAxial type: ${_[1]}`)}for(const se of N){const we=this.svgFactory.createElement("svg:stop");we.setAttributeNS(null,"offset",se[0]),we.setAttributeNS(null,"stop-color",se[1]),ne.append(we)}return this.defs.append(ne),`url(#${A})`;case"Mesh":return(0,J.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${_[0]}`)}}setDash(_,A){this.current.dashArray=_,this.current.dashPhase=A}constructPath(_,A){const N=this.current;let ne=N.x,se=N.y,we=[],Y=0;for(const Me of _)switch(Me|0){case J.OPS.rectangle:ne=A[Y++],se=A[Y++];const Je=A[Y++],ze=A[Y++],Ge=ne+Je,Le=se+ze;we.push("M",T(ne),T(se),"L",T(Ge),T(se),"L",T(Ge),T(Le),"L",T(ne),T(Le),"Z");break;case J.OPS.moveTo:ne=A[Y++],se=A[Y++],we.push("M",T(ne),T(se));break;case J.OPS.lineTo:ne=A[Y++],se=A[Y++],we.push("L",T(ne),T(se));break;case J.OPS.curveTo:ne=A[Y+4],se=A[Y+5],we.push("C",T(A[Y]),T(A[Y+1]),T(A[Y+2]),T(A[Y+3]),T(ne),T(se)),Y+=6;break;case J.OPS.curveTo2:we.push("C",T(ne),T(se),T(A[Y]),T(A[Y+1]),T(A[Y+2]),T(A[Y+3])),ne=A[Y+2],se=A[Y+3],Y+=4;break;case J.OPS.curveTo3:ne=A[Y+2],se=A[Y+3],we.push("C",T(A[Y]),T(A[Y+1]),T(ne),T(se),T(ne),T(se)),Y+=4;break;case J.OPS.closePath:we.push("Z");break}we=we.join(" "),N.path&&_.length>0&&_[0]!==J.OPS.rectangle&&_[0]!==J.OPS.moveTo?we=N.path.getAttributeNS(null,"d")+we:(N.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(N.path)),N.path.setAttributeNS(null,"d",we),N.path.setAttributeNS(null,"fill","none"),N.element=N.path,N.setCurrentPoint(ne,se)}endPath(){const _=this.current;if(_.path=null,!this.pendingClip)return;if(!_.element){this.pendingClip=null;return}const A=`clippath${H++}`,N=this.svgFactory.createElement("svg:clipPath");N.setAttributeNS(null,"id",A),N.setAttributeNS(null,"transform",L(this.transformMatrix));const ne=_.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ne.setAttributeNS(null,"clip-rule","evenodd"):ne.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,N.append(ne),this.defs.append(N),_.activeClipUrl){_.clipGroup=null;for(const se of this.extraStack)se.clipGroup=null;N.setAttributeNS(null,"clip-path",_.activeClipUrl)}_.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(_){this.pendingClip=_}closePath(){const _=this.current;if(_.path){const A=`${_.path.getAttributeNS(null,"d")}Z`;_.path.setAttributeNS(null,"d",A)}}setLeading(_){this.current.leading=-_}setTextRise(_){this.current.textRise=_}setTextRenderingMode(_){this.current.textRenderingMode=_}setHScale(_){this.current.textHScale=_/100}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(const[A,N]of _)switch(A){case"LW":this.setLineWidth(N);break;case"LC":this.setLineCap(N);break;case"LJ":this.setLineJoin(N);break;case"ML":this.setMiterLimit(N);break;case"D":this.setDash(N[0],N[1]);break;case"RI":this.setRenderingIntent(N);break;case"FL":this.setFlatness(N);break;case"Font":this.setFont(N);break;case"CA":this.setStrokeAlpha(N);break;case"ca":this.setFillAlpha(N);break;default:(0,J.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const _=this.current;_.element&&(_.element.setAttributeNS(null,"fill",_.fillColor),_.element.setAttributeNS(null,"fill-opacity",_.fillAlpha),this.endPath())}stroke(){const _=this.current;_.element&&(this._setStrokeAttributes(_.element),_.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(_,A=1){const N=this.current;let ne=N.dashArray;A!==1&&ne.length>0&&(ne=ne.map(function(se){return A*se})),_.setAttributeNS(null,"stroke",N.strokeColor),_.setAttributeNS(null,"stroke-opacity",N.strokeAlpha),_.setAttributeNS(null,"stroke-miterlimit",T(N.miterLimit)),_.setAttributeNS(null,"stroke-linecap",N.lineCap),_.setAttributeNS(null,"stroke-linejoin",N.lineJoin),_.setAttributeNS(null,"stroke-width",T(A*N.lineWidth)+"px"),_.setAttributeNS(null,"stroke-dasharray",ne.map(T).join(" ")),_.setAttributeNS(null,"stroke-dashoffset",T(A*N.dashPhase)+"px")}eoFill(){var _;(_=this.current.element)==null||_.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var _;(_=this.current.element)==null||_.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const _=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y","0"),_.setAttributeNS(null,"width","1px"),_.setAttributeNS(null,"height","1px"),_.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(_)}paintImageXObject(_){const A=this.getObject(_);if(!A){(0,J.warn)(`Dependent image with object ID ${_} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(_,A){const N=_.width,ne=_.height,se=X(_,this.forceDataSchema,!!A),we=this.svgFactory.createElement("svg:rect");we.setAttributeNS(null,"x","0"),we.setAttributeNS(null,"y","0"),we.setAttributeNS(null,"width",T(N)),we.setAttributeNS(null,"height",T(ne)),this.current.element=we,this.clip("nonzero");const Y=this.svgFactory.createElement("svg:image");Y.setAttributeNS(Q,"xlink:href",se),Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y",T(-ne)),Y.setAttributeNS(null,"width",T(N)+"px"),Y.setAttributeNS(null,"height",T(ne)+"px"),Y.setAttributeNS(null,"transform",`scale(${T(1/N)} ${T(-1/ne)})`),A?A.append(Y):this._ensureTransformGroup().append(Y)}paintImageMaskXObject(_){const A=this.getObject(_.data,_);if(A.bitmap){(0,J.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const N=this.current,ne=A.width,se=A.height,we=N.fillColor;N.maskId=`mask${x++}`;const Y=this.svgFactory.createElement("svg:mask");Y.setAttributeNS(null,"id",N.maskId);const Me=this.svgFactory.createElement("svg:rect");Me.setAttributeNS(null,"x","0"),Me.setAttributeNS(null,"y","0"),Me.setAttributeNS(null,"width",T(ne)),Me.setAttributeNS(null,"height",T(se)),Me.setAttributeNS(null,"fill",we),Me.setAttributeNS(null,"mask",`url(#${N.maskId})`),this.defs.append(Y),this._ensureTransformGroup().append(Me),this.paintInlineImageXObject(A,Y)}paintFormXObjectBegin(_,A){if(Array.isArray(_)&&_.length===6&&this.transform(_[0],_[1],_[2],_[3],_[4],_[5]),A){const N=A[2]-A[0],ne=A[3]-A[1],se=this.svgFactory.createElement("svg:rect");se.setAttributeNS(null,"x",A[0]),se.setAttributeNS(null,"y",A[1]),se.setAttributeNS(null,"width",T(N)),se.setAttributeNS(null,"height",T(ne)),this.current.element=se,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(_){const A=this.svgFactory.create(_.width,_.height),N=this.svgFactory.createElement("svg:defs");A.append(N),this.defs=N;const ne=this.svgFactory.createElement("svg:g");return ne.setAttributeNS(null,"transform",L(_.transform)),A.append(ne),this.svg=ne,A}_ensureClipGroup(){if(!this.current.clipGroup){const _=this.svgFactory.createElement("svg:g");_.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(_),this.current.clipGroup=_}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",L(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(R){var j=__webpack_module_cache__[R];if(j!==void 0)return j.exports;var Pe=__webpack_module_cache__[R]={exports:{}};return __webpack_modules__[R](Pe,Pe.exports,__w_pdfjs_require__),Pe.exports}var __webpack_exports__={};return(()=>{var R=__webpack_exports__;Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"AbortException",{enumerable:!0,get:function(){return j.AbortException}}),Object.defineProperty(R,"AnnotationEditorLayer",{enumerable:!0,get:function(){return y.AnnotationEditorLayer}}),Object.defineProperty(R,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return j.AnnotationEditorParamsType}}),Object.defineProperty(R,"AnnotationEditorType",{enumerable:!0,get:function(){return j.AnnotationEditorType}}),Object.defineProperty(R,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ve.AnnotationEditorUIManager}}),Object.defineProperty(R,"AnnotationLayer",{enumerable:!0,get:function(){return Ne.AnnotationLayer}}),Object.defineProperty(R,"AnnotationMode",{enumerable:!0,get:function(){return j.AnnotationMode}}),Object.defineProperty(R,"CMapCompressionType",{enumerable:!0,get:function(){return j.CMapCompressionType}}),Object.defineProperty(R,"FeatureTest",{enumerable:!0,get:function(){return j.FeatureTest}}),Object.defineProperty(R,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ye.GlobalWorkerOptions}}),Object.defineProperty(R,"InvalidPDFException",{enumerable:!0,get:function(){return j.InvalidPDFException}}),Object.defineProperty(R,"MissingPDFException",{enumerable:!0,get:function(){return j.MissingPDFException}}),Object.defineProperty(R,"OPS",{enumerable:!0,get:function(){return j.OPS}}),Object.defineProperty(R,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Pe.PDFDataRangeTransport}}),Object.defineProperty(R,"PDFDateString",{enumerable:!0,get:function(){return B.PDFDateString}}),Object.defineProperty(R,"PDFWorker",{enumerable:!0,get:function(){return Pe.PDFWorker}}),Object.defineProperty(R,"PasswordResponses",{enumerable:!0,get:function(){return j.PasswordResponses}}),Object.defineProperty(R,"PermissionFlag",{enumerable:!0,get:function(){return j.PermissionFlag}}),Object.defineProperty(R,"PixelsPerInch",{enumerable:!0,get:function(){return B.PixelsPerInch}}),Object.defineProperty(R,"RenderingCancelledException",{enumerable:!0,get:function(){return B.RenderingCancelledException}}),Object.defineProperty(R,"SVGGraphics",{enumerable:!0,get:function(){return Q.SVGGraphics}}),Object.defineProperty(R,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return j.UNSUPPORTED_FEATURES}}),Object.defineProperty(R,"UnexpectedResponseException",{enumerable:!0,get:function(){return j.UnexpectedResponseException}}),Object.defineProperty(R,"Util",{enumerable:!0,get:function(){return j.Util}}),Object.defineProperty(R,"VerbosityLevel",{enumerable:!0,get:function(){return j.VerbosityLevel}}),Object.defineProperty(R,"XfaLayer",{enumerable:!0,get:function(){return $.XfaLayer}}),Object.defineProperty(R,"build",{enumerable:!0,get:function(){return Pe.build}}),Object.defineProperty(R,"createPromiseCapability",{enumerable:!0,get:function(){return j.createPromiseCapability}}),Object.defineProperty(R,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return j.createValidAbsoluteUrl}}),Object.defineProperty(R,"getDocument",{enumerable:!0,get:function(){return Pe.getDocument}}),Object.defineProperty(R,"getFilenameFromUrl",{enumerable:!0,get:function(){return B.getFilenameFromUrl}}),Object.defineProperty(R,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return B.getPdfFilenameFromUrl}}),Object.defineProperty(R,"getXfaPageViewport",{enumerable:!0,get:function(){return B.getXfaPageViewport}}),Object.defineProperty(R,"isDataScheme",{enumerable:!0,get:function(){return B.isDataScheme}}),Object.defineProperty(R,"isPdfFile",{enumerable:!0,get:function(){return B.isPdfFile}}),Object.defineProperty(R,"loadScript",{enumerable:!0,get:function(){return B.loadScript}}),Object.defineProperty(R,"renderTextLayer",{enumerable:!0,get:function(){return J.renderTextLayer}}),Object.defineProperty(R,"setLayerDimensions",{enumerable:!0,get:function(){return B.setLayerDimensions}}),Object.defineProperty(R,"shadow",{enumerable:!0,get:function(){return j.shadow}}),Object.defineProperty(R,"updateTextLayer",{enumerable:!0,get:function(){return J.updateTextLayer}}),Object.defineProperty(R,"version",{enumerable:!0,get:function(){return Pe.version}});var j=__w_pdfjs_require__(1),Pe=__w_pdfjs_require__(2),B=__w_pdfjs_require__(6),J=__w_pdfjs_require__(26),y=__w_pdfjs_require__(27),ve=__w_pdfjs_require__(5),Ne=__w_pdfjs_require__(32),ye=__w_pdfjs_require__(14),Q=__w_pdfjs_require__(35),$=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(R){var j=reactExports,Pe=pdfExports;function B(w){var W=Object.create(null);return w&&Object.keys(w).forEach(function(oe){if(oe!=="default"){var pe=Object.getOwnPropertyDescriptor(w,oe);Object.defineProperty(W,oe,pe.get?pe:{enumerable:!0,get:function(){return w[oe]}})}}),W.default=w,Object.freeze(W)}var J,y=B(j),ve=B(Pe);R.AnnotationType=void 0,(J=R.AnnotationType||(R.AnnotationType={}))[J.Text=1]="Text",J[J.Link=2]="Link",J[J.FreeText=3]="FreeText",J[J.Line=4]="Line",J[J.Square=5]="Square",J[J.Circle=6]="Circle",J[J.Polygon=7]="Polygon",J[J.Polyline=8]="Polyline",J[J.Highlight=9]="Highlight",J[J.Underline=10]="Underline",J[J.Squiggly=11]="Squiggly",J[J.StrikeOut=12]="StrikeOut",J[J.Stamp=13]="Stamp",J[J.Caret=14]="Caret",J[J.Ink=15]="Ink",J[J.Popup=16]="Popup",J[J.FileAttachment=17]="FileAttachment";var Ne=function(w,W){return Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,pe){oe.__proto__=pe}||function(oe,pe){for(var _e in pe)Object.prototype.hasOwnProperty.call(pe,_e)&&(oe[_e]=pe[_e])},Ne(w,W)};function ye(w,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function oe(){this.constructor=w}Ne(w,W),w.prototype=W===null?Object.create(W):(oe.prototype=W.prototype,new oe)}var Q,$=function(){return $=Object.assign||function(w){for(var W,oe=1,pe=arguments.length;oe<pe;oe++)for(var _e in W=arguments[oe])Object.prototype.hasOwnProperty.call(W,_e)&&(w[_e]=W[_e]);return w},$.apply(this,arguments)};R.TextDirection=void 0,(Q=R.TextDirection||(R.TextDirection={})).RightToLeft="RTL",Q.LeftToRight="LTR";var be,te=y.createContext({currentTheme:"light",direction:R.TextDirection.LeftToRight,setCurrentTheme:function(){}}),X=function(w){var W=[];return Object.keys(w).forEach(function(oe){oe&&w[oe]&&W.push(oe)}),W.join(" ")},U=typeof window<"u"?y.useLayoutEffect:y.useEffect,V=function(w){var W=y.useRef(null),oe=w.once,pe=w.threshold,_e=w.onVisibilityChanged;return U(function(){var Ee=W.current;if(Ee){var De=new IntersectionObserver(function(ke){ke.forEach(function(me){var Oe=me.isIntersecting,Fe=me.intersectionRatio;_e({isVisible:Oe,ratio:Fe}),Oe&&oe&&(De.unobserve(Ee),De.disconnect())})},{threshold:pe||0});return De.observe(Ee),function(){De.unobserve(Ee),De.disconnect()}}},[]),W},T=function(w){var W=w.children,oe=w.ignoreDirection,pe=oe!==void 0&&oe,_e=w.size,Ee=_e===void 0?24:_e,De=y.useContext(te).direction,ke=!pe&&De===R.TextDirection.RightToLeft,me="".concat(Ee||24,"px");return y.createElement("svg",{"aria-hidden":"true",className:X({"rpv-core__icon":!0,"rpv-core__icon--rtl":ke}),focusable:"false",height:me,viewBox:"0 0 24 24",width:me},W)},L=function(){return y.createElement(T,{size:16},y.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},H=function(w){var W=w.children,oe=w.testId,pe=w.onClick,_e=y.useContext(te).direction===R.TextDirection.RightToLeft,Ee=oe?{"data-testid":oe}:{};return y.createElement("button",$({className:X({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":_e}),type:"button",onClick:pe},Ee),W)},x=function(w){var W=w.size,oe=W===void 0?"4rem":W,pe=w.testId,_e=y.useState(!1),Ee=_e[0],De=_e[1],ke=pe?{"data-testid":pe}:{},me=V({onVisibilityChanged:function(Oe){De(Oe.isVisible)}});return y.createElement("div",$({},ke,{className:X({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Ee}),ref:me,style:{height:oe,width:oe}}))},P=function(w){var W=w.ariaLabel,oe=W===void 0?"":W,pe=w.autoFocus,_e=pe!==void 0&&pe,Ee=w.placeholder,De=Ee===void 0?"":Ee,ke=w.testId,me=w.type,Oe=me===void 0?"text":me,Fe=w.value,Ze=Fe===void 0?"":Fe,Ke=w.onChange,Ye=w.onKeyDown,ht=Ye===void 0?function(){}:Ye,ct=y.useContext(te).direction,ot=y.useRef(),Ut=ct===R.TextDirection.RightToLeft,St={ref:ot,"data-testid":"","aria-label":oe,className:X({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Ut}),placeholder:De,value:Ze,onChange:function(Et){return Ke(Et.target.value)},onKeyDown:ht};return ke&&(St["data-testid"]=ke),U(function(){if(_e){var Et=ot.current;if(Et){var Tt=window.scrollX,vt=window.scrollY;Et.focus(),window.scrollTo(Tt,vt)}}},[]),Oe==="text"?y.createElement("input",$({type:"text"},St)):y.createElement("input",$({type:"password"},St))};(function(w){w[w.ExitFullScreen=0]="ExitFullScreen",w[w.FullScreenChange=1]="FullScreenChange",w[w.FullScreenElement=2]="FullScreenElement",w[w.FullScreenEnabled=3]="FullScreenEnabled",w[w.RequestFullScreen=4]="RequestFullScreen"})(be||(be={}));var _,A={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},N={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},ne={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},se=typeof window<"u",we=se&&(be.FullScreenEnabled in document&&A||N.FullScreenEnabled in document&&N||ne.FullScreenEnabled in document&&ne)||A,Y=function(){return se&&we.FullScreenEnabled in document&&document[we.FullScreenEnabled]===!0},Me=function(w){return se?w[we.ExitFullScreen]():Promise.resolve({})},Je=function(){return se?document[we.FullScreenElement]:null},ze=function(w,W){var oe=y.useRef(),pe=function(){oe.current&&clearTimeout(oe.current)};return y.useEffect(function(){return function(){return pe()}},[]),y.useCallback(function(){for(var _e=[],Ee=0;Ee<arguments.length;Ee++)_e[Ee]=arguments[Ee];pe(),oe.current=setTimeout(function(){w.apply(void 0,_e)},W)},[w,W])},Ge=function(){var w=y.useRef(!1);return y.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]),w},Le=function(w){var W=y.useRef(w);return y.useEffect(function(){W.current=w},[w]),W.current};(function(w){w.NotRenderedYet="NotRenderedYet",w.Rendering="Rendering",w.Rendered="Rendered"})(_||(_={}));var Te,Re=-9999,$e=function(w){var W=w.doc,oe=W.numPages,pe=W.loadingTask.docId,_e=y.useMemo(function(){return Array(oe).fill(null).map(function(ke,me){return{pageIndex:me,renderStatus:_.NotRenderedYet,visibility:Re}})},[pe]),Ee=y.useRef({currentRenderingPage:-1,startRange:0,endRange:oe-1,visibilities:_e}),De=function(ke,me){Ee.current.visibilities[ke].visibility=me};return{getHighestPriorityPage:function(){var ke=Ee.current.visibilities.slice(Ee.current.startRange,Ee.current.endRange+1).filter(function(Ke){return Ke.visibility>Re});if(!ke.length)return-1;for(var me=ke[0].pageIndex,Oe=ke[ke.length-1].pageIndex,Fe=ke.length,Ze=0;Ze<Fe;Ze++){if(ke[Ze].renderStatus===_.Rendering)return-1;if(ke[Ze].renderStatus===_.NotRenderedYet)return ke[Ze].pageIndex}return Oe+1<oe&&Ee.current.visibilities[Oe+1].renderStatus!==_.Rendered?Oe+1:me-1>=0&&Ee.current.visibilities[me-1].renderStatus!==_.Rendered?me-1:-1},isInRange:function(ke){return ke>=Ee.current.startRange&&ke<=Ee.current.endRange},markNotRendered:function(){for(var ke=0;ke<oe;ke++)Ee.current.visibilities[ke].renderStatus=_.NotRenderedYet},markRendered:function(ke){Ee.current.visibilities[ke].renderStatus=_.Rendered},markRendering:function(ke){Ee.current.currentRenderingPage!==-1&&Ee.current.currentRenderingPage!==ke&&Ee.current.visibilities[Ee.current.currentRenderingPage].renderStatus===_.Rendering&&(Ee.current.visibilities[Ee.current.currentRenderingPage].renderStatus=_.NotRenderedYet),Ee.current.visibilities[ke].renderStatus=_.Rendering,Ee.current.currentRenderingPage=ke},setOutOfRange:function(ke){De(ke,Re)},setRange:function(ke,me){Ee.current.startRange=ke,Ee.current.endRange=me;for(var Oe=0;Oe<oe;Oe++)(Oe<ke||Oe>me)&&(Ee.current.visibilities[Oe].visibility=Re,Ee.current.visibilities[Oe].renderStatus=_.NotRenderedYet)},setVisibility:De}},et={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},ce=y.createContext({l10n:et,setL10n:function(){}}),D=0,F=function(){return D++},ee=function(w,W,oe){var pe=function(_e){var Ee=W.current;if(Ee){var De=_e.target;if(De instanceof Element&&De.shadowRoot){var ke=_e.composedPath();ke.length>0&&!Ee.contains(ke[0])&&oe()}else Ee.contains(De)||oe()}};y.useEffect(function(){if(w){var _e={capture:!0};return document.addEventListener("click",pe,_e),function(){document.removeEventListener("click",pe,_e)}}},[])},le=function(w){var W=function(oe){oe.key==="Escape"&&w()};y.useEffect(function(){return document.addEventListener("keyup",W),function(){document.removeEventListener("keyup",W)}},[])},fe=function(w){var W=w.ariaControlsSuffix,oe=w.children,pe=w.closeOnClickOutside,_e=w.closeOnEscape,Ee=w.onToggle,De=y.useRef(),ke=y.useContext(te).direction===R.TextDirection.RightToLeft;return y.useEffect(function(){var me=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=me}},[]),le(function(){De.current&&_e&&Ee()}),ee(pe,De,Ee),U(function(){var me=De.current;if(me){var Oe=.75*document.body.clientHeight;me.getBoundingClientRect().height>=Oe&&(me.style.overflow="auto",me.style.maxHeight="".concat(Oe,"px"))}},[]),y.createElement("div",{"aria-modal":"true",className:X({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":ke}),id:"rpv-core__modal-body-".concat(W),ref:De,role:"dialog",tabIndex:-1},oe)},Ae=function(w){var W=w.children;return y.createElement("div",{className:"rpv-core__modal-overlay"},W)};R.ToggleStatus=void 0,(Te=R.ToggleStatus||(R.ToggleStatus={})).Close="Close",Te.Open="Open",Te.Toggle="Toggle";var Ce,je=function(w){var W=y.useState(w),oe=W[0],pe=W[1];return{opened:oe,toggle:function(_e){switch(_e){case R.ToggleStatus.Close:pe(!1);break;case R.ToggleStatus.Open:pe(!0);break;case R.ToggleStatus.Toggle:default:pe(function(Ee){return!Ee})}}}},Xe=function(w){var W=w.content,oe=w.isOpened,pe=oe!==void 0&&oe,_e=w.target,Ee=je(pe),De=Ee.opened,ke=Ee.toggle;return y.createElement(y.Fragment,null,_e&&_e(ke,De),De&&W(ke))};R.Position=void 0,(Ce=R.Position||(R.Position={})).TopLeft="TOP_LEFT",Ce.TopCenter="TOP_CENTER",Ce.TopRight="TOP_RIGHT",Ce.RightTop="RIGHT_TOP",Ce.RightCenter="RIGHT_CENTER",Ce.RightBottom="RIGHT_BOTTOM",Ce.BottomLeft="BOTTOM_LEFT",Ce.BottomCenter="BOTTOM_CENTER",Ce.BottomRight="BOTTOM_RIGHT",Ce.LeftTop="LEFT_TOP",Ce.LeftCenter="LEFT_CENTER",Ce.LeftBottom="LEFT_BOTTOM";var Ue,We,Be,O,G,ie,he,re,xe=function(w,W,oe,pe,_e){U(function(){var Ee=W.current,De=w.current,ke=oe.current;if(De&&Ee&&ke){var me=ke.getBoundingClientRect(),Oe=function(Ke,Ye,ht,ct){var ot=Ye.getBoundingClientRect(),Ut=Ke.getBoundingClientRect(),St=Ut.height,Et=Ut.width,Tt=0,vt=0;switch(ht){case R.Position.TopLeft:Tt=ot.top-St,vt=ot.left;break;case R.Position.TopCenter:Tt=ot.top-St,vt=ot.left+ot.width/2-Et/2;break;case R.Position.TopRight:Tt=ot.top-St,vt=ot.left+ot.width-Et;break;case R.Position.RightTop:Tt=ot.top,vt=ot.left+ot.width;break;case R.Position.RightCenter:Tt=ot.top+ot.height/2-St/2,vt=ot.left+ot.width;break;case R.Position.RightBottom:Tt=ot.top+ot.height-St,vt=ot.left+ot.width;break;case R.Position.BottomLeft:Tt=ot.top+ot.height,vt=ot.left;break;case R.Position.BottomCenter:Tt=ot.top+ot.height,vt=ot.left+ot.width/2-Et/2;break;case R.Position.BottomRight:Tt=ot.top+ot.height,vt=ot.left+ot.width-Et;break;case R.Position.LeftTop:Tt=ot.top,vt=ot.left-Et;break;case R.Position.LeftCenter:Tt=ot.top+ot.height/2-St/2,vt=ot.left-Et;break;case R.Position.LeftBottom:Tt=ot.top+ot.height-St,vt=ot.left-Et}return{left:vt+(ct.left||0),top:Tt+(ct.top||0)}}(De,Ee,pe,_e),Fe=Oe.top,Ze=Oe.left;De.style.top="".concat(Fe-me.top,"px"),De.style.left="".concat(Ze-me.left,"px")}},[])},Ve=function(w){var W,oe=w.customClassName,pe=w.position;return y.createElement("div",{className:X((W={"rpv-core__arrow":!0,"rpv-core__arrow--tl":pe===R.Position.TopLeft,"rpv-core__arrow--tc":pe===R.Position.TopCenter,"rpv-core__arrow--tr":pe===R.Position.TopRight,"rpv-core__arrow--rt":pe===R.Position.RightTop,"rpv-core__arrow--rc":pe===R.Position.RightCenter,"rpv-core__arrow--rb":pe===R.Position.RightBottom,"rpv-core__arrow--bl":pe===R.Position.BottomLeft,"rpv-core__arrow--bc":pe===R.Position.BottomCenter,"rpv-core__arrow--br":pe===R.Position.BottomRight,"rpv-core__arrow--lt":pe===R.Position.LeftTop,"rpv-core__arrow--lc":pe===R.Position.LeftCenter,"rpv-core__arrow--lb":pe===R.Position.LeftBottom},W["".concat(oe)]=oe!=="",W))})},Qe=function(w){var W=w.ariaControlsSuffix,oe=w.children,pe=w.closeOnClickOutside,_e=w.offset,Ee=w.position,De=w.targetRef,ke=w.onClose,me=y.useRef(),Oe=y.useRef(),Fe=y.useRef(),Ze=y.useContext(te).direction===R.TextDirection.RightToLeft;ee(pe,me,ke),xe(me,De,Fe,Ee,_e),U(function(){var Ye=Oe.current;if(Ye){var ht=.75*document.body.clientHeight;Ye.getBoundingClientRect().height>=ht&&(Ye.style.overflow="auto",Ye.style.maxHeight="".concat(ht,"px"))}},[]);var Ke="rpv-core__popover-body-inner-".concat(W);return y.createElement(y.Fragment,null,y.createElement("div",{ref:Fe,style:{left:0,position:"absolute",top:0}}),y.createElement("div",{"aria-describedby":Ke,className:X({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Ze}),id:"rpv-core__popover-body-".concat(W),ref:me,role:"dialog",tabIndex:-1},y.createElement(Ve,{customClassName:"rpv-core__popover-body-arrow",position:Ee}),y.createElement("div",{id:Ke,ref:Oe},oe)))},rt=function(w){var W=w.closeOnEscape,oe=w.onClose,pe=y.useRef();return le(function(){pe.current&&W&&oe()}),y.createElement("div",{className:"rpv-core__popover-overlay",ref:pe})},He=function(w){var W=w.ariaControlsSuffix,oe=w.children,pe=w.contentRef,_e=w.offset,Ee=w.position,De=w.targetRef,ke=y.useRef(),me=y.useContext(te).direction===R.TextDirection.RightToLeft;return xe(pe,De,ke,Ee,_e),y.createElement(y.Fragment,null,y.createElement("div",{ref:ke,style:{left:0,position:"absolute",top:0}}),y.createElement("div",{className:X({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":me}),id:"rpv-core__tooltip-body-".concat(W),ref:pe,role:"tooltip"},y.createElement(Ve,{customClassName:"rpv-core__tooltip-body-arrow",position:Ee}),y.createElement("div",{className:"rpv-core__tooltip-body-content"},oe)))};R.FullScreenMode=void 0,(Ue=R.FullScreenMode||(R.FullScreenMode={})).Normal="Normal",Ue.Entering="Entering",Ue.Entered="Entered",Ue.EnteredCompletely="EnteredCompletely",Ue.Exitting="Exitting",Ue.Exited="Exited",R.LayerRenderStatus=void 0,(We=R.LayerRenderStatus||(R.LayerRenderStatus={}))[We.PreRender=0]="PreRender",We[We.DidRender=1]="DidRender",R.PageMode=void 0,(Be=R.PageMode||(R.PageMode={})).Attachments="UseAttachments",Be.Bookmarks="UseOutlines",Be.ContentGroup="UseOC",Be.Default="UserNone",Be.FullScreen="FullScreen",Be.Thumbnails="UseThumbs",R.PasswordStatus=void 0,(O=R.PasswordStatus||(R.PasswordStatus={})).RequiredPassword="RequiredPassword",O.WrongPassword="WrongPassword",R.RotateDirection=void 0,(G=R.RotateDirection||(R.RotateDirection={})).Backward="Backward",G.Forward="Forward",R.ScrollMode=void 0,(ie=R.ScrollMode||(R.ScrollMode={})).Page="Page",ie.Horizontal="Horizontal",ie.Vertical="Vertical",ie.Wrapped="Wrapped",R.SpecialZoomLevel=void 0,(he=R.SpecialZoomLevel||(R.SpecialZoomLevel={})).ActualSize="ActualSize",he.PageFit="PageFit",he.PageWidth="PageWidth",R.ViewMode=void 0,(re=R.ViewMode||(R.ViewMode={})).DualPage="DualPage",re.DualPageWithCover="DualPageWithCover",re.SinglePage="SinglePage";var lt,st=function(w,W){return w.reduce(function(oe,pe,_e){return _e%W?oe[oe.length-1].push(pe):oe.push([pe]),oe},[])},dt=function(w,W){switch(W[1].name){case"XYZ":return{bottomOffset:function(oe,pe){return W[3]===null?pe:W[3]},leftOffset:function(oe,pe){return W[2]===null?0:W[2]},pageIndex:w,scaleTo:W[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:w,scaleTo:R.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:W[2],leftOffset:0,pageIndex:w,scaleTo:R.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:w,scaleTo:1}}},gt=new Map,kt=new Map,Dt=function(w,W){return"".concat(w.loadingTask.docId,"___").concat(W.num,"R").concat(W.gen===0?"":W.gen)},Rt=function(w,W,oe){gt.set(Dt(w,W),oe)},ue=function(w,W){if(!w)return Promise.reject("The document is not loaded yet");var oe="".concat(w.loadingTask.docId,"___").concat(W),pe=kt.get(oe);return pe?Promise.resolve(pe):new Promise(function(_e,Ee){w.getPage(W+1).then(function(De){kt.set(oe,De),De.ref&&Rt(w,De.ref,W),_e(De)})})},ge=function(w,W){return new Promise(function(oe){new Promise(function(pe){typeof W=="string"?w.getDestination(W).then(function(_e){pe(_e)}):pe(W)}).then(function(pe){if(typeof pe[0]=="object"&&pe[0]!==null){var _e=pe[0],Ee=function(ke,me){var Oe=Dt(ke,me);return gt.has(Oe)?gt.get(Oe):null}(w,_e);Ee===null?w.getPageIndex(_e).then(function(ke){Rt(w,_e,ke),ge(w,W).then(function(me){return oe(me)})}):oe(dt(Ee,pe))}else{var De=dt(pe[0],pe);oe(De)}})})};(function(w){w[w.Solid=1]="Solid",w[w.Dashed=2]="Dashed",w[w.Beveled=3]="Beveled",w[w.Inset=4]="Inset",w[w.Underline=5]="Underline"})(lt||(lt={}));var Se,nt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),xt=function(w,W,oe,pe){var _e=parseInt(w,10);return _e>=W&&_e<=oe?_e:pe},zt=function(w){return w.contentsObj?w.contentsObj.str:w.contents||""},Ie=function(w){return w.titleObj?w.titleObj.str:w.title||""},it=function(w){var W=w.annotation,oe=y.useContext(te).direction,pe=Ie(W),_e=zt(W),Ee=oe===R.TextDirection.RightToLeft,De=y.useRef(),ke="";if(W.modificationDate){var me=function(Oe){var Fe=nt.exec(Oe);if(!Fe)return null;var Ze=parseInt(Fe[1],10),Ke=xt(Fe[2],1,12,1)-1,Ye=xt(Fe[3],1,31,1),ht=xt(Fe[4],0,23,0),ct=xt(Fe[5],0,59,0),ot=xt(Fe[6],0,59,0),Ut=Fe[7]||"Z",St=xt(Fe[8],0,23,0),Et=xt(Fe[9],0,59,0);switch(Ut){case"-":ht+=St,ct+=Et;break;case"+":ht-=St,ct-=Et}return new Date(Date.UTC(Ze,Ke,Ye,ht,ct,ot))}(W.modificationDate);ke=me?"".concat(me.toLocaleDateString(),", ").concat(me.toLocaleTimeString()):""}return y.useLayoutEffect(function(){if(De.current){var Oe=document.querySelector('[data-annotation-id="'.concat(W.id,'"]'));if(Oe){var Fe=Oe;return Fe.style.zIndex+=1,function(){Fe.style.zIndex="".concat(parseInt(Fe.style.zIndex,10)-1)}}}},[]),y.createElement("div",{ref:De,className:X({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Ee}),style:{top:W.annotationType===R.AnnotationType.Popup?"":"100%"}},pe&&y.createElement(y.Fragment,null,y.createElement("div",{className:X({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Ee,"rpv-core__annotation-popup-title--rtl":Ee})},pe),y.createElement("div",{className:"rpv-core__annotation-popup-date"},ke)),_e&&y.createElement("div",{className:"rpv-core__annotation-popup-content"},_e.split(`
`).map(function(Oe,Fe){return y.createElement(y.Fragment,{key:Fe},Oe,y.createElement("br",null))})))};(function(w){w.Click="Click",w.Hover="Hover"})(Se||(Se={}));var ut,ft=function(w){var W,oe=w.annotation,pe=w.children,_e=w.ignoreBorder,Ee=w.hasPopup,De=w.isRenderable,ke=w.page,me=w.viewport,Oe=oe.rect,Fe=function(){var wt=je(!1),Yt=wt.opened,$t=wt.toggle,Kt=y.useState(Se.Hover),Jt=Kt[0],en=Kt[1];return{opened:Yt,closeOnHover:function(){Jt===Se.Hover&&$t(R.ToggleStatus.Close)},openOnHover:function(){Jt===Se.Hover&&$t(R.ToggleStatus.Open)},toggleOnClick:function(){switch(Jt){case Se.Click:Yt&&en(Se.Hover),$t(R.ToggleStatus.Toggle);break;case Se.Hover:en(Se.Click),$t(R.ToggleStatus.Open)}}}}(),Ze=Fe.closeOnHover,Ke=Fe.opened,Ye=Fe.openOnHover,ht=Fe.toggleOnClick,ct=(W=[Oe[0],ke.view[3]+ke.view[1]-Oe[1],Oe[2],ke.view[3]+ke.view[1]-Oe[3]],[Math.min(W[0],W[2]),Math.min(W[1],W[3]),Math.max(W[0],W[2]),Math.max(W[1],W[3])]),ot=Oe[2]-Oe[0],Ut=Oe[3]-Oe[1],St={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!_e&&oe.borderStyle.width>0){switch(oe.borderStyle.style){case lt.Dashed:St.borderStyle="dashed";break;case lt.Solid:St.borderStyle="solid";break;case lt.Underline:St=Object.assign({borderBottomStyle:"solid"},St);case lt.Beveled:case lt.Inset:}var Et=oe.borderStyle.width;St.borderWidth="".concat(Et,"px"),oe.borderStyle.style!==lt.Underline&&(ot-=2*Et,Ut-=2*Et);var Tt=oe.borderStyle,vt=Tt.horizontalCornerRadius,Mt=Tt.verticalCornerRadius;(vt>0||Mt>0)&&(St.borderRadius="".concat(vt,"px / ").concat(Mt,"px")),oe.color?St.borderColor="rgb(".concat(0|oe.color[0],", ").concat(0|oe.color[1],", ").concat(0|oe.color[2],")"):St.borderWidth="0"}return y.createElement(y.Fragment,null,De&&pe({popup:{opened:Ke,closeOnHover:Ze,openOnHover:Ye,toggleOnClick:ht},slot:{attrs:{style:Object.assign({height:"".concat(Ut,"px"),left:"".concat(ct[0],"px"),top:"".concat(ct[1],"px"),transform:"matrix(".concat(me.transform.join(","),")"),transformOrigin:"-".concat(ct[0],"px -").concat(ct[1],"px"),width:"".concat(ot,"px")},St)},children:y.createElement(y.Fragment,null,Ee&&Ke&&y.createElement(it,{annotation:oe}))}}))},jt=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De);return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":W.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children)})},Zt=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De),me=W.rect,Oe=me[2]-me[0],Fe=me[3]-me[1],Ze=W.borderStyle.width;return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(Ke){return y.createElement("div",$({},Ke.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":W.id,onClick:Ke.popup.toggleOnClick,onMouseEnter:Ke.popup.openOnHover,onMouseLeave:Ke.popup.closeOnHover}),y.createElement("svg",{height:"".concat(Fe,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Oe," ").concat(Fe),width:"".concat(Oe,"px")},y.createElement("circle",{cy:Fe/2,fill:"none",rx:Oe/2-Ze/2,ry:Fe/2-Ze/2,stroke:"transparent",strokeWidth:Ze||1})),Ke.slot.children)})},Ht=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=Ie(W),Ee=zt(W),De=!(W.hasPopup!==!1||!_e&&!Ee),ke=function(){var me,Oe,Fe,Ze,Ke=W.file;Ke&&(me=Ke.filename,Oe=Ke.content,Fe=typeof Oe=="string"?"":URL.createObjectURL(new Blob([Oe],{type:""})),(Ze=document.createElement("a")).style.display="none",Ze.href=Fe||me,Ze.setAttribute("download",function(Ye){var ht=Ye.split("/").pop();return ht?ht.split("#")[0].split("?")[0]:Ye}(me)),document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),Fe&&URL.revokeObjectURL(Fe))};return y.createElement(ft,{annotation:W,hasPopup:De,ignoreBorder:!0,isRenderable:!0,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":W.id,onClick:me.popup.toggleOnClick,onDoubleClick:ke,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children)})},Wt=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De);return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":W.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children)})},Bt=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=Ie(W),Ee=zt(W),De=!(!_e&&!Ee),ke=!W.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(W.parentType)!==-1;return U(function(){if(W.parentId){var me=document.querySelector('[data-annotation-id="'.concat(W.parentId,'"]')),Oe=document.querySelector('[data-annotation-id="'.concat(W.id,'"]'));if(me&&Oe){var Fe=parseFloat(me.style.left),Ze=parseFloat(me.style.top)+parseFloat(me.style.height);Oe.style.left="".concat(Fe,"px"),Oe.style.top="".concat(Ze,"px"),Oe.style.transformOrigin="-".concat(Fe,"px -").concat(Ze,"px")}}},[]),y.createElement(ft,{annotation:W,hasPopup:ke,ignoreBorder:!1,isRenderable:De,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":W.id}),y.createElement(it,{annotation:W}))})},Xt=function(w){var W=w.annotation,oe=w.childAnnotation,pe=w.page,_e=w.viewport,Ee=W.hasPopup===!1,De=Ie(W),ke=zt(W),me=!!(W.hasPopup||De||ke);if(W.quadPoints&&W.quadPoints.length>0){var Oe=W.quadPoints.map(function(Fe){return Object.assign({},W,{rect:[Fe[2].x,Fe[2].y,Fe[1].x,Fe[1].y],quadPoints:[]})});return y.createElement(y.Fragment,null,Oe.map(function(Fe,Ze){return y.createElement(Xt,{key:Ze,annotation:Fe,childAnnotation:oe,page:pe,viewport:_e})}))}return y.createElement(ft,{annotation:W,hasPopup:Ee,ignoreBorder:!0,isRenderable:me,page:pe,viewport:_e},function(Fe){return y.createElement(y.Fragment,null,y.createElement("div",$({},Fe.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":W.id,onClick:Fe.popup.toggleOnClick,onMouseEnter:Fe.popup.openOnHover,onMouseLeave:Fe.popup.closeOnHover}),Fe.slot.children),oe&&oe.annotationType===R.AnnotationType.Popup&&Fe.popup.opened&&y.createElement(Bt,{annotation:oe,page:pe,viewport:_e}))})},_n=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De),me=W.rect,Oe=me[2]-me[0],Fe=me[3]-me[1],Ze=W.borderStyle.width;return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(Ke){return y.createElement("div",$({},Ke.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":W.id,onClick:Ke.popup.toggleOnClick,onMouseEnter:Ke.popup.openOnHover,onMouseLeave:Ke.popup.closeOnHover}),W.inkLists&&W.inkLists.length&&y.createElement("svg",{height:"".concat(Fe,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Oe," ").concat(Fe),width:"".concat(Oe,"px")},W.inkLists.map(function(Ye,ht){return y.createElement("polyline",{key:ht,fill:"none",stroke:"transparent",strokeWidth:Ze||1,points:Ye.map(function(ct){return"".concat(ct.x-me[0],",").concat(me[3]-ct.y)}).join(" ")})})),Ke.slot.children)})},dn=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De),me=W.rect,Oe=me[2]-me[0],Fe=me[3]-me[1],Ze=W.borderStyle.width;return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(Ke){return y.createElement("div",$({},Ke.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":W.id,onClick:Ke.popup.toggleOnClick,onMouseEnter:Ke.popup.openOnHover,onMouseLeave:Ke.popup.closeOnHover}),y.createElement("svg",{height:"".concat(Fe,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Oe," ").concat(Fe),width:"".concat(Oe,"px")},y.createElement("line",{stroke:"transparent",strokeWidth:Ze||1,x1:me[2]-W.lineCoordinates[0],x2:me[2]-W.lineCoordinates[2],y1:me[3]-W.lineCoordinates[1],y2:me[3]-W.lineCoordinates[3]})),Ke.slot.children)})},hn=/^([^\w]*)(javascript|data|vbscript)/im,fn=/&#(\w+)(^\w|;)?/g,an=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,wn=/^([^:]+):/gm,Tn=function(w,W){W===void 0&&(W="about:blank");var oe,pe=(oe=w||"",oe.replace(fn,function(ke,me){return String.fromCharCode(me)})).replace(an,"").trim();if(!pe)return W;var _e=pe[0];if(_e==="."||_e==="/")return pe;var Ee=pe.match(wn);if(!Ee)return pe;var De=Ee[0];return hn.test(De)?W:pe},jn=function(w){var W,oe=w.annotation,pe=w.annotationContainerRef,_e=w.doc,Ee=w.outlines,De=w.page,ke=w.pageIndex,me=w.scale,Oe=w.viewport,Fe=w.onExecuteNamedAction,Ze=w.onJumpFromLinkAnnotation,Ke=w.onJumpToDest,Ye=y.useRef(),ht=Ee&&Ee.length&&oe.dest&&typeof oe.dest=="string"?(W=Ee.find(function(St){return St.dest===oe.dest}))===null||W===void 0?void 0:W.title:"",ct=!!(oe.url||oe.dest||oe.action||oe.unsafeUrl),ot={};if(oe.url||oe.unsafeUrl){var Ut=Tn(oe.url||oe.unsafeUrl,"");Ut?ot={"data-target":"external",href:Ut,rel:"noopener noreferrer nofollow",target:oe.newWindow?"_blank":"",title:Ut}:ct=!1}else ot={href:"","data-annotation-link":oe.id,onClick:function(St){St.preventDefault(),oe.action?Fe(oe.action):ge(_e,oe.dest).then(function(Et){var Tt=Ye.current,vt=pe.current;if(Tt&&vt){var Mt=Tt.getBoundingClientRect();vt.style.setProperty("height","100%"),vt.style.setProperty("width","100%");var wt=vt.getBoundingClientRect();vt.style.removeProperty("height"),vt.style.removeProperty("width");var Yt=(Mt.left-wt.left)/me,$t=(wt.bottom-Mt.bottom+Mt.height)/me;Ze({bottomOffset:$t,label:ht,leftOffset:Yt,pageIndex:ke})}Ke(Et)})}};return ht&&(ot=Object.assign({},ot,{title:ht,"aria-label":ht})),y.createElement(ft,{annotation:oe,hasPopup:!1,ignoreBorder:!1,isRenderable:ct,page:De,viewport:Oe},function(St){return y.createElement("div",$({},St.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":oe.id,"data-testid":"core__annotation--link-".concat(oe.id)}),y.createElement("a",$({ref:Ye},ot)))})},kn=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De),me=W.rect,Oe=me[2]-me[0],Fe=me[3]-me[1],Ze=W.borderStyle.width;return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(Ke){return y.createElement("div",$({},Ke.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":W.id,onClick:Ke.popup.toggleOnClick,onMouseEnter:Ke.popup.openOnHover,onMouseLeave:Ke.popup.closeOnHover}),W.vertices&&W.vertices.length&&y.createElement("svg",{height:"".concat(Fe,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Oe," ").concat(Fe),width:"".concat(Oe,"px")},y.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Ze||1,points:W.vertices.map(function(Ye){return"".concat(Ye.x-me[0],",").concat(me[3]-Ye.y)}).join(" ")})),Ke.slot.children)})},$n=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De),me=W.rect,Oe=me[2]-me[0],Fe=me[3]-me[1],Ze=W.borderStyle.width;return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(Ke){return y.createElement("div",$({},Ke.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":W.id,onClick:Ke.popup.toggleOnClick,onMouseEnter:Ke.popup.openOnHover,onMouseLeave:Ke.popup.closeOnHover}),W.vertices&&W.vertices.length&&y.createElement("svg",{height:"".concat(Fe,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Oe," ").concat(Fe),width:"".concat(Oe,"px")},y.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Ze||1,points:W.vertices.map(function(Ye){return"".concat(Ye.x-me[0],",").concat(me[3]-Ye.y)}).join(" ")})),Ke.slot.children)})},Yn=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De),me=W.rect,Oe=me[2]-me[0],Fe=me[3]-me[1],Ze=W.borderStyle.width;return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(Ke){return y.createElement("div",$({},Ke.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":W.id,onClick:Ke.popup.toggleOnClick,onMouseEnter:Ke.popup.openOnHover,onMouseLeave:Ke.popup.closeOnHover}),y.createElement("svg",{height:"".concat(Fe,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Oe," ").concat(Fe),width:"".concat(Oe,"px")},y.createElement("rect",{height:Fe-Ze,fill:"none",stroke:"transparent",strokeWidth:Ze||1,x:Ze/2,y:Ze/2,width:Oe-Ze})),Ke.slot.children)})},Kn=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De);return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":W.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children)})},Zn=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De);return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":W.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children)})},Jn=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De);return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":W.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children)})},li=function(){return y.createElement(T,{size:16},y.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),y.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),y.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),y.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ci=function(){return y.createElement(T,{size:16},y.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),y.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),y.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),y.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),y.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),y.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),y.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),y.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),y.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),y.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Ur=function(){return y.createElement(T,{size:16},y.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),y.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Hr=function(){return y.createElement(T,{size:16},y.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),y.createElement("path",{d:"M6 4.5L6 0.5"}),y.createElement("path",{d:"M18 4.5L18 0.5"}),y.createElement("path",{d:"M10 4.5L10 0.5"}),y.createElement("path",{d:"M14 4.5L14 0.5"}))},zr=function(){return y.createElement(T,{size:16},y.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),y.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),y.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Wr=function(){return y.createElement(T,{size:16},y.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Vr=function(w){var W=w.annotation,oe=w.childAnnotation,pe=w.page,_e=w.viewport,Ee=W.hasPopup===!1,De=Ie(W),ke=zt(W),me=!!(W.hasPopup||De||ke),Oe=W.name?W.name.toLowerCase():"";return y.createElement(ft,{annotation:W,hasPopup:Ee,ignoreBorder:!1,isRenderable:me,page:pe,viewport:_e},function(Fe){return y.createElement(y.Fragment,null,y.createElement("div",$({},Fe.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":W.id,onClick:Fe.popup.toggleOnClick,onMouseEnter:Fe.popup.openOnHover,onMouseLeave:Fe.popup.closeOnHover}),Oe&&y.createElement("div",{className:"rpv-core__annotation-text-icon"},Oe==="check"&&y.createElement(L,null),Oe==="comment"&&y.createElement(li,null),Oe==="help"&&y.createElement(ci,null),Oe==="insert"&&y.createElement(Wr,null),Oe==="key"&&y.createElement(Ur,null),Oe==="note"&&y.createElement(Hr,null),(Oe==="newparagraph"||Oe==="paragraph")&&y.createElement(zr,null)),Fe.slot.children),oe&&oe.annotationType===R.AnnotationType.Popup&&Fe.popup.opened&&y.createElement(Bt,{annotation:oe,page:pe,viewport:_e}))})},qr=function(w){var W=w.annotation,oe=w.page,pe=w.viewport,_e=W.hasPopup===!1,Ee=Ie(W),De=zt(W),ke=!!(W.hasPopup||Ee||De);return y.createElement(ft,{annotation:W,hasPopup:_e,ignoreBorder:!0,isRenderable:ke,page:oe,viewport:pe},function(me){return y.createElement("div",$({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":W.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children)})},Gr=function(w){var W=w.annotations,oe=w.doc,pe=w.outlines,_e=w.page,Ee=w.pageIndex,De=w.plugins,ke=w.rotation,me=w.scale,Oe=w.onExecuteNamedAction,Fe=w.onJumpFromLinkAnnotation,Ze=w.onJumpToDest,Ke=y.useRef(),Ye=_e.getViewport({rotation:ke,scale:me}).clone({dontFlip:!0}),ht=W.filter(function(ct){return!ct.parentId});return U(function(){var ct=Ke.current;ct&&De.forEach(function(ot){ot.onAnnotationLayerRender&&ot.onAnnotationLayerRender({annotations:ht,container:ct,pageIndex:Ee,rotation:ke,scale:me})})},[]),y.createElement("div",{ref:Ke,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Ee)},ht.map(function(ct){var ot=W.find(function(Ut){return Ut.parentId===ct.id});switch(ct.annotationType){case R.AnnotationType.Caret:return y.createElement(jt,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Circle:return y.createElement(Zt,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.FileAttachment:return y.createElement(Ht,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.FreeText:return y.createElement(Wt,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Highlight:return y.createElement(Xt,{key:ct.id,annotation:ct,childAnnotation:ot,page:_e,viewport:Ye});case R.AnnotationType.Ink:return y.createElement(_n,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Line:return y.createElement(dn,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Link:return y.createElement(jn,{key:ct.id,annotation:ct,annotationContainerRef:Ke,doc:oe,outlines:pe,page:_e,pageIndex:Ee,scale:me,viewport:Ye,onExecuteNamedAction:Oe,onJumpFromLinkAnnotation:Fe,onJumpToDest:Ze});case R.AnnotationType.Polygon:return y.createElement(kn,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Polyline:return y.createElement($n,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Popup:return y.createElement(Bt,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Square:return y.createElement(Yn,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Squiggly:return y.createElement(Kn,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Stamp:return y.createElement(Zn,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.StrikeOut:return y.createElement(Jn,{key:ct.id,annotation:ct,page:_e,viewport:Ye});case R.AnnotationType.Text:return y.createElement(Vr,{key:ct.id,annotation:ct,childAnnotation:ot,page:_e,viewport:Ye});case R.AnnotationType.Underline:return y.createElement(qr,{key:ct.id,annotation:ct,page:_e,viewport:Ye});default:return y.createElement(y.Fragment,{key:ct.id})}}))},Xr=function(w){var W=w.page,oe=w.renderAnnotations,pe=Ge(),_e=y.useState({loading:!0,annotations:[]}),Ee=_e[0],De=_e[1];return y.useEffect(function(){W.getAnnotations({intent:"display"}).then(function(ke){pe.current&&De({loading:!1,annotations:ke})})},[]),Ee.loading?y.createElement(y.Fragment,null):oe(Ee.annotations)},$r=function(w){var W=w.doc,oe=w.outlines,pe=w.page,_e=w.pageIndex,Ee=w.plugins,De=w.rotation,ke=w.scale,me=w.onExecuteNamedAction,Oe=w.onJumpFromLinkAnnotation,Fe=w.onJumpToDest;return y.createElement(Xr,{page:pe,renderAnnotations:function(Ze){return y.createElement(Gr,{annotations:Ze,doc:W,outlines:oe,page:pe,pageIndex:_e,plugins:Ee,rotation:De,scale:ke,onExecuteNamedAction:me,onJumpFromLinkAnnotation:Oe,onJumpToDest:Fe})}})},ui=function(w,W){var oe=w%W;return oe===0?w:Math.floor(w-oe)},Yr=function(w){var W=w.canvasLayerRef,oe=w.height,pe=w.page,_e=w.pageIndex,Ee=w.plugins,De=w.rotation,ke=w.scale,me=w.width,Oe=w.onRenderCanvasCompleted,Fe=y.useRef();return U(function(){var Ze=Fe.current;Ze&&Ze.cancel();var Ke=W.current;Ke.removeAttribute("data-testid"),Ee.forEach(function(wt){wt.onCanvasLayerRender&&wt.onCanvasLayerRender({ele:Ke,pageIndex:_e,rotation:De,scale:ke,status:R.LayerRenderStatus.PreRender})});var Ye=pe.getViewport({rotation:De,scale:ke}),ht=window.devicePixelRatio||1,ct=Math.sqrt(16777216/(Ye.width*Ye.height)),ot=ht>ct;ot?Ke.style.transform="scale(1, 1)":Ke.style.removeProperty("transform");var Ut=Math.min(ct,ht),St=function(wt,Yt){var $t,Kt;if(Math.floor(wt)===wt)return[wt,1];var Jt=1/wt;if(Jt>Yt)return[1,Yt];if(Math.floor(Jt)===Jt)return[1,Jt];for(var en=wt>1?Jt:wt,yn=0,cn=1,An=1,gn=1;;){var vn=yn+An,bn=cn+gn;if(bn>Yt)break;en<=vn/bn?(An=($t=[vn,bn])[0],gn=$t[1]):(yn=(Kt=[vn,bn])[0],cn=Kt[1])}return en<(yn/cn+An/gn)/2?en===wt?[yn,cn]:[cn,yn]:en===wt?[An,gn]:[gn,An]}(Ut,8),Et=St[0],Tt=St[1];Ke.width=ui(Ye.width*Ut,Et),Ke.height=ui(Ye.height*Ut,Et),Ke.style.width="".concat(ui(Ye.width,Tt),"px"),Ke.style.height="".concat(ui(Ye.height,Tt),"px"),Ke.hidden=!0;var vt=Ke.getContext("2d",{alpha:!1}),Mt=ot||ht!==1?[Ut,0,0,Ut,0,0]:null;return Fe.current=pe.render({canvasContext:vt,transform:Mt,viewport:Ye}),Fe.current.promise.then(function(){Ke.hidden=!1,Ke.setAttribute("data-testid","core__canvas-layer-".concat(_e)),Ee.forEach(function(wt){wt.onCanvasLayerRender&&wt.onCanvasLayerRender({ele:Ke,pageIndex:_e,rotation:De,scale:ke,status:R.LayerRenderStatus.DidRender})}),Oe()},function(){Oe()}),function(){Ke&&(Ke.width=0,Ke.height=0)}},[]),y.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(oe,"px"),width:"".concat(me,"px")}},y.createElement("canvas",{ref:W}))},Kr=function(w){var W=w.height,oe=w.page,pe=w.rotation,_e=w.scale,Ee=w.width,De=y.useRef();return U(function(){var ke=De.current,me=oe.getViewport({rotation:pe,scale:_e});oe.getOperatorList().then(function(Oe){(function(){var Fe=De.current;Fe&&(Fe.innerHTML="")})(),new ve.SVGGraphics(oe.commonObjs,oe.objs).getSVG(Oe,me).then(function(Fe){Fe.style.height="".concat(W,"px"),Fe.style.width="".concat(Ee,"px"),ke.appendChild(Fe)})})},[]),y.createElement("div",{className:"rpv-core__svg-layer",ref:De})},Zr=function(w){var W=w.containerRef,oe=w.page,pe=w.pageIndex,_e=w.plugins,Ee=w.rotation,De=w.scale,ke=w.onRenderTextCompleted,me=y.useRef(),Oe=function(){var Fe=W.current;Fe&&([].slice.call(Fe.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Ze){return Fe.removeChild(Ze)}),[].slice.call(Fe.querySelectorAll('br[role="presentation"]')).forEach(function(Ze){return Fe.removeChild(Ze)}))};return U(function(){var Fe=me.current;Fe&&Fe.cancel();var Ze=W.current;if(Ze){Ze.removeAttribute("data-testid");var Ke=oe.getViewport({rotation:Ee,scale:De});return _e.forEach(function(Ye){Ye.onTextLayerRender&&Ye.onTextLayerRender({ele:Ze,pageIndex:pe,scale:De,status:R.LayerRenderStatus.PreRender})}),oe.getTextContent().then(function(Ye){Oe(),me.current=ve.renderTextLayer({container:Ze,textContent:Ye,textContentSource:Ye,viewport:Ke}),me.current.promise.then(function(){Ze.setAttribute("data-testid","core__text-layer-".concat(pe)),[].slice.call(Ze.children).forEach(function(ht){ht.classList.contains("rpv-core__text-layer-text--not")||ht.classList.add("rpv-core__text-layer-text")}),_e.forEach(function(ht){ht.onTextLayerRender&&ht.onTextLayerRender({ele:Ze,pageIndex:pe,scale:De,status:R.LayerRenderStatus.DidRender})}),ke()},function(){Ze.removeAttribute("data-testid"),ke()})}),function(){var Ye;Oe(),(Ye=me.current)===null||Ye===void 0||Ye.cancel()}}},[]),y.createElement("div",{className:"rpv-core__text-layer",ref:W})},Jr=function(w){var W=w.doc,oe=w.measureRef,pe=w.outlines,_e=w.pageIndex,Ee=w.pageRotation,De=w.pageSize,ke=w.plugins,me=w.renderPage,Oe=w.renderQueueKey,Fe=w.rotation,Ze=w.scale,Ke=w.shouldRender,Ye=w.viewMode,ht=w.onExecuteNamedAction,ct=w.onJumpFromLinkAnnotation,ot=w.onJumpToDest,Ut=w.onRenderCompleted,St=w.onRotatePage,Et=Ge(),Tt=y.useState(null),vt=Tt[0],Mt=Tt[1],wt=y.useState(!1),Yt=wt[0],$t=wt[1],Kt=y.useState(!1),Jt=Kt[0],en=Kt[1],yn=y.useRef(),cn=y.useRef(),An=Math.abs(Fe+Ee)%180==0,gn=De.pageWidth*Ze,vn=De.pageHeight*Ze,bn=An?gn:vn,mn=An?vn:gn,Rn=(De.rotation+Fe+Ee)%360,In=y.useRef(0),Ln=me||function(Cn){return y.createElement(y.Fragment,null,Cn.canvasLayer.children,Cn.textLayer.children,Cn.annotationLayer.children)};return y.useEffect(function(){Mt(null),$t(!1),en(!1)},[Ee,Fe,Ze]),y.useEffect(function(){Ke&&Et.current&&!vt&&ue(W,_e).then(function(Cn){Et.current&&(In.current=Oe,Mt(Cn))})},[Ke,vt]),y.useEffect(function(){Yt&&Jt&&(Oe!==In.current?(Mt(null),$t(!1),en(!1)):Ut(_e))},[Yt,Jt]),y.createElement("div",{className:X({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":Ye===R.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":Ye===R.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":Ye===R.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(_e),ref:oe,style:{height:"".concat(mn,"px"),width:"".concat(bn,"px")}},vt?y.createElement(y.Fragment,null,Ln({annotationLayer:{attrs:{},children:y.createElement($r,{doc:W,outlines:pe,page:vt,pageIndex:_e,plugins:ke,rotation:Rn,scale:Ze,onExecuteNamedAction:ht,onJumpFromLinkAnnotation:ct,onJumpToDest:ot})},canvasLayer:{attrs:{},children:y.createElement(Yr,{canvasLayerRef:yn,height:mn,page:vt,pageIndex:_e,plugins:ke,rotation:Rn,scale:Ze,width:bn,onRenderCanvasCompleted:function(){Et.current&&$t(!0)}})},canvasLayerRendered:Yt,doc:W,height:mn,pageIndex:_e,rotation:Rn,scale:Ze,svgLayer:{attrs:{},children:y.createElement(Kr,{height:mn,page:vt,rotation:Rn,scale:Ze,width:bn})},textLayer:{attrs:{},children:y.createElement(Zr,{containerRef:cn,page:vt,pageIndex:_e,plugins:ke,rotation:Rn,scale:Ze,onRenderTextCompleted:function(){Et.current&&en(!0)}})},textLayerRendered:Jt,width:bn,markRendered:Ut,onRotatePage:function(Cn){return St(_e,Cn)}}),ke.map(function(Cn,Mn){return Cn.renderPageLayer?y.createElement(y.Fragment,{key:Mn},Cn.renderPageLayer({canvasLayerRef:yn,canvasLayerRendered:Yt,doc:W,height:mn,pageIndex:_e,rotation:Rn,scale:Ze,textLayerRef:cn,textLayerRendered:Jt,width:bn})):y.createElement(y.Fragment,{key:Mn})})):y.createElement(x,{testId:"core__page-layer-loading-".concat(_e)}))},Qr=function(w,W){var oe=W.rect;return w.height!==oe.height||w.width!==oe.width?oe:w};(function(w){w.Horizontal="Horizontal",w.Vertical="Vertical",w.Both="Both"})(ut||(ut={}));var es=function(w){return 1-Math.pow(1-w,4)},di=1e-4,er={left:0,top:0},tr={capture:!1,passive:!0},ts=function(w){var W=w.elementRef,oe=w.enableSmoothScroll,pe=w.isRtl,_e=w.scrollDirection,Ee=w.onSmoothScroll,De=y.useState(er),ke=De[0],me=De[1],Oe=y.useState(W.current),Fe=Oe[0],Ze=Oe[1],Ke=pe?-1:1,Ye=y.useRef(_e);Ye.current=_e;var ht=y.useRef(er),ct=y.useRef(!0),ot=y.useCallback(function(){ct.current=!0,oe&&me(ht.current),Ee(!1)},[]),Ut=y.useCallback(function(){if(Fe){switch(Ye.current){case ut.Horizontal:ht.current={left:Ke*Fe.scrollLeft,top:0};break;case ut.Both:ht.current={left:Ke*Fe.scrollLeft,top:Fe.scrollTop};break;case ut.Vertical:default:ht.current={left:0,top:Fe.scrollTop}}oe&&!ct.current||me(ht.current)}},[Fe]);U(function(){Ze(W.current)}),U(function(){if(Fe)return Fe.addEventListener("scroll",Ut,tr),function(){Fe.removeEventListener("scroll",Ut,tr)}},[Fe]);var St=y.useCallback(function(Et,Tt){var vt=W.current;if(!vt)return Promise.resolve();var Mt={left:0,top:0};switch(Ye.current){case ut.Horizontal:Mt.left=Ke*Et.left;break;case ut.Both:Mt.left=Ke*Et.left,Mt.top=Et.top;break;case ut.Vertical:default:Mt.top=Et.top}return Tt?(ct.current=!1,Ee(!0),new Promise(function(wt,Yt){(function($t,Kt,Jt,en,yn,cn){yn===void 0&&(yn=function(Mn){return Mn}),cn===void 0&&(cn=function(){});var An=0,gn=0,vn=!1;switch(Kt){case ut.Horizontal:gn=$t.scrollLeft,An=0;case ut.Both:gn=$t.scrollLeft,An=$t.scrollTop;break;case ut.Vertical:default:gn=0,An=$t.scrollTop}var bn=function(){vn||(vn=!0,$t.scrollLeft=Jt.left,$t.scrollTop=Jt.top,cn())};if(Math.abs(An-Jt.top)<=di&&Kt===ut.Vertical)bn();else if(Math.abs(gn-Jt.left)<=di&&Kt===ut.Horizontal)bn();else{var mn,Rn=-1,In=gn-Jt.left,Ln=An-Jt.top,Cn=function(Mn){Rn===-1&&(Rn=Mn);var Bn=Mn-Rn,Pt=Math.min(Bn/en,1),Ct=yn(Pt),bt={left:gn-In*Ct,top:An-Ln*Ct};switch(Kt){case ut.Horizontal:$t.scrollLeft=bt.left;break;case ut.Both:$t.scrollLeft=bt.left,$t.scrollTop=bt.top;break;case ut.Vertical:default:$t.scrollTop=bt.top}Math.abs(bt.top-Jt.top)<=di&&Math.abs(bt.left-Jt.left)<=di&&!vn&&(window.cancelAnimationFrame(mn),bn()),Bn<en?mn=window.requestAnimationFrame(Cn):window.cancelAnimationFrame(mn)};mn=window.requestAnimationFrame(Cn)}})(vt,Ye.current,Mt,400,es,function(){ot(),wt()})})):new Promise(function(wt,Yt){switch(Ye.current){case ut.Horizontal:vt.scrollLeft=Mt.left;break;case ut.Both:vt.scrollLeft=Mt.left,vt.scrollTop=Mt.top;break;case ut.Vertical:default:vt.scrollTop=Mt.top}wt()})},[W]);return{scrollOffset:ke,scrollTo:St}},ri=function(w,W,oe){return Math.max(w,Math.min(oe,W))},ns=function(w,W){if(W!==R.ViewMode.DualPageWithCover)return 0;if(!function(_e){var Ee=_e.length;if(Ee===1)return!1;for(var De=1;De<Ee;De++)if(_e[De].height!==_e[0].height||_e[De].width!==_e[0].width)return!0;return!1}(w))return 2*w[0].width;var oe=st(w.slice(1),2).map(function(_e){return _e.length===2?_e[0].width+_e[1].width:_e[0].width}),pe=[w[0].width].concat(oe);return Math.max.apply(Math,pe)},is={left:0,top:0},rs={left:0,top:0},Ai={left:0,top:0},ss={left:0,top:0},as={height:0,width:0},nr={left:0,top:0},ir="data-virtual-index",os=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],ls=function(w){var W=w.enableSmoothScroll,oe=w.isRtl,pe=w.numberOfItems,_e=w.parentRef,Ee=w.setRenderRange,De=w.sizes,ke=w.scrollMode,me=w.viewMode,Oe=y.useState(!1),Fe=Oe[0],Ze=Oe[1],Ke=y.useCallback(function(Pt){return Ze(Pt)},[]),Ye=y.useRef(ke);Ye.current=ke;var ht=y.useRef(me);ht.current=me;var ct=ke===R.ScrollMode.Wrapped||me===R.ViewMode.DualPageWithCover||me===R.ViewMode.DualPage?ut.Both:ke===R.ScrollMode.Horizontal?ut.Horizontal:ut.Vertical,ot=ts({elementRef:_e,enableSmoothScroll:W,isRtl:oe,scrollDirection:ct,onSmoothScroll:Ke}),Ut=ot.scrollOffset,St=ot.scrollTo,Et=function(Pt){var Ct=Pt.elementRef,bt=y.useState(Ct.current),yt=bt[0],_t=bt[1],Ft=y.useRef(!1),Ot=y.useReducer(Qr,{height:0,width:0}),At=Ot[0],mt=Ot[1];return U(function(){Ct.current!==yt&&_t(Ct.current)}),U(function(){if(yt&&!Ft.current){Ft.current=!0;var Lt=yt.getBoundingClientRect(),Vt=Lt.height,on=Lt.width;mt({rect:{height:Vt,width:on}})}},[yt]),y.useEffect(function(){if(yt){var Lt=new ResizeObserver(function(Vt,on){Vt.forEach(function(rn){if(rn.target===yt){var Pn=rn.contentRect,Fn=Pn.height,Nt=Pn.width;mt({rect:{height:Fn,width:Nt}})}})});return Lt.observe(yt),function(){Lt.unobserve(yt)}}},[yt]),At}({elementRef:_e}),Tt=y.useRef({scrollOffset:nr,measurements:[]});Tt.current.scrollOffset=Ut;var vt=y.useMemo(function(){return Array(pe).fill(-1)},[]),Mt=y.useState(vt),wt=Mt[0],Yt=Mt[1],$t=y.useMemo(function(){var Pt=new IntersectionObserver(function(Ct){Ct.forEach(function(bt){var yt=bt.isIntersecting?bt.intersectionRatio:-1,_t=bt.target.getAttribute(ir);if(_t){var Ft=parseInt(_t,10);0<=Ft&&Ft<pe&&Yt(function(Ot){return Ot[Ft]=yt,function(At,mt,Lt){if(Lt||arguments.length===2)for(var Vt,on=0,rn=mt.length;on<rn;on++)!Vt&&on in mt||(Vt||(Vt=Array.prototype.slice.call(mt,0,on)),Vt[on]=mt[on]);return At.concat(Vt||Array.prototype.slice.call(mt))}([],Ot,!0)})}})},{threshold:os});return Pt},[]),Kt=y.useMemo(function(){return ke===R.ScrollMode.Page&&me===R.ViewMode.SinglePage?function(Pt,Ct,bt){for(var yt=[],_t=0;_t<Pt;_t++){var Ft={height:Math.max(Ct.height,bt[_t].height),width:Math.max(Ct.width,bt[_t].width)},Ot=_t===0?ss:yt[_t-1].end,At={left:Ot.left+Ft.width,top:Ot.top+Ft.height};yt[_t]={index:_t,start:Ot,size:Ft,end:At,visibility:-1}}return yt}(pe,Et,De):me===R.ViewMode.DualPageWithCover?function(Pt,Ct,bt,yt){for(var _t=[],Ft=0,Ot=0,At=Ai,mt=0;mt<Pt;mt++){var Lt=mt===0?{height:yt===R.ScrollMode.Page?Math.max(Ct.height,bt[mt].height):bt[mt].height,width:yt===R.ScrollMode.Page?Math.max(Ct.width,bt[mt].width):bt[mt].width}:{height:yt===R.ScrollMode.Page?Math.max(Ct.height,bt[mt].height):bt[mt].height,width:Math.max(Ct.width/2,bt[mt].width)};yt===R.ScrollMode.Page?At=mt===0?Ai:{left:mt%2==0?Lt.width:0,top:Math.floor((mt-1)/2)*Lt.height+_t[0].end.top}:mt===0?(At=Ai,Ft=bt[0].height,Ot=0):mt%2==1?(At={left:0,top:Ft+=Ot},Ot=mt===Pt-1?bt[mt].height:Math.max(bt[mt].height,bt[mt+1].height)):At={left:_t[mt-1].end.left,top:Ft};var Vt={left:At.left+Lt.width,top:At.top+Lt.height};_t[mt]={index:mt,start:At,size:Lt,end:Vt,visibility:-1}}return _t}(pe,Et,De,ke):me===R.ViewMode.DualPage?function(Pt,Ct,bt,yt){for(var _t=[],Ft=0,Ot=0,At=rs,mt=0;mt<Pt;mt++){var Lt={height:yt===R.ScrollMode.Page?Math.max(Ct.height,bt[mt].height):bt[mt].height,width:Math.max(Ct.width/2,bt[mt].width)};yt===R.ScrollMode.Page?At={left:mt%2==0?0:Lt.width,top:Math.floor(mt/2)*Lt.height}:mt%2==0?(At={left:0,top:Ft+=Ot},Ot=mt===Pt-1?bt[mt].height:Math.max(bt[mt].height,bt[mt+1].height)):At={left:_t[mt-1].end.left,top:Ft};var Vt={left:At.left+Lt.width,top:At.top+Lt.height};_t[mt]={index:mt,start:At,size:Lt,end:Vt,visibility:-1}}return _t}(pe,Et,De,ke):function(Pt,Ct,bt,yt){for(var _t=[],Ft=0,Ot={left:0,top:0},At=0,mt=is,Lt=0;Lt<Pt;Lt++){var Vt=bt[Lt];if(Lt===0)Ft=Vt.width,Ot={left:0,top:0},At=Vt.height;else switch(yt){case R.ScrollMode.Wrapped:(Ft+=Vt.width)<Ct.width?(mt={left:_t[Lt-1].end.left,top:Ot.top},At=Math.max(At,Vt.height)):(Ft=Vt.width,Ot={left:(mt={left:Ot.left,top:Ot.top+At}).left,top:mt.top},At=Vt.height);break;case R.ScrollMode.Horizontal:case R.ScrollMode.Vertical:default:mt=_t[Lt-1].end}var on={left:mt.left+Vt.width,top:mt.top+Vt.height};_t[Lt]={index:Lt,start:mt,size:Vt,end:on,visibility:-1}}return _t}(pe,Et,De,ke)},[ke,De,me,Et]),Jt=Kt[pe-1]?{height:Kt[pe-1].end.top,width:Kt[pe-1].end.left}:as;Tt.current.measurements=Kt;var en=y.useMemo(function(){var Pt=function(Lt,Vt,on,rn){var Pn=0;switch(Lt){case ut.Horizontal:Pn=rn.left;break;case ut.Vertical:default:Pn=rn.top}var Fn=Vt.length-1,Nt=function(nn,Un,ei,fi){for(;nn<=Un;){var qn=(nn+Un)/2|0,si=fi(qn);if(si<ei)nn=qn+1;else{if(!(si>ei))return qn;Un=qn-1}}return nn>0?nn-1:0}(0,Fn,Pn,function(nn){switch(Lt){case ut.Horizontal:return Vt[nn].start.left;case ut.Both:case ut.Vertical:default:return Vt[nn].start.top}});if(Lt===ut.Both)for(var xn=Vt[Nt].start.top;Nt-1>=0&&Vt[Nt-1].start.top===xn&&Vt[Nt-1].start.left>=rn.left;)Nt--;for(var ln=Nt;ln<=Fn;){var un={top:Vt[ln].start.top-rn.top,left:Vt[ln].start.left-rn.left},Sn={height:on.height-un.top,width:on.width-un.left};if(Lt===ut.Horizontal&&Sn.width<0||Lt===ut.Vertical&&Sn.height<0||Lt===ut.Both&&(Sn.width<0||Sn.height<0))break;ln++}return{start:Nt,end:ln}}(ct,Kt,Et,Ut),Ct=Pt.start,bt=Pt.end,yt=wt.slice(ri(0,pe,Ct),ri(0,pe,bt)),_t=Ct+yt.reduce(function(Lt,Vt,on,rn){return Vt>rn[Lt]?on:Lt},0),Ft=_t=ri(0,pe-1,_t),Ot=Ee({endPage:bt,numPages:pe,startPage:Ct}),At=Ot.startPage,mt=Ot.endPage;switch(At=Math.max(At,0),mt=Math.min(mt,pe-1),me){case R.ViewMode.DualPageWithCover:_t>0&&(Ft=_t%2==1?_t:_t-1),At=At===0?0:At%2==1?At:At-1,pe-(mt=mt%2==1?mt-1:mt)<=2&&(mt=pe-1);break;case R.ViewMode.DualPage:Ft=_t%2==0?_t:_t-1,At=At%2==0?At:At-1,mt=mt%2==1?mt:mt-1;break;case R.ViewMode.SinglePage:default:Ft=_t}return{startPage:At,endPage:mt,maxVisbilityIndex:Ft}},[Kt,Et,Ut,me,wt]),yn=en.startPage,cn=en.endPage,An=en.maxVisbilityIndex,gn=y.useMemo(function(){for(var Pt=[],Ct=function(yt){var _t=Kt[yt],Ft=$($({},_t),{visibility:wt[yt]!==void 0?wt[yt]:-1,measureRef:function(Ot){Ot&&(Ot.setAttribute(ir,"".concat(yt)),$t.observe(Ot))}});Pt.push(Ft)},bt=yn;bt<=cn;bt++)Ct(bt);return Pt},[yn,cn,wt,Kt]),vn=y.useCallback(function(Pt,Ct){var bt=Tt.current.measurements[ri(0,pe-1,Pt)],yt=Ye.current===R.ScrollMode.Page?nr:Ct;return bt?St({left:yt.left+bt.start.left,top:yt.top+bt.start.top},W):Promise.resolve()},[St,W]),bn=y.useCallback(function(Pt,Ct){var bt=Tt.current.measurements,yt=bt[Pt].start,_t=bt.find(function(Ot){return Ot.start.top-yt.top>1e-12});if(!_t)return Promise.resolve();var Ft=_t.index;switch(ht.current){case R.ViewMode.DualPage:Ft=Ft%2==0?Ft:Ft+1;break;case R.ViewMode.DualPageWithCover:Ft=Ft%2==1?Ft:Ft+1}return vn(Ft,Ct)},[]),mn=y.useCallback(function(Pt,Ct){for(var bt=Tt.current.measurements,yt=bt[Pt].start,_t=Pt,Ft=!1,Ot=pe-1;Ot>=0;Ot--)if(yt.top-bt[Ot].start.top>1e-12){Ft=!0,_t=bt[Ot].index;break}if(!Ft)return Promise.resolve();switch(ht.current){case R.ViewMode.DualPage:_t=_t%2==0?_t:_t-1;break;case R.ViewMode.DualPageWithCover:_t=_t%2==0?_t-1:_t}return _t===Pt&&(_t=Pt-1),vn(_t,Ct)},[]),Rn=y.useCallback(function(Pt,Ct){if(ht.current===R.ViewMode.DualPageWithCover||ht.current===R.ViewMode.DualPage)return bn(Pt,Ct);switch(Ye.current){case R.ScrollMode.Wrapped:return bn(Pt,Ct);case R.ScrollMode.Horizontal:case R.ScrollMode.Vertical:default:return vn(Pt+1,Ct)}},[]),In=y.useCallback(function(Pt,Ct){if(ht.current===R.ViewMode.DualPageWithCover||ht.current===R.ViewMode.DualPage)return mn(Pt,Ct);switch(Ye.current){case R.ScrollMode.Wrapped:return mn(Pt,Ct);case R.ScrollMode.Horizontal:case R.ScrollMode.Vertical:default:return vn(Pt-1,Ct)}},[]),Ln=y.useCallback(function(){return function(Pt,Ct){switch(Ct){case R.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Pt.width,"px")};case R.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Pt.height,"px"),width:"100%"}}}(Jt,Ye.current)},[Jt]),Cn=y.useCallback(function(Pt){return function(Ct,bt,yt){return yt!==R.ScrollMode.Page?{}:{height:"".concat(bt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Ct.start.top,"px)")}}(Pt,Et,Ye.current)},[Et]),Mn=y.useCallback(function(Pt){return function(Ct,bt,yt,_t,Ft){var Ot,At,mt,Lt,Vt,on,rn,Pn=bt?"right":"left",Fn=bt?-1:1,Nt=yt.length,xn=Ct.start.left*Fn,ln=Ct.size,un=ln.height,Sn=ln.width;if(_t===R.ViewMode.DualPageWithCover){var nn=Ft===R.ScrollMode.Page?0:Ct.start.top;return Ct.index===0||Nt%2==0&&Ct.index===Nt-1?((Ot={height:"".concat(un,"px"),minWidth:"".concat(ns(yt,_t),"px"),width:"100%"})[Pn]=0,Ot.position="absolute",Ot.top=0,Ot.transform="translate(".concat(xn,"px, ").concat(nn,"px)"),Ot):((At={height:"".concat(un,"px"),width:"".concat(Sn,"px")})[Pn]=0,At.position="absolute",At.top=0,At.transform="translate(".concat(xn,"px, ").concat(nn,"px)"),At)}if(_t===R.ViewMode.DualPage)return(mt={height:"".concat(un,"px"),width:"".concat(Sn,"px")})[Pn]=0,mt.position="absolute",mt.top=0,mt.transform="translate(".concat(xn,"px, ").concat(Ft===R.ScrollMode.Page?0:Ct.start.top,"px)"),mt;switch(Ft){case R.ScrollMode.Horizontal:return(Lt={height:"100%",width:"".concat(Sn,"px")})[Pn]=0,Lt.position="absolute",Lt.top=0,Lt.transform="translateX(".concat(xn,"px)"),Lt;case R.ScrollMode.Page:return(Vt={height:"".concat(un,"px"),width:"".concat(Sn,"px")})[Pn]=0,Vt.position="absolute",Vt.top=0,Vt;case R.ScrollMode.Wrapped:return(on={height:"".concat(un,"px"),width:"".concat(Sn,"px")})[Pn]=0,on.position="absolute",on.top=0,on.transform="translate(".concat(xn,"px, ").concat(Ct.start.top,"px)"),on;case R.ScrollMode.Vertical:default:return(rn={height:"".concat(un,"px"),width:"100%"})[Pn]=0,rn.position="absolute",rn.top=0,rn.transform="translateY(".concat(Ct.start.top,"px)"),rn}}(Pt,oe,De,ht.current,Ye.current)},[oe,De]),Bn=y.useCallback(function(Pt,Ct){var bt=Tt.current,yt=bt.measurements,_t=bt.scrollOffset,Ft=yt[ri(0,pe-1,Ct)];if(Ft){var Ot=Ye.current===R.ScrollMode.Page?{left:Ft.start.left,top:Ft.start.top}:{left:_t.left*Pt,top:_t.top*Pt};return St(Ot,!1)}return Promise.resolve()},[]);return y.useEffect(function(){return function(){$t.disconnect()}},[]),{boundingClientRect:Et,isSmoothScrolling:Fe,startPage:yn,endPage:cn,maxVisbilityIndex:An,virtualItems:gn,getContainerStyles:Ln,getItemContainerStyles:Cn,getItemStyles:Mn,scrollToItem:vn,scrollToNextItem:Rn,scrollToPreviousItem:In,zoom:Bn}},Si=function(w,W,oe,pe,_e,Ee){var De=oe;switch(!0){case(_e===R.ViewMode.DualPageWithCover&&Ee>=3):case(_e===R.ViewMode.DualPage&&Ee>=3):De=2*oe;break;default:De=oe}switch(pe){case R.SpecialZoomLevel.ActualSize:return 1;case R.SpecialZoomLevel.PageFit:return Math.min((w.clientWidth-17)/De,(w.clientHeight-16)/W);case R.SpecialZoomLevel.PageWidth:return(w.clientWidth-17)/De}},cs=function(w){var W,oe,pe=w.getCurrentPage,_e=(W=50,oe=y.useRef([]),y.useEffect(function(){return function(){oe.current=[]}},[]),{push:function(Oe){var Fe=oe.current;Fe.length+1>W&&Fe.shift(),Fe.push(Oe),oe.current=Fe},map:function(Oe){return oe.current.map(function(Fe){return Oe(Fe)})},pop:function(){var Oe=oe.current;if(Oe.length===0)return null;var Fe=Oe.pop();return oe.current=Oe,Fe}}),Ee=function(Oe){var Fe=y.useRef([]);return y.useEffect(function(){return function(){Fe.current=[]}},[]),{dequeue:function(){var Ze=Fe.current;if(Ze.length===0)return null;var Ke=Ze.shift();return Fe.current=Ze,Ke||null},enqueue:function(Ze){var Ke=Fe.current;Ke.length+1>Oe&&Ke.pop(),Fe.current=[Ze].concat(Ke)},map:function(Ze){return Fe.current.map(function(Ke){return Ze(Ke)})}}}(50),De=function(){var Oe=Ee.dequeue();return Oe&&_e.push(Oe),Oe&&Oe.pageIndex===pe()?De():Oe},ke=function(){var Oe=_e.pop();return Oe&&Ee.enqueue(Oe),Oe&&Oe.pageIndex===pe()?ke():Oe},me=y.useCallback(function(Oe){_e.push(Oe)},[]);return{getNextDestination:De,getPreviousDestination:ke,markVisitedDestination:me}},rr=function(w){var W=[];return w.map(function(oe){W=W.concat(oe).concat(function(pe){var _e=[];return pe.items&&pe.items.length>0&&(_e=_e.concat(rr(pe.items))),_e}(oe))}),W},sr={capture:!1,passive:!0},us={height:0,width:0},Ei={height:0,width:0},ds=function(w){var W=w.getCurrentPage,oe=w.getCurrentScrollMode,pe=w.jumpToPage,_e=w.targetRef,Ee=y.useState(R.FullScreenMode.Normal),De=Ee[0],ke=Ee[1],me=function(){var wt=y.useState(us),Yt=wt[0],$t=wt[1],Kt=ze(function(){$t({height:window.innerHeight,width:window.innerWidth})},100);return U(function(){return window.addEventListener("resize",Kt,sr),function(){window.removeEventListener("resize",Kt,sr)}},[]),Yt}(),Oe=y.useState(Ei),Fe=Oe[0],Ze=Oe[1],Ke=y.useRef(Ei),Ye=y.useRef(W()),ht=y.useRef(Ei),ct=y.useState(_e.current),ot=ct[0],Ut=ct[1],St=y.useRef();U(function(){_e.current!==ot&&Ut(_e.current)},[]),U(function(){if(ot){var wt=new ResizeObserver(function(Yt){Yt.forEach(function($t){var Kt=$t.target.getBoundingClientRect(),Jt=Kt.height,en=Kt.width;Ze({height:Jt,width:en})})});return wt.observe(ot),function(){wt.unobserve(ot),wt.disconnect()}}},[ot]);var Et=y.useCallback(function(wt){var Yt=Je();return Yt&&Yt!==wt?(ke(R.FullScreenMode.Normal),Me(Yt)):Promise.resolve()},[]),Tt=y.useCallback(function(wt){wt&&Y()&&(Ut(wt),Et(wt).then(function(){St.current=wt,ke(R.FullScreenMode.Entering),function(Yt){se&&Yt[we.RequestFullScreen]()}(wt)}))},[]),vt=y.useCallback(function(){Je()&&(ke(R.FullScreenMode.Exitting),Me(document))},[]),Mt=y.useCallback(function(){ot&&Je()!==ot&&ke(R.FullScreenMode.Exitting)},[ot]);return y.useEffect(function(){switch(De){case R.FullScreenMode.Entering:St.current&&(St.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),Ye.current=W(),Ke.current={height:window.innerHeight,width:window.innerWidth};break;case R.FullScreenMode.Entered:oe()===R.ScrollMode.Page?pe(Ye.current).then(function(){ke(R.FullScreenMode.EnteredCompletely)}):ke(R.FullScreenMode.EnteredCompletely);break;case R.FullScreenMode.Exitting:St.current&&(St.current.style.backgroundColor="",St.current=null),Ye.current=W();break;case R.FullScreenMode.Exited:ke(R.FullScreenMode.Normal),oe()===R.ScrollMode.Page&&pe(Ye.current)}},[De]),y.useEffect(function(){if(De!==R.FullScreenMode.Normal)return De===R.FullScreenMode.Entering&&me.height===Fe.height&&me.width===Fe.width&&me.height>0&&me.width>0&&(ht.current.height===0||me.height==ht.current.height)?(ht.current={height:window.innerHeight,width:window.innerWidth},void ke(R.FullScreenMode.Entered)):void(De===R.FullScreenMode.Exitting&&Ke.current.height===me.height&&Ke.current.width===me.width&&me.height>0&&me.width>0&&ke(R.FullScreenMode.Exited))},[De,me,Fe]),y.useEffect(function(){var wt;return wt=Mt,se&&document.addEventListener(we.FullScreenChange,wt),function(){(function(Yt){se&&document.removeEventListener(we.FullScreenChange,Yt)})(Mt)}},[ot]),{enterFullScreenMode:Tt,exitFullScreenMode:vt,fullScreenMode:De}},hs={buildPageStyles:function(){return{}},transformSize:function(w){return w.size}},Qn={left:0,top:0},fs=function(w){var W=w.currentFile,oe=w.defaultScale,pe=w.doc,_e=w.enableSmoothScroll,Ee=w.initialPage,De=w.initialRotation,ke=w.initialScale,me=w.pageLayout,Oe=w.pageSizes,Fe=w.plugins,Ze=w.renderPage,Ke=w.scrollMode,Ye=w.setRenderRange,ht=w.viewMode,ct=w.viewerState,ot=w.onDocumentLoad,Ut=w.onOpenFile,St=w.onPageChange,Et=w.onRotate,Tt=w.onRotatePage,vt=w.onZoom,Mt=pe.numPages,wt=pe.loadingTask.docId,Yt=y.useContext(ce).l10n,$t=y.useContext(te),Kt=$t.direction===R.TextDirection.RightToLeft,Jt=y.useRef(),en=y.useRef(),yn=y.useState(Ee),cn=yn[0],An=yn[1],gn=y.useRef(null),vn=cs({getCurrentPage:function(){return Nt.current.pageIndex}}),bn=y.useState(De),mn=bn[0],Rn=bn[1],In=Le(mn),Ln=y.useState(!1),Cn=Ln[0],Mn=Ln[1],Bn=y.useState(new Map),Pt=Bn[0],Ct=Bn[1],bt=y.useState(Ke),yt=bt[0],_t=bt[1],Ft=Le(yt),Ot=y.useState(ht),At=Ot[0],mt=Ot[1],Lt=Le(At),Vt=function(at){var It=Ge(),qt=y.useState([]),tn=qt[0],Qt=qt[1];return y.useEffect(function(){at.getOutline().then(function(Gt){if(It.current&&Gt!==null){var En=rr(Gt);Qt(En)}})},[]),tn}(pe),on=y.useState(ke),rn=on[0],Pn=on[1],Fn=Le(rn),Nt=y.useRef(ct),xn=y.useRef(typeof oe=="string"?oe:null),ln=y.useRef(-1),un=y.useRef(-1),Sn=y.useRef(Ee),nn=ds({getCurrentPage:function(){return Nt.current.pageIndex},getCurrentScrollMode:function(){return Nt.current.scrollMode},jumpToPage:function(at){return zn(at)},targetRef:en}),Un=y.useState(-1),ei=Un[0],fi=Un[1],qn=y.useState(0),si=qn[0],_s=qn[1],On=$e({doc:pe});y.useEffect(function(){return function(){gt.clear(),kt.clear()}},[wt]);var cr=y.useMemo(function(){return Object.assign({},hs,me)},[]),ys=y.useMemo(function(){return Array(Mt).fill(0).map(function(at,It){var qt=[Oe[It].pageHeight,Oe[It].pageWidth],tn=Math.abs(mn)%180==0?{height:qt[0],width:qt[1]}:{height:qt[1],width:qt[0]},Qt={height:tn.height*rn,width:tn.width*rn};return cr.transformSize({numPages:Mt,pageIndex:It,size:Qt})})},[mn,rn]),sn=ls({enableSmoothScroll:_e,isRtl:Kt,numberOfItems:Mt,parentRef:en,scrollMode:yt,setRenderRange:Ye,sizes:ys,viewMode:At}),As=ze(function(){!xn.current||Nt.current.fullScreenMode!==R.FullScreenMode.Normal||Ee>0&&Sn.current===Ee||Gn(xn.current)},200);(function(at){var It=at.targetRef,qt=at.onResize;U(function(){var tn=new ResizeObserver(function(Gt){Gt.forEach(function(En){qt(En.target)})}),Qt=It.current;if(Qt)return tn.observe(Qt),function(){tn.unobserve(Qt)}},[])})({targetRef:en,onResize:As});var Hn=function(at){var It=at;Fe.forEach(function(qt){qt.onViewerStateChange&&(It=qt.onViewerStateChange(It))}),Nt.current=It},Ss=function(){return en.current},Es=function(){return Nt.current},Cs=y.useCallback(function(at){vn.markVisitedDestination(at)},[]),Pi=y.useCallback(function(at){var It=at.pageIndex,qt=at.bottomOffset,tn=at.leftOffset,Qt=at.scaleTo,Gt=en.current,En=Nt.current;return Gt&&En?new Promise(function(Wn,Fi){ue(pe,It).then(function(pi){var Vn=pi.getViewport({scale:1}),gi=0,vr=(typeof qt=="function"?qt(Vn.width,Vn.height):qt)||0,mi=(typeof tn=="function"?tn(Vn.width,Vn.height):tn)||0,ti=En.scale;switch(Qt){case R.SpecialZoomLevel.PageFit:gi=0,mi=0,Gn(R.SpecialZoomLevel.PageFit);break;case R.SpecialZoomLevel.PageWidth:ti=Si(Gt,Oe[It].pageHeight,Oe[It].pageWidth,R.SpecialZoomLevel.PageWidth,ht,Mt),gi=(Vn.height-vr)*ti,mi*=ti,Gn(ti);break;default:gi=(Vn.height-vr)*ti,mi*=ti}switch(En.scrollMode){case R.ScrollMode.Horizontal:sn.scrollToItem(It,{left:mi,top:0}).then(function(){Wn()});break;case R.ScrollMode.Vertical:default:sn.scrollToItem(It,{left:0,top:gi}).then(function(){Wn()})}})}):Promise.resolve()},[]),ur=y.useCallback(function(at){return vn.markVisitedDestination(at),Pi(at)},[]),ws=y.useCallback(function(){var at=vn.getNextDestination();return at?Pi(at):Promise.resolve()},[]),Ps=y.useCallback(function(){var at=vn.getPreviousDestination();return at?Pi(at):Promise.resolve()},[]),xs=y.useCallback(function(){return sn.scrollToNextItem(Nt.current.pageIndex,Qn)},[]),zn=y.useCallback(function(at){return 0<=at&&at<Mt?sn.scrollToItem(at,Qn):Promise.resolve()},[]),Ts=y.useCallback(function(){return sn.scrollToPreviousItem(Nt.current.pageIndex,Qn)},[]),dr=y.useCallback(function(at){var It,qt;(It=at.name,qt=It.split(/\./).pop(),qt?qt.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(tn){var Qt=new FileReader;Qt.readAsArrayBuffer(at),Qt.onload=function(){var Gt=new Uint8Array(Qt.result);tn(Gt)}}).then(function(tn){Ut(at.name,tn)})},[Ut]),hr=y.useCallback(function(at){var It=at===R.RotateDirection.Backward?-90:90,qt=Nt.current.rotation,tn=qt===360||qt===-360?It:qt+It;On.markNotRendered(),Rn(tn),Hn($($({},Nt.current),{rotation:tn})),Et({direction:at,doc:pe,rotation:tn})},[]),xi=y.useCallback(function(at,It){var qt=It===R.RotateDirection.Backward?-90:90,tn=Nt.current.pagesRotation,Qt=(tn.has(at)?tn.get(at):De)+qt,Gt=tn.set(at,Qt);Ct(Gt),Mn(function(En){return!En}),Hn($($({},Nt.current),{pagesRotation:Gt,rotatedPage:at})),Tt({direction:It,doc:pe,pageIndex:at,rotation:Qt}),On.markRendering(at),fi(at)},[]),fr=y.useCallback(function(at){Hn($($({},Nt.current),{scrollMode:at})),_t(at)},[]),pr=y.useCallback(function(at){Hn($($({},Nt.current),{viewMode:at})),mt(at)},[]),Gn=y.useCallback(function(at){var It=en.current,qt=Nt.current.pageIndex;if(!(qt<0||qt>=Mt)){var tn=Oe[qt].pageHeight,Qt=Oe[qt].pageWidth,Gt=It?typeof at=="string"?Si(It,tn,Qt,at,Nt.current.viewMode,Mt):at:1;xn.current=typeof at=="string"?at:null,Gt!==Nt.current.scale&&(_s(function(En){return En+1}),On.markNotRendered(),Pn(Gt),vt({doc:pe,scale:Gt}),Hn($($({},Nt.current),{scale:Gt})))}},[]),Rs=y.useCallback(function(at){nn.enterFullScreenMode(at)},[]),ks=y.useCallback(function(){nn.exitFullScreenMode()},[]);y.useEffect(function(){Hn($($({},Nt.current),{fullScreenMode:nn.fullScreenMode}))},[nn.fullScreenMode]),y.useEffect(function(){var at={enterFullScreenMode:Rs,exitFullScreenMode:ks,getPagesContainer:Ss,getViewerState:Es,jumpToDestination:ur,jumpToNextDestination:ws,jumpToPreviousDestination:Ps,jumpToNextPage:xs,jumpToPreviousPage:Ts,jumpToPage:zn,openFile:dr,rotate:hr,rotatePage:xi,setViewerState:Hn,switchScrollMode:fr,switchViewMode:pr,zoom:Gn};return Fe.forEach(function(It){It.install&&It.install(at)}),function(){Fe.forEach(function(It){It.uninstall&&It.uninstall(at)})}},[wt]),y.useEffect(function(){ot({doc:pe,file:W}),Fe.forEach(function(at){at.onDocumentLoad&&at.onDocumentLoad({doc:pe,file:W})})},[wt]);var Ti,Ri,ki,gr=sn.boundingClientRect;Ti=function(){Ee&&zn(Ee)},Ri=gr.height>0&&gr.width>0,ki=y.useRef(!1),U(function(){Ri&&!ki.current&&(ki.current=!0,Ti())},[Ti,Ri]),U(function(){var at=Nt.current.pageIndex;at>-1&&Ft!==yt&&sn.scrollToItem(at,Qn).then(function(){nn.fullScreenMode===R.FullScreenMode.EnteredCompletely&&(_e||On.markNotRendered(),ln.current=-1)})},[yt]),U(function(){var at=Nt.current.pageIndex;at>-1&&In!==mn&&sn.scrollToItem(at,Qn)},[mn]),U(function(){Fn!=0&&Fn!=Nt.current.scale&&sn.zoom(Nt.current.scale/Fn,Nt.current.pageIndex).then(function(){nn.fullScreenMode===R.FullScreenMode.EnteredCompletely&&(un.current=-1)})},[rn]),U(function(){if(Lt!==Nt.current.viewMode){var at=sn.startPage,It=sn.endPage,qt=sn.virtualItems;On.markNotRendered(),On.setRange(at,It);for(var tn=function(Gt){var En=qt.find(function(Wn){return Wn.index===Gt});En&&On.setVisibility(Gt,En.visibility)},Qt=at;Qt<=It;Qt++)tn(Qt);Mi()}},[At]),U(function(){var at=Nt.current.pageIndex;at>-1&&Lt!==At&&sn.scrollToItem(at,Qn)},[At]),U(function(){var at=Nt.current.pageIndex;at>0&&at===Ee&&Sn.current===Ee&&xn.current&&(Sn.current=-1,Gn(xn.current))},[cn]),y.useEffect(function(){sn.isSmoothScrolling||gn.current!==null&&gn.current===cn||(gn.current=cn,St({currentPage:cn,doc:pe}))},[cn,sn.isSmoothScrolling]),y.useEffect(function(){nn.fullScreenMode===R.FullScreenMode.Entering&&Nt.current.scrollMode===R.ScrollMode.Page&&(ln.current=Nt.current.pageIndex),nn.fullScreenMode===R.FullScreenMode.EnteredCompletely&&Nt.current.scrollMode===R.ScrollMode.Page&&_e&&(ln.current=-1),nn.fullScreenMode===R.FullScreenMode.EnteredCompletely&&xn.current&&(un.current=Nt.current.pageIndex,Gn(xn.current))},[nn.fullScreenMode]),y.useEffect(function(){if(nn.fullScreenMode!==R.FullScreenMode.Entering&&nn.fullScreenMode!==R.FullScreenMode.Exitting&&!sn.isSmoothScrolling){var at=sn.startPage,It=sn.endPage,qt=sn.maxVisbilityIndex,tn=sn.virtualItems,Qt=qt,Gt=nn.fullScreenMode===R.FullScreenMode.Entered||nn.fullScreenMode===R.FullScreenMode.EnteredCompletely;if(!(Gt&&Qt!==ln.current&&ln.current>-1||Gt&&Qt!==un.current&&un.current>-1)){An(Qt),Hn($($({},Nt.current),{pageIndex:Qt})),On.setRange(at,It);for(var En=function(Fi){var pi=tn.find(function(Vn){return Vn.index===Fi});pi&&On.setVisibility(Fi,pi.visibility)},Wn=at;Wn<=It;Wn++)En(Wn);Mi()}}},[sn.startPage,sn.endPage,sn.isSmoothScrolling,sn.maxVisbilityIndex,nn.fullScreenMode,Cn,mn,rn]);var Ms=y.useCallback(function(at){On.markRendered(at),Mi()},[si]),Mi=function(){var at=On.getHighestPriorityPage();at>-1&&On.isInRange(at)&&(On.markRendering(at),fi(at))},Fs=function(at){var It=cn-1,qt=cn+1;switch(at){case"FirstPage":zn(0);break;case"LastPage":zn(Mt-1);break;case"NextPage":qt<Mt&&zn(qt);break;case"PrevPage":It>=0&&zn(It)}},Os=y.useCallback(function(){var at=sn.virtualItems,It=[];switch(At){case R.ViewMode.DualPage:It=st(at,2);break;case R.ViewMode.DualPageWithCover:at.length&&(It=at[0].index===0?[[at[0]]].concat(st(at.slice(1),2)):st(at,2));break;case R.ViewMode.SinglePage:default:It=st(at,1)}var qt=Yt&&Yt.core?Yt.core.pageLabel:"Page {{pageIndex}}",tn={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Jt,style:{height:"100%"}},children:y.createElement(y.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:X({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":yt===R.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Kt,"rpv-core__inner-pages--single":yt===R.ScrollMode.Page,"rpv-core__inner-pages--vertical":yt===R.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":yt===R.ScrollMode.Wrapped}),ref:en,style:{height:"100%",position:"relative"}},children:y.createElement("div",{"data-testid":"core__inner-current-page-".concat(cn),style:Object.assign({"--scale-factor":rn},sn.getContainerStyles())},It.map(function(Qt){return y.createElement("div",{className:X({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":yt===R.ScrollMode.Page}),style:sn.getItemContainerStyles(Qt[0]),key:"".concat(Qt[0].index,"-").concat(At)},Qt.map(function(Gt){var En=At===R.ViewMode.DualPageWithCover&&(Gt.index===0||Mt%2==0&&Gt.index===Mt-1);return y.createElement("div",{"aria-label":qt.replace("{{pageIndex}}","".concat(Gt.index+1)),className:X({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":At===R.ViewMode.DualPage&&Gt.index%2==0,"rpv-core__inner-page--dual-odd":At===R.ViewMode.DualPage&&Gt.index%2==1,"rpv-core__inner-page--dual-cover":En,"rpv-core__inner-page--dual-cover-even":At===R.ViewMode.DualPageWithCover&&!En&&Gt.index%2==0,"rpv-core__inner-page--dual-cover-odd":At===R.ViewMode.DualPageWithCover&&!En&&Gt.index%2==1,"rpv-core__inner-page--single":At===R.ViewMode.SinglePage&&yt===R.ScrollMode.Page}),role:"region",key:"".concat(Gt.index,"-").concat(At),style:Object.assign({},sn.getItemStyles(Gt),cr.buildPageStyles({numPages:Mt,pageIndex:Gt.index,scrollMode:yt,viewMode:At}))},y.createElement(Jr,{doc:pe,measureRef:Gt.measureRef,outlines:Vt,pageIndex:Gt.index,pageRotation:Pt.has(Gt.index)?Pt.get(Gt.index):0,pageSize:Oe[Gt.index],plugins:Fe,renderPage:Ze,renderQueueKey:si,rotation:mn,scale:rn,shouldRender:ei===Gt.index,viewMode:At,onExecuteNamedAction:Fs,onJumpFromLinkAnnotation:Cs,onJumpToDest:ur,onRenderCompleted:Ms,onRotatePage:xi}))}))}))}};return Fe.forEach(function(Qt){Qt.renderViewer&&(tn=Qt.renderViewer({containerRef:Jt,doc:pe,pagesContainerRef:en,pagesRotation:Pt,pageSizes:Oe,rotation:mn,slot:tn,themeContext:$t,jumpToPage:zn,openFile:dr,rotate:hr,rotatePage:xi,switchScrollMode:fr,switchViewMode:pr,zoom:Gn}))}),tn},[Fe,sn]),mr=y.useCallback(function(at){return y.createElement("div",$({},at.attrs,{style:at.attrs&&at.attrs.style?at.attrs.style:{}}),at.children,at.subSlot&&mr(at.subSlot))},[]);return mr(Os())},ar=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ps=function(w){var W=w.defaultScale,oe=w.doc,pe=w.render,_e=w.scrollMode,Ee=w.viewMode,De=y.useRef(),ke=y.useState({pageSizes:[],scale:0}),me=ke[0],Oe=ke[1];return y.useLayoutEffect(function(){var Fe=Array(oe.numPages).fill(0).map(function(Ze,Ke){return new Promise(function(Ye,ht){ue(oe,Ke).then(function(ct){var ot=ct.getViewport({scale:1});Ye({pageHeight:ot.height,pageWidth:ot.width,rotation:ot.rotation})})})});Promise.all(Fe).then(function(Ze){var Ke=De.current;if(Ke&&Ze.length!==0){var Ye=Ze[0].pageWidth,ht=Ze[0].pageHeight,ct=Ke.parentElement,ot=(ct.clientWidth-45)/Ye,Ut=(ct.clientHeight-45)/ht,St=ot;switch(_e){case R.ScrollMode.Horizontal:St=Math.min(ot,Ut);break;case R.ScrollMode.Vertical:default:St=ot}var Et,Tt,vt=W?typeof W=="string"?Si(ct,ht,Ye,W,Ee,oe.numPages):W:(Et=St,(Tt=ar.findIndex(function(Mt){return Mt>=Et}))===-1||Tt===0?Et:ar[Tt-1]);Oe({pageSizes:Ze,scale:vt})}})},[oe.loadingTask.docId]),me.pageSizes.length===0||me.scale===0?y.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:De},y.createElement(x,null)):pe(me.pageSizes,me.scale)},hi=function(){},Ci=function(w){function W(oe,pe){var _e=w.call(this)||this;return _e.verifyPassword=oe,_e.passwordStatus=pe,_e}return ye(W,w),W}(hi),gs=function(w){var W=w.passwordStatus,oe=w.renderProtectedView,pe=w.verifyPassword,_e=w.onDocumentAskPassword,Ee=y.useContext(ce).l10n,De=y.useState(""),ke=De[0],me=De[1],Oe=y.useContext(te).direction===R.TextDirection.RightToLeft,Fe=function(){return pe(ke)};return y.useEffect(function(){_e&&_e({verifyPassword:pe})},[]),oe?oe({passwordStatus:W,verifyPassword:pe}):y.createElement("div",{className:"rpv-core__asking-password-wrapper"},y.createElement("div",{className:X({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Oe})},y.createElement("div",{className:"rpv-core__asking-password-message"},W===R.PasswordStatus.RequiredPassword&&Ee.core.askingPassword.requirePasswordToOpen,W===R.PasswordStatus.WrongPassword&&Ee.core.wrongPassword.tryAgain),y.createElement("div",{className:"rpv-core__asking-password-body"},y.createElement("div",{className:X({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Oe,"rpv-core__asking-password-input--rtl":Oe})},y.createElement(P,{testId:"core__asking-password-input",type:"password",value:ke,onChange:me,onKeyDown:function(Ze){Ze.key==="Enter"&&Fe()}})),y.createElement(H,{onClick:Fe},Ee.core.askingPassword.submit))))},or=function(w){function W(oe){var pe=w.call(this)||this;return pe.doc=oe,pe}return ye(W,w),W}(hi),lr=function(w){function W(oe){var pe=w.call(this)||this;return pe.error=oe,pe}return ye(W,w),W}(hi),wi=function(w){function W(oe){var pe=w.call(this)||this;return pe.percentages=oe,pe}return ye(W,w),W}(hi),ms=function(w){var W=w.characterMap,oe=w.file,pe=w.httpHeaders,_e=w.render,Ee=w.renderError,De=w.renderLoader,ke=w.renderProtectedView,me=w.transformGetDocumentParams,Oe=w.withCredentials,Fe=w.onDocumentAskPassword,Ze=y.useContext(te).direction===R.TextDirection.RightToLeft,Ke=y.useState(new wi(0)),Ye=Ke[0],ht=Ke[1],ct=y.useRef(""),ot=Ge();return y.useEffect(function(){ct.current="",ht(new wi(0));var Ut=new ve.PDFWorker({name:"PDFWorker_".concat(Date.now())}),St=Object.assign({httpHeaders:pe,withCredentials:Oe,worker:Ut},typeof oe=="string"?{url:oe}:{data:oe},W?{cMapUrl:W.url,cMapPacked:W.isCompressed}:{}),Et=me?me(St):St,Tt=ve.getDocument(Et);return Tt.onPassword=function(vt,Mt){switch(Mt){case ve.PasswordResponses.NEED_PASSWORD:ot.current&&ht(new Ci(vt,R.PasswordStatus.RequiredPassword));break;case ve.PasswordResponses.INCORRECT_PASSWORD:ot.current&&ht(new Ci(vt,R.PasswordStatus.WrongPassword))}},Tt.onProgress=function(vt){var Mt=vt.total>0?Math.min(100,100*vt.loaded/vt.total):100;ot.current&&ct.current===""&&ht(new wi(Mt))},Tt.promise.then(function(vt){ct.current=vt.loadingTask.docId,ot.current&&ht(new or(vt))},function(vt){return ot.current&&!Ut.destroyed&&ht(new lr({message:vt.message||"Cannot load document",name:vt.name}))}),function(){Tt.destroy(),Ut.destroy()}},[oe]),Ye instanceof Ci?y.createElement(gs,{passwordStatus:Ye.passwordStatus,renderProtectedView:ke,verifyPassword:Ye.verifyPassword,onDocumentAskPassword:Fe}):Ye instanceof or?_e(Ye.doc):Ye instanceof lr?Ee?Ee(Ye.error):y.createElement("div",{className:X({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Ze})},y.createElement("div",{className:"rpv-core__doc-error-text"},Ye.error.message)):y.createElement("div",{"data-testid":"core__doc-loading",className:X({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Ze})},De?De(Ye.percentages):y.createElement(x,null))},vs=function(w,W){var oe=y.useMemo(function(){return w==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":w},[]),pe=y.useState(oe),_e=pe[0],Ee=pe[1],De=Le(_e);return y.useEffect(function(){if(w==="auto"){var ke=window.matchMedia("(prefers-color-scheme: dark)"),me=function(Oe){Ee(Oe.matches?"dark":"light")};return ke.addEventListener("change",me),function(){return ke.removeEventListener("change",me)}}},[]),y.useEffect(function(){_e!==De&&W&&W(_e)},[_e]),y.useEffect(function(){w!==_e&&Ee(w)},[w]),{currentTheme:_e,setCurrentTheme:Ee}},bs=function(w){return{startPage:w.startPage-3,endPage:w.endPage+3}};R.Button=function(w){var W=w.children,oe=w.testId,pe=w.onClick,_e=y.useContext(te).direction===R.TextDirection.RightToLeft,Ee=oe?{"data-testid":oe}:{};return y.createElement("button",$({className:X({"rpv-core__button":!0,"rpv-core__button--rtl":_e}),type:"button",onClick:pe},Ee),W)},R.Icon=T,R.LazyRender=function(w){var W=w.attrs,oe=w.children,pe=w.testId,_e=y.useState(!1),Ee=_e[0],De=_e[1],ke=pe?$($({},W),{"data-testid":pe}):W,me=V({once:!0,onVisibilityChanged:function(Oe){Oe.isVisible&&De(!0)}});return y.createElement("div",$({ref:me},ke),Ee&&oe)},R.LocalizationContext=ce,R.Menu=function(w){var W=w.children,oe=y.useRef(),pe=y.useRef([]),_e=y.useContext(te).direction===R.TextDirection.RightToLeft,Ee=function(ke){if(oe.current)switch(ke.key){case"Tab":ke.preventDefault();break;case"ArrowDown":ke.preventDefault(),De(function(me,Oe){return Oe+1});break;case"ArrowUp":ke.preventDefault(),De(function(me,Oe){return Oe-1});break;case"End":ke.preventDefault(),De(function(me,Oe){return me.length-1});break;case"Home":ke.preventDefault(),De(function(me,Oe){return 0})}},De=function(ke){if(oe.current){var me=pe.current,Oe=me.findIndex(function(Ze){return Ze.getAttribute("tabindex")==="0"}),Fe=Math.min(me.length-1,Math.max(0,ke(me,Oe)));Oe>=0&&Oe<=me.length-1&&me[Oe].setAttribute("tabindex","-1"),me[Fe].setAttribute("tabindex","0"),me[Fe].focus()}};return U(function(){var ke=oe.current;if(ke){var me=function(Oe){var Fe=[];return Oe.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Ze){if(Ze instanceof HTMLElement){var Ke=Ze.parentElement;(Ke===Oe||window.getComputedStyle(Ke).display!=="none")&&Fe.push(Ze)}}),Fe}(ke);pe.current=me}},[]),U(function(){return document.addEventListener("keydown",Ee),function(){document.removeEventListener("keydown",Ee)}},[]),y.createElement("div",{ref:oe,"aria-orientation":"vertical",className:X({"rpv-core__menu":!0,"rpv-core__menu--rtl":_e}),role:"menu",tabIndex:0},W)},R.MenuDivider=function(){return y.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},R.MenuItem=function(w){var W=w.checked,oe=W!==void 0&&W,pe=w.children,_e=w.icon,Ee=_e===void 0?null:_e,De=w.isDisabled,ke=De!==void 0&&De,me=w.testId,Oe=w.onClick,Fe=y.useContext(te).direction===R.TextDirection.RightToLeft,Ze=me?{"data-testid":me}:{};return y.createElement("button",$({className:X({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":ke,"rpv-core__menu-item--ltr":!Fe,"rpv-core__menu-item--rtl":Fe}),role:"menuitem",tabIndex:-1,type:"button",onClick:Oe},Ze),y.createElement("div",{className:X({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Fe,"rpv-core__menu-item-icon--rtl":Fe})},Ee),y.createElement("div",{className:X({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Fe,"rpv-core__menu-item-label--rtl":Fe})},pe),y.createElement("div",{className:X({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Fe,"rpv-core__menu-item-check--rtl":Fe})},oe&&y.createElement(L,null)))},R.MinimalButton=function(w){var W=w.ariaLabel,oe=W===void 0?"":W,pe=w.ariaKeyShortcuts,_e=pe===void 0?"":pe,Ee=w.children,De=w.isDisabled,ke=De!==void 0&&De,me=w.isSelected,Oe=me!==void 0&&me,Fe=w.testId,Ze=w.onClick,Ke=y.useContext(te).direction===R.TextDirection.RightToLeft,Ye=Fe?{"data-testid":Fe}:{};return y.createElement("button",$({"aria-label":oe},_e&&{"aria-keyshortcuts":_e},ke&&{"aria-disabled":!0},{className:X({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":ke,"rpv-core__minimal-button--rtl":Ke,"rpv-core__minimal-button--selected":Oe}),type:"button",onClick:Ze},Ye),Ee)},R.Modal=function(w){var W=w.ariaControlsSuffix,oe=w.closeOnClickOutside,pe=w.closeOnEscape,_e=w.content,Ee=w.isOpened,De=Ee!==void 0&&Ee,ke=w.target,me=W||"".concat(F());return y.createElement(Xe,{target:ke?function(Oe,Fe){return y.createElement("div",{"aria-expanded":Fe?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(me)},ke(Oe,Fe))}:null,content:function(Oe){return y.createElement(Ae,null,y.createElement(fe,{ariaControlsSuffix:me,closeOnClickOutside:oe,closeOnEscape:pe,onToggle:Oe},_e(Oe)))},isOpened:De})},R.Popover=function(w){var W=w.ariaHasPopup,oe=W===void 0?"dialog":W,pe=w.ariaControlsSuffix,_e=w.closeOnClickOutside,Ee=w.closeOnEscape,De=w.content,ke=w.lockScroll,me=ke===void 0||ke,Oe=w.offset,Fe=w.position,Ze=w.target,Ke=je(!1),Ye=Ke.opened,ht=Ke.toggle,ct=y.useRef(),ot=y.useMemo(function(){return pe||"".concat(F())},[]);return y.createElement("div",{ref:ct,"aria-expanded":Ye?"true":"false","aria-haspopup":oe,"aria-controls":"rpv-core__popver-body-".concat(ot)},Ze(ht,Ye),Ye&&y.createElement(y.Fragment,null,me&&y.createElement(rt,{closeOnEscape:Ee,onClose:ht}),y.createElement(Qe,{ariaControlsSuffix:ot,closeOnClickOutside:_e,offset:Oe,position:Fe,targetRef:ct,onClose:ht},De(ht))))},R.PrimaryButton=H,R.ProgressBar=function(w){var W=w.progress,oe=y.useContext(te).direction===R.TextDirection.RightToLeft;return y.createElement("div",{className:X({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":oe})},y.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(W,"%")}},W,"%"))},R.Separator=function(){return y.createElement("div",{className:"rpv-core__separator"})},R.Spinner=x,R.Splitter=function(w){var W=w.constrain,oe=y.useContext(te).direction===R.TextDirection.RightToLeft,pe=y.useRef(),_e=y.useRef(),Ee=y.useRef(),De=y.useRef(0),ke=y.useRef(0),me=y.useRef(0),Oe=y.useRef(0),Fe={capture:!0},Ze=function(Ye){var ht=pe.current,ct=_e.current,ot=Ee.current;if(ht&&ct&&ot){var Ut=Oe.current,St=Ye.clientX-De.current,Et=me.current+(oe?-St:St),Tt=ht.parentElement.getBoundingClientRect().width,vt=100*Et/Tt;if(ht.classList.add("rpv-core__splitter--resizing"),W){var Mt=Tt-Et-Ut;if(!W({firstHalfPercentage:vt,firstHalfSize:Et,secondHalfPercentage:100*Mt/Tt,secondHalfSize:Mt}))return}ct.style.width="".concat(vt,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),ct.classList.add("rpv-core__splitter-sibling--resizing"),ot.classList.add("rpv-core__splitter-sibling--resizing")}},Ke=function(Ye){var ht=pe.current,ct=_e.current,ot=Ee.current;ht&&ct&&ot&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),ht.classList.remove("rpv-core__splitter--resizing"),ct.classList.remove("rpv-core__splitter-sibling--resizing"),ot.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Ze,Fe),document.removeEventListener("mouseup",Ke,Fe))};return y.useEffect(function(){var Ye=pe.current;Ye&&(Oe.current=Ye.getBoundingClientRect().width,_e.current=Ye.previousElementSibling,Ee.current=Ye.nextElementSibling)},[]),y.createElement("div",{ref:pe,className:"rpv-core__splitter",onMouseDown:function(Ye){var ht=_e.current;ht&&(De.current=Ye.clientX,ke.current=Ye.clientY,me.current=ht.getBoundingClientRect().width,document.addEventListener("mousemove",Ze,Fe),document.addEventListener("mouseup",Ke,Fe))}})},R.TextBox=P,R.ThemeContext=te,R.Tooltip=function(w){var W=w.ariaControlsSuffix,oe=w.content,pe=w.offset,_e=w.position,Ee=w.target,De=je(!1),ke=De.opened,me=De.toggle,Oe=y.useRef(),Fe=y.useRef(),Ze=y.useMemo(function(){return W||"".concat(F())},[]);le(function(){Oe.current&&document.activeElement&&Oe.current.contains(document.activeElement)&&Ye()});var Ke=function(){me(R.ToggleStatus.Open)},Ye=function(){me(R.ToggleStatus.Close)};return y.createElement(y.Fragment,null,y.createElement("div",{ref:Oe,"aria-describedby":"rpv-core__tooltip-body-".concat(Ze),onBlur:function(ht){ht.relatedTarget instanceof HTMLElement&&ht.currentTarget.parentElement&&ht.currentTarget.parentElement.contains(ht.relatedTarget)?Fe.current&&(Fe.current.style.display="none"):Ye()},onFocus:Ke,onMouseEnter:Ke,onMouseLeave:Ye},Ee),ke&&y.createElement(He,{ariaControlsSuffix:Ze,contentRef:Fe,offset:pe,position:_e,targetRef:Oe},oe()))},R.Viewer=function(w){var W=w.characterMap,oe=w.defaultScale,pe=w.enableSmoothScroll,_e=pe===void 0||pe,Ee=w.fileUrl,De=w.httpHeaders,ke=De===void 0?{}:De,me=w.initialPage,Oe=me===void 0?0:me,Fe=w.pageLayout,Ze=w.initialRotation,Ke=Ze===void 0?0:Ze,Ye=w.localization,ht=w.plugins,ct=ht===void 0?[]:ht,ot=w.renderError,Ut=w.renderLoader,St=w.renderPage,Et=w.renderProtectedView,Tt=w.scrollMode,vt=Tt===void 0?R.ScrollMode.Vertical:Tt,Mt=w.setRenderRange,wt=Mt===void 0?bs:Mt,Yt=w.transformGetDocumentParams,$t=w.theme,Kt=$t===void 0?{direction:R.TextDirection.LeftToRight,theme:"light"}:$t,Jt=w.viewMode,en=Jt===void 0?R.ViewMode.SinglePage:Jt,yn=w.withCredentials,cn=yn!==void 0&&yn,An=w.onDocumentAskPassword,gn=w.onDocumentLoad,vn=gn===void 0?function(){}:gn,bn=w.onPageChange,mn=bn===void 0?function(){}:bn,Rn=w.onRotate,In=Rn===void 0?function(){}:Rn,Ln=w.onRotatePage,Cn=Ln===void 0?function(){}:Ln,Mn=w.onSwitchTheme,Bn=Mn===void 0?function(){}:Mn,Pt=w.onZoom,Ct=Pt===void 0?function(){}:Pt,bt=y.useState({data:Ee,name:typeof Ee=="string"?Ee:"",shouldLoad:!1}),yt=bt[0],_t=bt[1],Ft=function(ln,un){_t({data:un,name:ln,shouldLoad:!0})},Ot=y.useState(!1),At=Ot[0],mt=Ot[1],Lt=Le(yt);y.useEffect(function(){var ln,un,Sn,nn;ln=Lt.data,nn=typeof(un=Ee),(Sn=typeof ln)=="string"&&nn==="string"&&ln===un||Sn==="object"&&nn==="object"&&ln.length===un.length&&ln.every(function(Un,ei){return Un===un[ei]})||_t({data:Ee,name:typeof Ee=="string"?Ee:"",shouldLoad:At})},[Ee,At]);var Vt=V({onVisibilityChanged:function(ln){mt(ln.isVisible),ln.isVisible&&_t(function(un){return Object.assign({},un,{shouldLoad:!0})})}}),on=typeof Kt=="string"?{direction:R.TextDirection.LeftToRight,theme:Kt}:Kt,rn=y.useState(Ye||et),Pn=rn[0],Fn=rn[1],Nt={l10n:Pn,setL10n:Fn},xn=Object.assign({},{direction:on.direction},vs(on.theme||"light",Bn));return y.useEffect(function(){Ye&&Fn(Ye)},[Ye]),y.createElement(ce.Provider,{value:Nt},y.createElement(te.Provider,{value:xn},y.createElement("div",{ref:Vt,className:"rpv-core__viewer rpv-core__viewer--".concat(xn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},yt.shouldLoad&&y.createElement(ms,{characterMap:W,file:yt.data,httpHeaders:ke,render:function(ln){return y.createElement(ps,{defaultScale:oe,doc:ln,render:function(un,Sn){return y.createElement(fs,{currentFile:{data:yt.data,name:yt.name},defaultScale:oe,doc:ln,enableSmoothScroll:_e,initialPage:Oe,initialRotation:Ke,initialScale:Sn,pageLayout:Fe,pageSizes:un,plugins:ct,renderPage:St,scrollMode:vt,setRenderRange:wt,viewMode:en,viewerState:{file:yt,fullScreenMode:R.FullScreenMode.Normal,pageIndex:-1,pageHeight:un[0].pageHeight,pageWidth:un[0].pageWidth,pagesRotation:new Map,rotation:Ke,scale:Sn,scrollMode:vt,viewMode:en},onDocumentLoad:vn,onOpenFile:Ft,onPageChange:mn,onRotate:In,onRotatePage:Cn,onZoom:Ct})},scrollMode:vt,viewMode:en})},renderError:ot,renderLoader:Ut,renderProtectedView:Et,transformGetDocumentParams:Yt,withCredentials:cn,onDocumentAskPassword:An}))))},R.Worker=function(w){var W=w.children,oe=w.workerUrl;return ve.GlobalWorkerOptions.workerSrc=oe,y.createElement(y.Fragment,null,W)},R.chunk=st,R.classNames=X,R.createStore=function(w){var W=w||{},oe={},pe=function(Ee,De){var ke;W=$($({},W),((ke={})[Ee]=De,ke)),(oe[Ee]||[]).forEach(function(me){return me(W[Ee])})},_e=function(Ee){return W[Ee]};return{subscribe:function(Ee,De){oe[Ee]=(oe[Ee]||[]).concat(De)},unsubscribe:function(Ee,De){oe[Ee]=(oe[Ee]||[]).filter(function(ke){return ke!==De})},update:function(Ee,De){pe(Ee,De)},updateCurrentValue:function(Ee,De){var ke=_e(Ee);ke!==void 0&&pe(Ee,De(ke))},get:function(Ee){return _e(Ee)}}},R.getDestination=ge,R.getPage=ue,R.isFullScreenEnabled=Y,R.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},R.useDebounceCallback=ze,R.useIntersectionObserver=V,R.useIsMounted=Ge,R.useIsomorphicLayoutEffect=U,R.usePrevious=Le,R.useRenderQueue=$e})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$1.exports=core_min;var libExports$1=lib$1.exports,lib={exports:{}},zoom_min={},e=libExports$1;function t(R){var j=Object.create(null);return R&&Object.keys(R).forEach(function(Pe){if(Pe!=="default"){var B=Object.getOwnPropertyDescriptor(R,Pe);Object.defineProperty(j,Pe,B.get?B:{enumerable:!0,get:function(){return R[Pe]}})}}),j.default=R,Object.freeze(j)}var n=t(reactExports),o=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r=function(){return n.createElement(e.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c=function(){return c=Object.assign||function(R){for(var j,Pe=1,B=arguments.length;Pe<B;Pe++)for(var J in j=arguments[Pe])Object.prototype.hasOwnProperty.call(j,J)&&(R[J]=j[J]);return R},c.apply(this,arguments)},a=function(R){var j=n.useState(R.get("scale")||0),Pe=j[0],B=j[1],J=function(y){B(y)};return n.useEffect(function(){return R.subscribe("scale",J),function(){R.unsubscribe("scale",J)}},[]),{scale:Pe}},u=function(R){var j=R.children,Pe=R.store;return(j||function(B){return n.createElement(n.Fragment,null,"".concat(Math.round(100*B.scale),"%"))})({scale:a(Pe).scale})},l={passive:!1},i=null,s=function(R){var j=R.pagesContainerRef,Pe=R.store,B=e.useDebounceCallback(function(y){var ve=Pe.get("zoom");ve&&ve(y)},40),J=function(y){if(y.ctrlKey){y.preventDefault();var ve=y.target.getBoundingClientRect(),Ne=1-y.deltaY/100,ye=y.clientX-ve.left,Q=y.clientY-ve.top,$=Pe.get("scale"),be=(i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(ye,Q).scale(Ne).translate(-ye,-Q).scale($);B(be.a)}};return e.useIsomorphicLayoutEffect(function(){var y=j.current;if(y)return y.addEventListener("wheel",J,l),function(){y.removeEventListener("wheel",J)}},[]),n.createElement(n.Fragment,null)},m=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f=function(R){return m.find(function(j){return j>R})||R},v=function(R){var j=m.findIndex(function(Pe){return Pe>=R});return j===-1||j===0?R:m[j-1]},p=function(R){var j=R.containerRef,Pe=R.store,B=function(J){if(!J.shiftKey&&!J.altKey&&(e.isMac()?J.metaKey:J.ctrlKey)){var y=j.current;if(y&&document.activeElement&&y.contains(document.activeElement)){var ve=Pe.get("zoom");if(ve){var Ne=Pe.get("scale")||1,ye=1;switch(J.key){case"-":ye=v(Ne);break;case"=":ye=f(Ne);break;case"0":ye=1;break;default:ye=Ne}ye!==Ne&&(J.preventDefault(),ve(ye))}}}};return n.useEffect(function(){if(j.current)return document.addEventListener("keydown",B),function(){document.removeEventListener("keydown",B)}},[j.current]),n.createElement(n.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E={left:0,top:8},d=function(R){var j=R.levels,Pe=j===void 0?z:j,B=R.scale,J=R.onZoom,y=n.useContext(e.LocalizationContext).l10n,ve=n.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,Ne=y&&y.zoom?y.zoom.zoomDocument:"Zoom document";return n.createElement(e.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e.Position.BottomCenter,target:function(ye){return n.createElement(e.MinimalButton,{ariaLabel:Ne,testId:"zoom__popover-target",onClick:function(){ye()}},n.createElement("span",{className:"rpv-zoom__popover-target"},n.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!ve,"rpv-zoom__popover-target-scale--rtl":ve})},Math.round(100*B),"%"),n.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(ye){return n.createElement(e.Menu,null,Object.keys(e.SpecialZoomLevel).map(function(Q){var $=Q;return n.createElement(e.MenuItem,{key:$,onClick:function(){ye(),J($)}},function(be){switch(be){case e.SpecialZoomLevel.ActualSize:return y&&y.zoom?y.zoom.actualSize:"Actual size";case e.SpecialZoomLevel.PageFit:return y&&y.zoom?y.zoom.pageFit:"Page fit";case e.SpecialZoomLevel.PageWidth:return y&&y.zoom?y.zoom.pageWidth:"Page width"}}($))}),n.createElement(e.MenuDivider,null),Pe.map(function(Q){return n.createElement(e.MenuItem,{key:Q,onClick:function(){ye(),J(Q)}},"".concat(Math.round(100*Q),"%"))}))},offset:E,closeOnClickOutside:!0,closeOnEscape:!0})},g=function(R){var j=R.children,Pe=R.levels,B=R.store;return(j||function(J){return n.createElement(d,{levels:Pe,scale:J.scale,onZoom:J.onZoom})})({scale:a(B).scale,onZoom:function(J){var y=B.get("zoom");y&&y(J)}})},C={left:0,top:8},h=function(R){var j=R.enableShortcuts,Pe=R.onClick,B=n.useContext(e.LocalizationContext).l10n,J=B&&B.zoom?B.zoom.zoomIn:"Zoom in",y=j?e.isMac()?"Meta+=":"Ctrl+=":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-in",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:y,ariaLabel:J,testId:"zoom__in-button",onClick:Pe},n.createElement(o,null)),content:function(){return J},offset:C})},b=function(R){var j=R.children,Pe=R.enableShortcuts,B=R.store,J=a(B).scale;return(j||h)({enableShortcuts:Pe,onClick:function(){var y=B.get("zoom");y&&y(f(J))}})},k=function(R){var j=R.onClick,Pe=n.useContext(e.LocalizationContext).l10n,B=Pe&&Pe.zoom?Pe.zoom.zoomIn:"Zoom in";return n.createElement(e.MenuItem,{icon:n.createElement(o,null),testId:"zoom__in-menu",onClick:j},B)},S={left:0,top:8},M=function(R){var j=R.enableShortcuts,Pe=R.onClick,B=n.useContext(e.LocalizationContext).l10n,J=B&&B.zoom?B.zoom.zoomOut:"Zoom out",y=j?e.isMac()?"Meta+-":"Ctrl+-":"";return n.createElement(e.Tooltip,{ariaControlsSuffix:"zoom-out",position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaKeyShortcuts:y,ariaLabel:J,testId:"zoom__out-button",onClick:Pe},n.createElement(r,null)),content:function(){return J},offset:S})},I=function(R){var j=R.children,Pe=R.enableShortcuts,B=R.store,J=a(B).scale;return(j||M)({enableShortcuts:Pe,onClick:function(){var y=B.get("zoom");y&&y(v(J))}})},Z=function(R){var j=R.onClick,Pe=n.useContext(e.LocalizationContext).l10n,B=Pe&&Pe.zoom?Pe.zoom.zoomOut:"Zoom out";return n.createElement(e.MenuItem,{icon:n.createElement(r,null),testId:"zoom__out-menu",onClick:j},B)};zoom_min.ZoomInIcon=o,zoom_min.ZoomOutIcon=r,zoom_min.zoomPlugin=function(R){var j=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0},R)},[]),Pe=n.useMemo(function(){return e.createStore({})},[]),B=function(ve){return n.createElement(b,c({enableShortcuts:j.enableShortcuts},ve,{store:Pe}))},J=function(ve){return n.createElement(I,c({enableShortcuts:j.enableShortcuts},ve,{store:Pe}))},y=function(ve){return n.createElement(g,c({},ve,{store:Pe}))};return{renderViewer:function(ve){var Ne=ve.slot;if(!j.enableShortcuts)return Ne;var ye={children:n.createElement(n.Fragment,null,n.createElement(p,{containerRef:ve.containerRef,store:Pe}),n.createElement(s,{pagesContainerRef:ve.pagesContainerRef,store:Pe}),Ne.children)};return c(c({},Ne),ye)},install:function(ve){Pe.update("zoom",ve.zoom)},onViewerStateChange:function(ve){return Pe.update("scale",ve.scale),ve},zoomTo:function(ve){var Ne=Pe.get("zoom");Ne&&Ne(ve)},CurrentScale:function(ve){return n.createElement(u,c({},ve,{store:Pe}))},ZoomIn:B,ZoomInButton:function(){return n.createElement(B,null,function(ve){return n.createElement(h,c({},ve))})},ZoomInMenuItem:function(ve){return n.createElement(B,null,function(Ne){return n.createElement(k,{onClick:function(){Ne.onClick(),ve.onClick()}})})},ZoomOut:J,ZoomOutButton:function(){return n.createElement(J,null,function(ve){return n.createElement(M,c({},ve))})},ZoomOutMenuItem:function(ve){return n.createElement(J,null,function(Ne){return n.createElement(Z,{onClick:function(){Ne.onClick(),ve.onClick()}})})},Zoom:y,ZoomPopover:function(ve){return n.createElement(y,null,function(Ne){return n.createElement(d,c({levels:ve==null?void 0:ve.levels},Ne))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=zoom_min;var libExports=lib.exports;const VisualizadorDocumento=({auth:R})=>{const{documento:j}=q().props,{hasRoles:Pe,hasPermission:B}=usePermission(),{isOpen:J,onOpen:y,onOpenChange:ve}=useDisclosure(),[Ne,ye]=reactExports.useState([]),Q=async()=>{if(j.id!==0)try{const A=await axios.get(`/api/documentos-anexos/${j.id}`);ye(A.data.datos)}catch(A){console.error("Error al obtener documentos:",A)}},$=libExports.zoomPlugin(),{CurrentScale:be,ZoomIn:te,ZoomOut:X}=$,{url:U,link:V,filename:T}=Transform(j.file,j.mime_file,j.name_file),[L,H]=m$1.useState(1),x=6,P=Math.ceil(Ne.length/x);m$1.useMemo(()=>{const A=(L-1)*x,N=A+x;return Ne.slice(A,N)},[L,Ne]),reactExports.useEffect(()=>{Q()},[]);const _=A=>{let N="";switch(A.name){case"InvalidPDFException":N="El documento es inválido o corrompido";break;case"MissingPDFException":N="No se encuentra el documento";break;case"UnexpectedResponseException":N="Error inesperado del servidor";break;default:N="No se puede cargar el documento";break}return jsxRuntimeExports.jsx("div",{style:{alignItems:"center",border:"1px solid rgba(0, 0, 0, 0.3)",display:"flex",height:"100%",justifyContent:"center"},children:jsxRuntimeExports.jsx("div",{style:{backgroundColor:"#e53e3e",borderRadius:"0.25rem",color:"#fff",padding:"0.5rem"},children:N})})};return jsxRuntimeExports.jsxs(Authenticated,{user:R.user,header:jsxRuntimeExports.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Visualizador"}),children:[jsxRuntimeExports.jsx(ae,{title:"Visualizar"}),jsxRuntimeExports.jsx(TitleTemplate,{children:jsxRuntimeExports.jsxs("div",{className:"w-full lg:flex justify-between",children:[jsxRuntimeExports.jsx("div",{children:"Visualizador Documento"}),B("Ver documentos anexos")?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"align-items-center flex",children:jsxRuntimeExports.jsx(button_default,{color:"primary",variant:"ghost",onPress:y,children:"Ver documentos anexos"})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})}),jsxRuntimeExports.jsx(modal_default,{size:"4xl",isOpen:J,onOpenChange:ve,children:jsxRuntimeExports.jsx(modal_content_default,{children:A=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(modal_header_default,{className:"flex flex-col gap-1",children:"Documentos anexos"}),jsxRuntimeExports.jsx(modal_body_default,{children:jsxRuntimeExports.jsxs(table_default,{"aria-label":"Tabla documentos anexos",bottomContent:jsxRuntimeExports.jsx("div",{className:"flex w-full justify-center",children:jsxRuntimeExports.jsx(pagination_default,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:L,total:P,onChange:N=>H(N)})}),classNames:{wrapper:"min-h-[222px]"},children:[jsxRuntimeExports.jsxs(table_header_default,{children:[jsxRuntimeExports.jsx(table_column_default,{children:"Numero de documento"}),jsxRuntimeExports.jsx(table_column_default,{children:"Tipo de documento"}),jsxRuntimeExports.jsx(table_column_default,{children:"Autor de documento"}),jsxRuntimeExports.jsx(table_column_default,{children:"Fecha de documento"}),jsxRuntimeExports.jsx(table_column_default,{children:"Acción"})]}),jsxRuntimeExports.jsx(table_body_default,{emptyContent:"Aún no hay documentos anexos",children:Ne.map(N=>jsxRuntimeExports.jsxs(table_row_default,{children:[jsxRuntimeExports.jsx(table_cell_default,{children:N.numero}),jsxRuntimeExports.jsx(table_cell_default,{children:N.tipo}),jsxRuntimeExports.jsxs(table_cell_default,{children:[N.autor_nombre," ",N.autor_apellido]}),jsxRuntimeExports.jsx(table_cell_default,{children:N.fecha}),jsxRuntimeExports.jsxs(table_cell_default,{children:[B("Visualizar documento")&&N.file&&N.estado=="Habilitado"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Tooltip,{content:"Visualizar",color:"secondary",children:jsxRuntimeExports.jsx(de,{href:route("documento.visualizar",N.id),children:jsxRuntimeExports.jsx(button_default,{className:"me-1",size:"sm",color:"secondary",variant:"flat",children:jsxRuntimeExports.jsx(Icon,{path:mdiFileEyeOutline,size:1})})})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),B("Descargar documento")&&N.file&&N.estado=="Habilitado"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Tooltip,{content:"Descargar",color:"primary",children:jsxRuntimeExports.jsx("a",{download:N.name_file+".pdf",href:`data:${N.mime_file};base64,${N.file}`,children:jsxRuntimeExports.jsx(button_default,{className:"me-1",size:"sm",color:"primary",variant:"flat",children:jsxRuntimeExports.jsx(Icon,{path:mdiFileDownloadOutline,size:1})})})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})]},N.id))})]})}),jsxRuntimeExports.jsx(modal_footer_default,{})]})})}),jsxRuntimeExports.jsx(ContentTemplate,{children:jsxRuntimeExports.jsx("div",{className:"",children:jsxRuntimeExports.jsx(libExports$1.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.4.120/build/pdf.worker.js",children:jsxRuntimeExports.jsxs("div",{className:"rpv-core__viewer",style:{border:"1px solid rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",height:"100%"},children:[jsxRuntimeExports.jsxs("div",{className:"justify-between",style:{alignItems:"center",backgroundColor:"#eeeeee",borderBottom:"1px solid rgba(0, 0, 0, 0.3)",display:"flex",padding:"4px"},children:[B("Descargar documento")&&j.file?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("a",{download:T,href:V,className:"",children:jsxRuntimeExports.jsx(button_default,{startContent:jsxRuntimeExports.jsx(Icon,{path:mdiTrayArrowDown,size:1}),children:jsxRuntimeExports.jsx("p",{className:"md:flex hidden",children:"Descarga aqui"})})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(X,{children:A=>jsxRuntimeExports.jsx(button_default,{startContent:jsxRuntimeExports.jsx(Icon,{path:mdiMagnifyMinusOutline,size:1}),style:{backgroundColor:"#357edd",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",padding:"8px"},onClick:A.onClick})}),jsxRuntimeExports.jsx("div",{style:{padding:"0px 2px"},children:jsxRuntimeExports.jsx(be,{children:A=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:`${Math.round(A.scale*100)}%`})})}),jsxRuntimeExports.jsx(te,{children:A=>jsxRuntimeExports.jsx(button_default,{startContent:jsxRuntimeExports.jsx(Icon,{path:mdiMagnifyPlusOutline,size:1}),style:{backgroundColor:"#357edd",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",padding:"8px"},onClick:A.onClick})})]})]}),jsxRuntimeExports.jsx("div",{style:{flex:1,overflow:"hidden"},children:jsxRuntimeExports.jsx(libExports$1.Viewer,{fileUrl:U,theme:{theme:"auto"},plugins:[$],defaultScale:.8,renderError:_,renderLoader:A=>jsxRuntimeExports.jsx("div",{style:{width:"240px"},children:jsxRuntimeExports.jsx(libExports$1.ProgressBar,{progress:Math.round(A)})})})})]})})})})]})};export{VisualizadorDocumento as default};
