import{q as M,r as t,j as e,a as E,d as N}from"./app-eXGWw0Q1.js";import{A as R,I as o,m as B,b as u,a as D,t as w,c as G,d as L,u as k}from"./AuthenticatedLayout-xmXHQCqJ.js";import{T as O}from"./TitleTemplate-g8fmxVri.js";import{C as V}from"./ContentTemplate-Tjr8Dmcy.js";import{F as q}from"./FilterTemplate-NM1ULPE2.js";import{S as K}from"./Select-okRpXzt-.js";import{i as H}from"./chunk-TC4QW7OA-vNTTWJaW.js";import{t as J,p as Q,a as U,b as W,c as X,d as Y,e as h}from"./chunk-YRZGWF2W-C22kSm3v.js";import"./import-l4FZ2bLw.js";import"./import-oEubEFRA.js";import"./chunk-AMSULWPV-Pe1sDtjI.js";const xe=({auth:C})=>{const{hasRoles:Z,hasPermission:p}=k(),{all_permisos:v}=M().props,[c,$]=t.useState(v),_=[{name:"ID",uid:"id",sortable:!0},{name:"Nombre",uid:"nombre",sortable:!0},{name:"Acciones",uid:"accion"}],[r,m]=t.useState(""),[S,y]=t.useState([]),P=!!r,d=t.useMemo(()=>{let s=[...c];return P&&(s=s.filter(l=>l.name.toLowerCase().includes(r.toLowerCase()))),s},[c,r]),F=t.useCallback(s=>{s?(m(s),n(1)):m("")},[]),z=t.useCallback(()=>{m(""),n(1)},[]),[i,ee]=t.useState({column:"fecha",direction:"ascending"}),[x,n]=t.useState(1),[a,T]=t.useState(8),A=Math.ceil(d.length/a),f=t.useMemo(()=>{const s=(x-1)*a,l=s+a;return d.slice(s,l)},[x,d,a]),I=t.useMemo(()=>[...f].sort((s,l)=>{const j=s[i.column],g=l[i.column],b=j<g?-1:j>g?1:0;return i.direction==="descending"?-b:b}),[i,f]);return e.jsxs(R,{user:C.user,children:[e.jsx(E,{title:"Permisos"}),e.jsx(O,{children:"Permisos"}),e.jsx(q,{children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"md:flex justify-center gap-4 items-end",children:[e.jsx(H,{isClearable:!0,classNames:{input:["border-none"]},type:"text",className:"w-full lg:w-80 mb-1",size:"sm",placeholder:"Buscar por nombre...",startContent:e.jsx(o,{path:B,size:1}),value:r,onClear:()=>z(),onValueChange:F}),e.jsxs("div",{className:"flex justify-between items-center w-full gap-1 md:gap-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-default-400 text-tiny lg:text-small",children:["Total ",c.length," permisos"]})}),e.jsxs(u,{color:"warning",className:"min-w-0 min-h-0",onPress:()=>limpiarFiltros(),children:[e.jsx(o,{path:D,size:1}),e.jsx("p",{className:"hidden sm:flex",children:"Limpiar filtros"})]}),e.jsx("div",{className:"",children:e.jsxs("label",{className:"flex items-center text-default-400 text-tiny lg:text-small",children:["Filas por pagina:",e.jsx(K,{onChange:s=>{T(s),n(1)},value:a,opciones:[{id:5,nombre:5},{id:8,nombre:8},{id:12,nombre:12}]})]})})]})]})})}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-large md:text-2xl",children:"Resultados"})}),e.jsx("div",{className:"flex gap-3",children:p("Gestion-Crear rol")?e.jsx(e.Fragment,{children:e.jsx(N,{href:route("permiso.create"),children:e.jsx(w,{content:"Agregar rol",color:"success",children:e.jsx(u,{color:"success",variant:"solid",size:"sm",className:"min-w-0 min-h-0",endContent:e.jsx(o,{path:G,size:1}),children:e.jsx("div",{className:"hidden text-tiny md:flex md:text-small",children:"Agregar permiso"})})})})}):e.jsx(e.Fragment,{})})]}),e.jsx("div",{className:"w-full",children:e.jsxs(J,{"aria-label":"Tabla documentos",color:"primary",selectedKeys:S,onSelectionChange:y,bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(Q,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:x,total:A,onChange:s=>n(s)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsx(U,{children:_.map(s=>e.jsx(W,{className:"text-start text-small",children:s.name},s.uid))}),e.jsx(X,{emptyContent:"No existen permisos",children:I.map(s=>e.jsxs(Y,{className:"text-start",children:[e.jsx(h,{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:s.id}),e.jsx(h,{className:"overflow-auto whitespace-nowrap text-ellipsis",children:s.name}),e.jsx(h,{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:p("Gestion-Editar permiso")?e.jsx(e.Fragment,{children:e.jsx(w,{content:"Editar",color:"warning",children:e.jsx(N,{href:route("permiso.edit",String(s.id)),children:e.jsx(u,{className:"me-1",size:"sm",color:"warning",variant:"flat",children:e.jsx(o,{path:L,size:1})})})})}):e.jsx(e.Fragment,{})})]},s.id))})]})})]})]})};export{xe as default};
